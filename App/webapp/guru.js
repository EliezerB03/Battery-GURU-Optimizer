window.execSafe=function(e){try{let t=guru.exec(e);return t?.then?t.catch(()=>""):Promise.resolve(t||"")}catch{return Promise.resolve("")}};let e=(e,t)=>{let o;return(...s)=>{clearTimeout(o),o=setTimeout(()=>e(...s),t)}},t=(e,t)=>{let o;return(...s)=>{o||(e(...s),o=!0,setTimeout(()=>o=!1,t))}};window.sleep=e=>new Promise(t=>setTimeout(t,e));let o={sections:null,links:null,container:null,topFade:null,bottomFade:null,nav:null,init(){this.sections=document.querySelectorAll(".tab-section"),this.links=document.querySelectorAll(".oui-tab-link"),this.container=document.querySelector(".container"),this.topFade=document.querySelector(".top-fade"),this.bottomFade=document.querySelector(".bottom-fade"),this.nav=document.querySelector(".oui-tab")}};window.showTab=function(e,t){t.classList.contains("oui-tab-link-active")||requestAnimationFrame(()=>{o.sections.forEach(e=>e.classList.remove("active"));let s=document.getElementById(e);s&&s.classList.add("active"),initSliders(),o.links.forEach(e=>{let o=e===t;e.classList.toggle("oui-tab-link-active",o);let s=e.querySelector(".outline"),i=e.querySelector(".filled"),n=e.querySelector(".oui-tab-text"),a=e.querySelector(".oui-tab-text-active");s&&i&&n&&a&&(n.style.display=o?"none":"block",a.style.display=o?"block":"none",s.style.display=o?"none":"inline-block",i.style.display=o?"inline-block":"none")}),o.container&&(o.container.scrollTop=0)})};let s={toggle:null,sections:null},i={toggle:null,bubble:null,text:null,sections:null},n={toggle:null,bubble:null,text:null,sections:null};function a(){let{toggle:e,sections:t}=s;if(!e)return;let o=e.checked;t.forEach(e=>e.classList.toggle("disabled",!o))}function r(){let{toggle:e,bubble:t,text:o,sections:s}=i;if(!e)return;let n=e.checked;requestAnimationFrame(()=>{o.textContent=n?"ON":"OFF",o.style.color=n?"var(--accent)":"var(--text)",t.style.transition||(t.style.transition="background 0.25s ease"),t.style.background=n?"var(--toggle-master-background)":"",s.forEach(e=>{e.classList.toggle("disabled",!n),n||(e.style.pointerEvents="none",e.querySelectorAll(":active").forEach(e=>e.blur()),requestAnimationFrame(()=>{e.style.pointerEvents=""}))})})}function c(){let{toggle:e,bubble:t,text:o,sections:s}=n;if(!e)return;let i=e.checked;requestAnimationFrame(()=>{o.textContent=i?"ON":"OFF",o.style.color=i?"var(--accent)":"var(--text)",t.style.transition||(t.style.transition="background 0.25s ease"),t.style.background=i?"var(--toggle-master-background)":"",s.forEach(e=>{e.classList.toggle("disabled",!i),i||(e.style.pointerEvents="none",e.querySelectorAll(":active").forEach(e=>e.blur()),requestAnimationFrame(()=>{e.style.pointerEvents=""}))})})}let l={rafId:null,setFade(e){let t=e?"1":"0";o.topFade.style.opacity=t,o.bottomFade.style.opacity=t},isScrollable:e=>e&&e.scrollHeight>e.clientHeight+1,findScrollableForSection(e){if(!e)return null;let t=e;for(;t&&t!==document.body&&(t=t.parentElement);){if(t.classList?.contains("container"))return t;let e=getComputedStyle(t);if(/(auto|scroll)/.test(e.overflowY))return t}let s=getComputedStyle(e);return/(auto|scroll)/.test(s.overflowY)?e:o.container||document.scrollingElement||document.documentElement},update(){this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{let e=document.querySelector("section.active");if(!e||e.hasAttribute("data-fade")&&"false"===e.getAttribute("data-fade"))return void this.setFade(!1);let t=this.findScrollableForSection(e);this.setFade(!!(t&&this.isScrollable(t)))})}};document.addEventListener("DOMContentLoaded",()=>{if(o.init(),[{cache:s,id:"batteryprotect_opt",selector:"#general .options",callback:a},{cache:i,id:"frq_on",bubbleId:"frq_toggle_master",textId:"frq_text",selector:"#freq .options",callback:r},{cache:n,id:"volt_on",bubbleId:"volt_toggle_master",textId:"volt_text",selector:"#voltage .options",callback:c}].forEach(e=>{let t=document.getElementById(e.id);t&&(e.cache.toggle=t,e.cache.sections=document.querySelectorAll(e.selector),e.bubbleId&&(e.cache.bubble=document.getElementById(e.bubbleId),e.cache.text=document.getElementById(e.textId)),t.addEventListener("change",e.callback),e.callback())}),o.topFade&&o.bottomFade){o.topFade.style.cssText="transition: opacity 200ms ease; opacity: 0",o.bottomFade.style.cssText="transition: opacity 200ms ease; opacity: 0",l.update();let s=showTab;showTab=function(e,t){s(e,t),setTimeout(()=>l.update(),40)};let i=new MutationObserver(t(()=>l.update(),100));document.querySelectorAll("section").forEach(e=>i.observe(e,{attributes:!0,attributeFilter:["class"]}));let n=new ResizeObserver(t(()=>l.update(),150));n.observe(document.documentElement),document.querySelectorAll(".container, section").forEach(e=>n.observe(e));let a=new MutationObserver(e(()=>l.update(),100));document.querySelectorAll(".container").forEach(e=>a.observe(e,{childList:!0,subtree:!0})),window.addEventListener("resize",e(()=>l.update(),150))}initSliders()}),function(){let e=o.container||document.querySelector(".container");if(!e)return;let s=e.querySelector(".container-scrollbar"),i=s?.querySelector(".container-scrollbar-thumb");if(!s||!i)return;let n,a=null;function r(){a=null;let t=e.scrollHeight,o=e.clientHeight;if(t<=o+1){s.style.display="none";return}s.style.display="block";let n=s.clientHeight,r=Math.max(o/t*n,24),c=n-r,l=Math.min(c,Math.max(0,e.scrollTop/(t-o||1)*c));i.style.height=r+"px",i.style.transform=`translateY(${l}px)`}function c(){a||(a=requestAnimationFrame(r))}let l=t(()=>{e.classList.add("show-scrollbar"),clearTimeout(n),n=setTimeout(()=>e.classList.remove("show-scrollbar"),1500)},50);e.addEventListener("scroll",()=>{c(),l()},{passive:!0}),window.addEventListener("resize",()=>c());let d=window.showTab;d&&(window.showTab=function(t,o){d(t,o),requestAnimationFrame(()=>{c(),e.classList.remove("show-scrollbar")})}),requestAnimationFrame(r)}();let d=document.querySelector(".container"),u=document.querySelectorAll(".tab-section"),p=new Map;u.forEach(e=>{let t=e.querySelector(".oui-viewing"),o=e.querySelector(".oui-header"),s=e.querySelector(".info-header");t&&o&&p.set(e,{viewing:t,header:o,infoviewing:s,compact:!1,infoCompact:!1})});let m=null,v=null;function _(e=!1){p.forEach(t=>{let{viewing:o,header:s,infoviewing:i}=t,n=o.getBoundingClientRect(),a=Math.max(0,Math.min(-n.top/n.height,1)),r=a>1e-4,c=a>.6;(e||t.compact!==r)&&(t.compact=r,s.classList.toggle("header-compact",r),o.classList.toggle("header-compact",r)),(e||t.infoCompact!==c)&&(t.infoCompact=c,s.classList.toggle("header-compact-infobtn",c),i?.classList.toggle("header-compact-infobtn",c))})}function h(e={}){let{effectClass:t="toggle-effect",roundedLogic:o=null,deltaThreshold:s=8,useDeltaY:i=!0,cooldown:n=300,onClickHandler:a=null}=e;return function(e){let r={pointerDown:!1,pointerInside:!1,cancelled:!1,moved:!1,animationTimeout:null,inactivityTimeout:null,startPos:0,lastActionTime:0},c=e.querySelector(".oui-inner")||e.closest(".oui-button, .oui-button-active, .oui-tab-inner")||e,l=()=>{clearTimeout(r.animationTimeout),clearTimeout(r.inactivityTimeout);let o=e.querySelector(`.${t}`);o&&(o.classList.remove("animate-in"),o.classList.add("animate-out"),c.classList.remove("pressed-effect"),c.classList.add("released-effect"),r.animationTimeout=setTimeout(()=>{c.classList.remove("released-effect"),o.remove()},550))},d=o=>{if(!r.pointerDown)return;clearTimeout(r.inactivityTimeout),r.inactivityTimeout=setTimeout(()=>{r.pointerDown&&!r.moved&&(r.cancelled=!0,l(),r.pointerInside=!1)},700);let n=Math.abs((o.touches?i?o.touches[0].clientY:o.touches[0].clientX:i?o.clientY:o.clientX)-r.startPos);if(!r.moved&&n>s){r.cancelled=!0,r.moved=!0,l(),r.pointerInside=!1,c.classList.remove("pressed-effect");return}if("button-effect"===t){let t=e.getBoundingClientRect(),s=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY;(s<t.left||s>t.right||i<t.top||i>t.bottom)&&r.pointerInside&&(r.cancelled=!0,l(),r.pointerInside=!1,c.classList.remove("pressed-effect"))}},u=()=>{if(!r.pointerDown)return;r.pointerDown=!1,document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",u);let t=Date.now();r.pointerInside&&!r.cancelled&&!r.moved&&t-r.lastActionTime>=n&&(r.lastActionTime=t,a?a(e):e.click()),l(),r.pointerInside=!1,r.cancelled=!1,r.moved=!1},p=s=>{Date.now()-r.lastActionTime<n?s.preventDefault():(r.pointerDown=!0,r.pointerInside=!0,r.cancelled=!1,r.moved=!1,r.startPos=s.touches?i?s.touches[0].clientY:s.touches[0].clientX:i?s.clientY:s.clientX,clearTimeout(r.animationTimeout),clearTimeout(r.inactivityTimeout),r.inactivityTimeout=setTimeout(()=>{r.pointerDown&&!r.moved&&(r.cancelled=!0,l(),r.pointerInside=!1)},700),c.classList.remove("released-effect"),c.classList.add("pressed-effect"),(()=>{if(r.cancelled)return;e.querySelector(`.${t}`)?.remove();let s=document.createElement("span");s.className=`${t} animate-in`,o&&o(e,s),e.appendChild(s),c.classList.add("pressed-effect")})(),document.addEventListener("pointermove",d,{passive:!0}),document.addEventListener("pointerup",u,{passive:!0}),document.addEventListener("touchmove",d,{passive:!0}),document.addEventListener("touchend",u,{passive:!0}))};e.addEventListener("click",e=>{r.pointerInside||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",p,{passive:!1}),e.addEventListener("pointerdown",p,{passive:!1})}}d.addEventListener("scroll",()=>{m||(m=requestAnimationFrame(()=>{_(!1),m=null})),clearTimeout(v),v=setTimeout(()=>_(!0),80)},{passive:!0}),_(!0),window.toggleHapticEnabled=!1,window.enableToggleHaptics=function(){toggleHapticEnabled=!0},document.querySelectorAll('.oui-container-toggle input[type="checkbox"]').forEach(e=>{e.addEventListener("change",e=>{toggleHapticEnabled&&e.isTrusted&&"u">typeof guru&&guru.hapticToggle()})});let g=h({effectClass:"toggle-effect",roundedLogic:(e,t)=>{if(null!==e.querySelector("#batteryprotect_opt"))t.classList.add("rounded-top");else{let o=[...e.parentElement.querySelectorAll(".oui-container-toggle, .oui-bubble-item, .oui-bubble-item2")],s=e===o[0],i=e===o[o.length-1];1===o.length?t.classList.add("rounded-all"):s?t.classList.add("rounded-top"):i&&t.classList.add("rounded-bottom")}},deltaThreshold:8,useDeltaY:!0,cooldown:300});document.querySelectorAll(".oui-container-toggle, .oui-bubble-item, .oui-bubble-item2").forEach(g);let f=h({effectClass:"button-effect",deltaThreshold:8,useDeltaY:!0,cooldown:300});document.querySelectorAll(".oui-button, .oui-button-active").forEach(f);let y=h({effectClass:"tab-button-effect",roundedLogic:(e,t)=>t.classList.add("rounded-all"),deltaThreshold:8,useDeltaY:!1,cooldown:300});document.querySelectorAll(".oui-tab-link").forEach(y);let b=h({effectClass:"dialog-button-effect",roundedLogic:(e,t)=>t.classList.add("rounded-all"),deltaThreshold:8,useDeltaY:!0,cooldown:0});function w(){m||(m=requestAnimationFrame(()=>{m=null;let e=window.__popupInstance,t=window.__popupPositioner,o=window.__getActiveTrigger?.();e&&t&&e.classList.contains("show")&&o&&t(o)}))}document.querySelectorAll(".oui-dialog-action-button").forEach(b),document.querySelectorAll(".oui-overlay-bubble-info, .oui-overlay-bubble-info-header").forEach(e=>{let t={pointerDown:!1,pointerInside:!1,cancelled:!1,moved:!1,animationTimeout:null,inactivityTimeout:null,startY:0,dialogOpened:!1},o=()=>{clearTimeout(t.animationTimeout),clearTimeout(t.inactivityTimeout);let o=e.querySelector(".oui-icon-info-effect");o&&(o.classList.remove("animate-in"),o.classList.add("animate-out"),e.classList.remove("pressed-effect"),e.classList.add("released-effect"),t.animationTimeout=setTimeout(()=>{e.classList.remove("released-effect"),o.remove()},550))},s=s=>{if(!t.pointerDown)return;clearTimeout(t.inactivityTimeout),t.inactivityTimeout=setTimeout(()=>{t.pointerDown&&!t.moved&&(t.cancelled=!0,o(),t.pointerInside=!1)},700);let i=Math.abs((s.touches?s.touches[0].clientY:s.clientY)-t.startY);!t.moved&&i>8&&(t.cancelled=!0,t.moved=!0,o(),t.pointerInside=!1,e.classList.remove("pressed-effect"))},i=()=>{t.pointerDown&&(t.pointerDown=!1,document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",i),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",i),!t.pointerInside||t.cancelled||t.moved||t.dialogOpened||(t.dialogOpened=!0,e.click(),setTimeout(()=>t.dialogOpened=!1,50)),o(),t.pointerInside=!1,t.cancelled=!1,t.moved=!1)},n=n=>{t.pointerDown=!0,t.pointerInside=!0,t.cancelled=!1,t.moved=!1,t.startY=n.touches?n.touches[0].clientY:n.clientY,clearTimeout(t.animationTimeout),clearTimeout(t.inactivityTimeout),t.inactivityTimeout=setTimeout(()=>{t.pointerDown&&!t.moved&&(t.cancelled=!0,o(),t.pointerInside=!1)},700),e.classList.remove("released-effect"),e.classList.add("pressed-effect"),(()=>{if(t.cancelled)return;e.querySelector(".oui-icon-info-effect")?.remove();let o=document.createElement("span");o.className="oui-icon-info-effect animate-in rounded-all",e.appendChild(o),e.classList.add("pressed-effect"),e.classList.remove("released-effect")})(),document.addEventListener("pointermove",s,{passive:!0}),document.addEventListener("pointerup",i,{passive:!0}),document.addEventListener("touchmove",s,{passive:!0}),document.addEventListener("touchend",i,{passive:!0})};e.addEventListener("click",e=>{t.pointerInside||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",n,{passive:!1}),e.addEventListener("pointerdown",n,{passive:!1})}),document.querySelector(".container").addEventListener("scroll",w,{passive:!0}),window.addEventListener("resize",w),function(){let e=null,t=document.getElementById("popup-menu");if(t&&t.parentElement!==document.body&&document.body.appendChild(t),window.__popupInstance=t,window.__popupPositioner=h,window.__getActiveTrigger=()=>e,!t)return;let o={content:t.querySelector(".popup-content"),optionsList:document.getElementById("popup-options")},s={popupOpen:!1,optionsEnabled:!0,pointerDownOutside:!1},i=0,n=document.querySelector(".container"),a=t.querySelector(".popup-scrollbar"),r=t.querySelector(".popup-scrollbar-thumb"),c=null,l=()=>{r.classList.add("show"),clearTimeout(c),c=setTimeout(d,1500)},d=()=>r.classList.remove("show");function u(){let e=o.optionsList;if(e.scrollHeight<=e.clientHeight){a.style.display="none";return}a.style.display="block";let t=e.clientHeight/e.scrollHeight,s=Math.max(18,e.clientHeight*t),i=e.scrollTop/(e.scrollHeight-e.clientHeight),n=a.clientHeight-s;r.style.height=s+"px",r.style.top=n*i+"px"}o.optionsList.addEventListener("scroll",()=>{u(),v(),l()}),window.addEventListener("resize",u);let p=t.querySelector(".popup-fade-top"),m=t.querySelector(".popup-fade-bottom");function v(){let e=o.optionsList;if(!(e.scrollHeight>e.clientHeight+1)){p.classList.remove("show"),m.classList.remove("show");return}let t=e.scrollTop<=3,s=e.scrollTop+e.clientHeight>=e.scrollHeight-2;p.classList.toggle("show",!t),m.classList.toggle("show",!s)}function _(){t.classList.remove("show"),s.popupOpen=!1,s.optionsEnabled=!0,e=null,n&&(n.style.overflow="auto",n.scrollTop=i),document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),r.classList.remove("show"),clearTimeout(c)}function h(e){let o,s=e.getBoundingClientRect(),i=t.offsetHeight,n=t.offsetWidth,a=window.innerHeight,r=window.innerWidth,c=.025*r,l=s.right+8;l+n>r-c&&(l=r-n-c);let d=a-s.bottom,u=s.top;d>=i?(o=s.top)+i>a-.15*a&&u>=i&&(o=s.bottom-i):u>=i?(o=s.bottom-i)<.2*a&&d>=i&&(o=s.top):o=d>u?s.top:s.bottom-i,t.style.top=o+"px",t.style.left=l+"px"}function g(e,t,i,n){o.optionsList.innerHTML="",e.forEach((a,r)=>{let c,l,d,u,p,m=document.createElement("li");m.className="oui-bubble-item";let v="";if(1===e.length?v="rounded-all":0===r?v="rounded-top":r===e.length-1&&(v="rounded-bottom"),m.innerHTML=`
        <div class="popup-inner">
          <span class="popup-text">${a}</span>
        </div>
        <span class="popup-effect ${v}"></span>
      `,a===t){m.classList.add("selected");let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("class","popup-icon-selected checkmark"),e.innerHTML='<path style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:3" d="m5 12 5 5 9-9"/>',m.querySelector(".popup-inner").appendChild(e)}let h=m.querySelector(".popup-inner"),g=m.querySelector(".popup-effect");c={down:!1,inside:!1,cancelled:!1,moved:!1,animTimeout:null,inactTimeout:null,startY:0,lastTime:0},l=()=>{clearTimeout(c.animTimeout),clearTimeout(c.inactTimeout),g.classList.contains("animate-in")&&(g.classList.remove("animate-in"),g.classList.add("animate-out"),h.classList.remove("pressed-effect"),h.classList.add("released-effect"),c.animTimeout=setTimeout(()=>{g.classList.remove("animate-out"),h.classList.remove("released-effect")},550))},d=e=>{if(!c.down)return;clearTimeout(c.inactTimeout),c.inactTimeout=setTimeout(()=>{c.down&&!c.moved&&(c.cancelled=!0,l(),c.inside=!1)},700);let t=Math.abs((e.touches?e.touches[0].clientY:e.clientY)-c.startY);if(!c.moved&&t>8){c.cancelled=!0,c.moved=!0,l(),c.inside=!1,h.classList.remove("pressed-effect");return}let o=m.getBoundingClientRect(),s=e.touches?e.touches[0].clientX:e.clientX,i=e.touches?e.touches[0].clientY:e.clientY;(s<o.left||s>o.right||i<o.top||i>o.bottom)&&c.inside&&(c.cancelled=!0,l(),c.inside=!1,h.classList.remove("pressed-effect"))},u=()=>{if(!c.down)return;c.down=!1,document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",u);let e=Date.now();c.inside&&!c.cancelled&&!c.moved&&e-c.lastTime>=200&&(c.lastTime=e,s.optionsEnabled&&n&&(_(),n(a,i))),l(),c.inside=!1,c.cancelled=!1,c.moved=!1},p=e=>{if(!s.optionsEnabled){e.preventDefault(),e.stopPropagation();return}Date.now()-c.lastTime<200?e.preventDefault():(c.down=!0,c.inside=!0,c.cancelled=!1,c.moved=!1,c.startY=e.touches?e.touches[0].clientY:e.clientY,clearTimeout(c.animTimeout),clearTimeout(c.inactTimeout),c.inactTimeout=setTimeout(()=>{c.down&&!c.moved&&(c.cancelled=!0,l(),c.inside=!1)},700),h.classList.remove("released-effect"),c.cancelled||(g.classList.remove("animate-out"),g.classList.add("animate-in"),h.classList.add("pressed-effect"),h.classList.remove("released-effect")),document.addEventListener("pointermove",d,{passive:!0}),document.addEventListener("pointerup",u,{passive:!0}),document.addEventListener("touchmove",d,{passive:!0}),document.addEventListener("touchend",u,{passive:!0}))},m.addEventListener("click",e=>{c.inside||(e.preventDefault(),e.stopPropagation())},!0),m.addEventListener("touchstart",p,{passive:!1}),m.addEventListener("pointerdown",p,{passive:!1}),o.optionsList.appendChild(m)}),requestAnimationFrame(()=>{!function(){let e=o.optionsList.children;if(!e.length)return;let t=e[0].offsetHeight;e.length>4.55?(o.optionsList.style.maxHeight=4.55*t+"px",o.optionsList.style.overflowY="scroll"):(o.optionsList.style.maxHeight="none",o.optionsList.style.overflowY="hidden")}(),u(),v()})}document.addEventListener("pointerdown",e=>{s.pointerDownOutside=!t.contains(e.target)},!0),document.addEventListener("pointerup",e=>{s.popupOpen&&s.pointerDownOutside&&!t.contains(e.target)&&(_(),e.preventDefault(),e.stopPropagation())},!0),["click","pointerdown","pointerup","touchstart","touchend"].forEach(e=>{document.addEventListener(e,e=>{s.popupOpen&&!t.contains(e.target)&&(e.preventDefault(),e.stopPropagation())},{capture:!0,passive:!1})});window.initPopup={openPopup:function(a,r){e=a;let c=JSON.parse(a.dataset.options),d=a.dataset.selected;t.classList.contains("show")?(h(a),setTimeout(()=>{g(c,d,a,r),o.optionsList.scrollTop=0,u(),v()},150)):(g(c,d,a,r),requestAnimationFrame(()=>{o.optionsList.scrollTop=0,t.classList.add("show"),s.popupOpen=!0,n&&(i=n.scrollTop,n.style.overflow="hidden"),requestAnimationFrame(()=>{h(a),u(),function(){let t=o.optionsList,s=e?.dataset?.selected;if(!s){t.scrollTop=0,u();return}let i=t.querySelectorAll("li"),n=null;if(i.forEach(e=>{e.textContent.trim()===s.trim()&&(n=e)}),!n){t.scrollTop=0,u();return}let a=n.offsetTop,r=n.offsetHeight,c=t.clientHeight;t.scrollTop=Math.max(0,a-c/3.169+r/2),u(),v(),l()}(),v(),l()})}))},closePopup:_,disableOptionsTemporarily:(e=300)=>{s.optionsEnabled=!1,setTimeout(()=>s.optionsEnabled=!0,e)}}}(),window.initSliders=function(){let e,t,o=["big_volt","lit_volt","g3d_volt","mif_volt","aud_volt","cam_volt","cp_volt","disp_volt","fsys0_volt","int_volt","intcam_volt","iva_volt","score_volt"],s=["batt_level"],i=new Map,n=new Map,a=new Map,r=null,c=new Map;function l(e){if(!c.has(e)){let t=document.getElementById(e);if(!t)return null;c.set(e,{slider:t,parent:t.parentElement,dotsContainer:t.nextElementSibling,valuesContainer:t.parentElement.querySelector(".slider-values, .batt-slider-values")})}return c.get(e)}function d(e){e.forEach(e=>{let t=l(e);if(!t?.slider||!t.dotsContainer)return;let o=t.slider.max-t.slider.min,s=t.slider.offsetWidth-15,i=document.createDocumentFragment();for(let e=0;e<=o;e++){let t=document.createElement("span");t.style.left=`${7.5+e/o*s+2}px`,i.appendChild(t)}t.dotsContainer.innerHTML="",t.dotsContainer.appendChild(i)})}function u(e){let t=l(e);if(!t?.slider||!t.valuesContainer)return;let o=t.slider.offsetWidth-15,s=t.valuesContainer.querySelectorAll("span");if(3!==s.length)return;let i=[7.5,7.5+.5*o+1,7.5+o];s.forEach((e,t)=>{e.style.cssText=`position: absolute; top: 0; transform: translateX(-50%); left: ${i[t]}px`})}let p=(e,t)=>{let o=e.get(t);o&&(clearTimeout(o),e.delete(t))},m=(e,t,o,s)=>{p(e,t),e.set(t,setTimeout(o,s))};function v(e,t=!1){let o=t?"batt-slider-value-float":"slider-value-float",s=l(e.id),i=s.parent.querySelector(`.${o}`);i||((i=document.createElement("div")).className=o,i.innerHTML=`<span class="${t?"slider-bat-value-text":"slider-value-text"}"></span>`,s.parent.appendChild(i));let n=i.firstElementChild,a=e.valueAsNumber;n.textContent=t?`${80+a}%`:0===a?"0":`-${a}`;let r=e.offsetWidth-15,c=(a-e.min)/(e.max-e.min);i.style.left=`${7.5+r*c}px`}function _(e,t,o=!1){let s=l(e.id).parent.querySelector(`.${o?"batt-slider-value-float":"slider-value-float"}`);s?.classList.toggle("visible",t)}function h(e,t=null){r||(r=document.querySelectorAll("button, .oui-container-toggle, .popup-trigger, .oui-tab-link, .oui-overlay-bubble-info"));let i=e?"":"none";r.forEach(e=>e.style.pointerEvents=i),[...o,...s].forEach(e=>{let o=l(e);o?.slider&&o.slider!==t&&(o.slider.style.pointerEvents=i)})}function g(e,t=!1){let a=t?e=>p(n,e):e=>p(i,e),r=t?(e,t,o)=>m(n,e,t,o):(e,t,o)=>m(i,e,t,o);if(e.forEach(e=>{let o=l(e);if(!o?.slider)return;let s=o.slider;v(s,t);let i=()=>{h(!0),r(e,()=>_(s,!1,t),270)};s.addEventListener("pointerdown",()=>{a(e),h(!1,s),v(s,t),_(s,!0,t)},{passive:!1}),s.addEventListener("pointerup",i,{passive:!1}),s.addEventListener("pointercancel",i),s.addEventListener("lostpointercapture",i),s.addEventListener("input",()=>v(s,t),{passive:!0})}),!window._sliderGlobalListenersAdded){if(!window._sliderFailsafeAdded){let e=()=>{h(!0),[...o,...s].forEach(e=>{let t=l(e)?.slider;t&&t.classList.remove("active-thumb")})};window.addEventListener("blur",e),window.addEventListener("visibilitychange",()=>{document.hidden&&e()}),window.addEventListener("pointerup",e),window.addEventListener("pointercancel",e),window._sliderFailsafeAdded=!0}window.addEventListener("mouseup",()=>{h(!0),[...o,...s].forEach(e=>{let t=l(e);if(t?.slider){let o=s.includes(e);(o?(e,t,o)=>m(n,e,t,o):(e,t,o)=>m(i,e,t,o))(e,()=>_(t.slider,!1,o),270)}})},{passive:!0}),window._sliderGlobalListenersAdded=!0}}function f(e,t=!1){let o=t?e=>p(n,e):e=>p(i,e),s=t?(e,t,o)=>m(n,e,t,o):(e,t,o)=>m(i,e,t,o);e.forEach(e=>{let i=l(e);if(!i?.slider)return;let n=i.slider,r={down:!1,startX:0,startValue:0,moved:!1,initialValue:0,shouldFire:!1,rafId:null,lastVibrateValue:null,hasDragged:!1};n.addEventListener("pointerdown",s=>{let i=Date.now();if(i-(a.get(e)||0)<100)return void s.preventDefault();a.set(e,i),o(e),r.down=!0,r.moved=!1,r.hasDragged=!1,r.shouldFire=!1,r.initialValue=n.valueAsNumber,r.lastVibrateValue=n.valueAsNumber;let c=n.getBoundingClientRect(),l=s.clientX-c.left,d=Number(n.min)||0,u=Number(n.max)||100,p=u-d,m=d+l/c.width*p;n.value=Math.round(Math.min(u,Math.max(d,m))),v(n,t),n.valueAsNumber!==r.initialValue&&(r.shouldFire=!0,window.sliderHapticEnabled&&"u">typeof guru&&guru.hapticSlider(),r.lastVibrateValue=n.valueAsNumber),r.startX=s.clientX,r.startValue=n.valueAsNumber;try{n.setPointerCapture(s.pointerId)}catch{}_(n,!0,t),n.classList.add("active-thumb"),s.preventDefault()},{passive:!1}),n.addEventListener("pointermove",e=>{if(!r.down)return;e.preventDefault();let o=e.clientX-r.startX;Math.abs(o)>5&&(r.moved=!0,r.hasDragged=!0),r.rafId&&cancelAnimationFrame(r.rafId),r.rafId=requestAnimationFrame(()=>{let e=n.clientWidth,s=Number(n.min)||0,i=Number(n.max)||100,a=r.startValue+o/e*(i-s),c=Math.round(a=Math.min(i,Math.max(s,a)));n.value=c,v(n,t),window.sliderHapticEnabled&&r.hasDragged&&c!==r.lastVibrateValue&&"u">typeof guru&&(guru.hapticSlider(),r.lastVibrateValue=c),r.shouldFire=!0})},{passive:!1}),n.addEventListener("pointerup",o=>{r.down&&(r.down=!1,r.rafId&&(cancelAnimationFrame(r.rafId),r.rafId=null),n.releasePointerCapture(o.pointerId),r.shouldFire&&n.valueAsNumber!==r.initialValue&&n.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})),s(e,()=>_(n,!1,t),280),n.classList.remove("active-thumb"))},{passive:!1}),n.addEventListener("pointercancel",o=>{r.down=!1,r.rafId&&(cancelAnimationFrame(r.rafId),r.rafId=null),n.releasePointerCapture(o.pointerId),s(e,()=>_(n,!1,t),280),n.classList.remove("active-thumb")})})}d([...o,...s]),[...o,...s].forEach(e=>u(e)),g(o,!1),g(s,!0),f(o,!1),f(s,!0),window.addEventListener("resize",()=>{t&&cancelAnimationFrame(t),clearTimeout(e),t=requestAnimationFrame(()=>{[...o,...s].forEach(e=>{let t=l(e);t?.slider&&v(t.slider,s.includes(e))})}),e=setTimeout(()=>{d([...o,...s]),[...o,...s].forEach(e=>u(e))},150)},{passive:!0})},window.sliderHapticEnabled=!1,window.enableSliderHaptics=function(){sliderHapticEnabled=!0},document.addEventListener("DOMContentLoaded",()=>{let e=(e,t)=>{let o;return(...s)=>{o||(e(...s),o=!0,setTimeout(()=>o=!1,t))}},t={mask:document.querySelector(".oui-dialog-mask"),body:document.body,doc:document.documentElement,buttons:null,dialogs:document.querySelectorAll(".oui-dialog")},o=null,s=!1,i=0,n=new WeakMap,a=new WeakMap,r=e=>{let t=e.target;for(;t;){let e=window.getComputedStyle(t);if("auto"===e.overflowY||"scroll"===e.overflowY||t.classList?.contains("oui-dialog-description"))return;if(t=t.parentElement,t?.classList?.contains("oui-dialog"))break}e.preventDefault()},c=e=>i=e.touches[0].clientY,l=e=>{if(!o)return;let t=e.target,s=!1;for(;t&&t!==o;){let e=window.getComputedStyle(t);if(("auto"===e.overflowY||"scroll"===e.overflowY)&&t.scrollHeight>t.clientHeight){s=!0;break}t=t.parentElement}if(s)return;let{scrollTop:n,scrollHeight:a,offsetHeight:r}=o,c=e.touches[0].clientY,l=c>i,d=c<i;(0===n&&l||n+r>=a&&d)&&e.preventDefault(),i=c},d=e=>{s=!e,requestAnimationFrame(()=>{t.buttons||(t.buttons=document.querySelectorAll(".oui-dialog-action-button, .close-dialog-btn, .reset-dialog-btn")),t.buttons.forEach(t=>t.style.pointerEvents=e?"":"none"),e?(t.body.classList.remove("app-blocked-body"),t.doc.classList.remove("app-blocked")):(t.body.classList.add("app-blocked-body"),t.doc.classList.add("app-blocked"))})},u=e=>{let t=document.getElementById("resetting_app_dialog");if(s||t?.classList.contains("show"))return e.preventDefault(),e.stopPropagation(),!1;m()},p=(e,s={mask:!0,maskType:"default"})=>{d(!1),e.querySelectorAll('.oui-dialog-description, [style*="overflow-y: auto"], [style*="overflow-y: scroll"]').forEach(e=>e.scrollTop=0),e.classList.add("show"),s.mask&&("warn"!==s.maskType&&t.mask.addEventListener("click",u,{passive:!1}),t.mask.classList.add("show")),o=e,t.body.classList.add("no-scroll");let i=y(e);i?.reset(),i?.show(),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchstart",c,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1}),setTimeout(()=>d(!0),275)},m=()=>{if(!o)return;d(!1),o.classList.remove("show"),o.classList.add("hide"),t.mask.classList.contains("show")&&(t.mask.classList.remove("show"),t.mask.removeEventListener("click",u)),t.body.classList.remove("no-scroll"),document.removeEventListener("touchmove",r),document.removeEventListener("touchstart",c),document.removeEventListener("touchmove",l);let e=t=>{t.target===o&&o.classList.contains("hide")&&(o.removeEventListener("transitionend",e),setTimeout(()=>{o.classList.remove("hide"),o=null,d(!0)},10))};o.addEventListener("transitionend",e)};window.openDialog=p,window.closeDialog=m,window.switchDialog=(e,s,i={mask:!0,maskType:"default"})=>{if(!e||!s)return;d(!1),t.mask.removeEventListener("click",u),e.classList.remove("show"),e.classList.add("hide"),s.classList.remove("show","hide"),s.querySelectorAll('.oui-dialog-description, [style*="overflow-y: auto"], [style*="overflow-y: scroll"]').forEach(e=>e.scrollTop=0);let n=a=>{if(a.target===e&&e.classList.contains("hide")){e.removeEventListener("transitionend",n),e.classList.remove("hide"),s.classList.add("show"),o=s,"warn"!==i.maskType&&t.mask.addEventListener("click",u,{passive:!1});let a=y(s);a?.reset(),a?.show(),setTimeout(()=>d(!0),275)}};e.addEventListener("transitionend",n)};let v=(t,o)=>{let s=n.get(t)||(t=>{if(!t)return null;if(n.has(t))return n.get(t);let o=t.querySelector(".oui-dialog-description");if(!o)return null;let s=t.querySelector(".dialog-top-fade"),i=t.querySelector(".dialog-bottom-fade");s||((s=document.createElement("div")).className="dialog-top-fade",s.style.opacity="0",t.appendChild(s)),i||((i=document.createElement("div")).className="dialog-bottom-fade",i.style.opacity="0",t.appendChild(i));let a=e(()=>{requestAnimationFrame(()=>{let e=o.getBoundingClientRect(),n=t.getBoundingClientRect();s.style.top=`${e.top-n.top}px`,i.style.bottom=`${n.bottom-e.bottom}px`})},100);if(a(),"ResizeObserver"in window){let e=new ResizeObserver(a);e.observe(o),e.observe(t)}let r={desc:o,top:s,bottom:i};return n.set(t,r),r})(t);if(!s)return;let i=o?"1":"0";s.top.style.opacity=i,s.bottom.style.opacity=i},_=null,h=()=>{_&&cancelAnimationFrame(_),_=requestAnimationFrame(()=>{let e=document.querySelector(".oui-dialog.show");if(!e)return v(e,!1);let t=e.querySelector(".oui-dialog-description")||e;v(e,t?.scrollHeight>t?.clientHeight+1)})};document.querySelectorAll("[data-dialog-target]").forEach(e=>{e.addEventListener("click",t=>{if(s)return t.preventDefault(),t.stopPropagation(),!1;let o=e.getAttribute("data-dialog-target"),i=document.getElementById(o),n=e.querySelector('input[type="checkbox"].toggle');i?.querySelector(".oui-loading")&&window.resetLoadingAnimation&&window.resetLoadingAnimation(i.querySelector(".oui-loading")),n?setTimeout(()=>n.checked&&i&&p(i),0):i&&p(i)})}),document.querySelectorAll(".close-dialog-btn").forEach(e=>{e.addEventListener("click",e=>{if(s)return e.preventDefault(),e.stopPropagation(),!1;m()})}),h();let g=new MutationObserver(e(h,100));if(t.dialogs.forEach(e=>g.observe(e,{attributes:!0,attributeFilter:["class"]})),"ResizeObserver"in window){let o=new ResizeObserver(e(h,150));o.observe(t.doc),document.querySelectorAll(".oui-dialog, .oui-dialog-description").forEach(e=>o.observe(e))}let f=new MutationObserver(e(h,100));document.querySelectorAll(".oui-dialog .oui-dialog-description").forEach(e=>f.observe(e,{childList:!0,subtree:!0})),window.addEventListener("resize",e(h,150));let y=e=>{if(!e)return null;if(a.has(e))return a.get(e);let t=e.querySelector(".oui-dialog-description"),o=e.querySelector(".dialog-scrollbar"),s=e.querySelector(".dialog-scrollbar-thumb");if(!t||!o||!s)return null;let i=null,n=!1,r=()=>{n=!1;let e=t.scrollHeight,i=t.clientHeight;if(e<=i+1)return void o.classList.remove("show");let a=t.scrollTop,r=o.clientHeight,c=Math.max(i/e*r,24);s.style.height=c+"px",s.style.transform=`translateY(${a/(e-i)*(r-c)}px)`},c=()=>{n||(n=!0,requestAnimationFrame(r))};if(t.addEventListener("scroll",()=>{c(),o.classList.add("show"),clearTimeout(i),i=setTimeout(()=>o.classList.remove("show"),1500)},{passive:!0}),"ResizeObserver"in window){let o=new ResizeObserver(()=>c());o.observe(t),o.observe(e)}let l={reset(){t.scrollTop=0,o.classList.remove("show"),c()},show(){o.classList.add("show"),clearTimeout(i),i=setTimeout(()=>o.classList.remove("show"),1500)}};return a.set(e,l),c(),l}});let E="/data/data/com.guru.batteryoptimizer/guru.sh",L=`# BATTERY GURU OPTIMIZER (ALL SETTINGS)
# Developed by @EliezerB03

#!/system/bin/sh

# ============== ALL OPTIMIZATIONS  ============== #

#---------------< BATTERY OPTIMIZATIONS ON APPS >---------------#
# forceappsbattopt_on=1
settings put global forced_app_standby_enabled 1

#---------------< CPU HOTPLUG OPTIMIZATIONS >---------------#
# hotplugset_on=1
echo '0' > /sys/power/cpuhotplug/governor/user_mode
echo '0' > /sys/power/cpuhotplug/governor/enabled

#---------------< CPU POWER EFFICIENT >---------------#
# powereffiset_on=1
echo 'Y' > /sys/module/workqueue/parameters/power_efficient

#---------------< THERMAL OPTIMIZATIONS >---------------#
# thermalset_on=1
system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0
chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms
echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres
echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres
chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus
pm disable com.google.android.gms/.chimera.GmsIntentOperationService

#---------------< GPU BOOST >---------------#
# gpuboost_on=0
echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor

#---------------< SWAP OPTIMIZATIONS >---------------#
# swapset_on=1
echo '10' > /proc/sys/vm/dirty_ratio
echo '3' > /proc/sys/vm/dirty_background_ratio
echo '2500' > /proc/sys/vm/dirty_expire_centisecs
echo '1250' > /proc/sys/vm/dirty_writeback_centisecs
echo '2' > /proc/sys/vm/laptop_mode
echo '70' > /proc/sys/vm/swappiness

#---------------< STORAGE OPTIMIZATIONS >---------------#
# storageset_on=1
echo '1' > /sys/block/sda/queue/rotational
echo '1' > /sys/block/sda/queue/add_random
echo '2' > /sys/block/sda/queue/rq_affinity

#---------------< BATTERY PROTECTION >---------------#
# batteryprotect_on=0
# battery_litmit=90%
echo '100' > /sys/class/power_supply/battery/batt_full_capacity

#---------------< FREQS SETTINGS >---------------#
# frqset_on=1
# lit=1690
echo '1690000' > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq
# big=1690
echo '1690000' > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq

#---------------< VOLTAGE SETTINGS >---------------#
# voltset_on=1
# big_volt=-4
echo '-4' > /sys/power/percent_margin/big_margin_percent
# lit_volt=-4
echo '-4' > /sys/power/percent_margin/lit_margin_percent
# g3d_volt=-4
echo '-4' > /sys/power/percent_margin/g3d_margin_percent
# mif_volt=-4
echo '-4' > /sys/power/percent_margin/mif_margin_percent
# aud_volt=-4
echo '-4' > /sys/power/percent_margin/aud_margin_percent
# cam_volt=-4
echo '-4' > /sys/power/percent_margin/cam_margin_percent
# cp_volt=0
echo '0' > /sys/power/percent_margin/cp_margin_percent
# disp_volt=-4
echo '-4' > /sys/power/percent_margin/disp_margin_percent
# fsys0_volt=-4
echo '-4' > /sys/power/percent_margin/fsys0_margin_percent
# int_volt=-4
echo '-4' > /sys/power/percent_margin/int_margin_percent
# intcam_volt=-4
echo '-4' > /sys/power/percent_margin/intcam_margin_percent
# iva_volt=-4
echo '-4' > /sys/power/percent_margin/iva_margin_percent
# score_volt=-4
echo '-4' > /sys/power/percent_margin/score_margin_percent

#---------------< LIMIT BACKGROUND APP PROCESS (LABS) >---------------#
# limitprocess_on=0
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi

#---------------< FORCE DOZE (LABS) >---------------#
# forcedoze_on=0
dumpsys deviceidle unforce

# ======================================`;window.commandFile=E,window.scriptContent=L;let k=(e,t)=>`sed -i "s|echo ['\\"][^'\\"]*['\\"] > ${e}|echo '${t}' > ${e}|g" ${E}; `,S={toggles:[{id:"forcebattapps_opt",marker:"forceappsbattopt_on",defaultState:!0,blockActive:`# forceappsbattopt_on=1
settings put global forced_app_standby_enabled 1`,blockInactive:`# forceappsbattopt_on=0
settings put global forced_app_standby_enabled 0`,liveCommandActive:"settings put global forced_app_standby_enabled 1",liveCommandInactive:"settings put global forced_app_standby_enabled 0"},{id:"cpu_hotplug",marker:"hotplugset_on",defaultState:!0,paths:[{path:"/sys/power/cpuhotplug/governor/user_mode",active:"0",inactive:"1"},{path:"/sys/power/cpuhotplug/governor/enabled",active:"0",inactive:"1"}],liveCommandActive:"echo '0' > /sys/power/cpuhotplug/governor/user_mode && echo '0' > /sys/power/cpuhotplug/governor/enabled",liveCommandInactive:"echo '1' > /sys/power/cpuhotplug/governor/user_mode && echo '1' > /sys/power/cpuhotplug/governor/enabled"},{id:"power_eff",marker:"powereffiset_on",defaultState:!0,paths:[{path:"/sys/module/workqueue/parameters/power_efficient",active:"Y",inactive:"N"}],liveCommandActive:"echo 'Y' > /sys/module/workqueue/parameters/power_efficient",liveCommandInactive:"echo 'N' > /sys/module/workqueue/parameters/power_efficient"},{id:"thermal_opt",marker:"thermalset_on",defaultState:!0,blockActive:`# thermalset_on=1
system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0
chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms
echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres
echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres
chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus
pm disable com.google.android.gms/.chimera.GmsIntentOperationService`,blockInactive:`# thermalset_on=0
system_table_unset activity_manager_constants
pm enable com.google.android.gms/.chimera.GmsIntentOperationService`,liveCommandActive:"system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0 && chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus && chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus && echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus && echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus && echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres && echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres && echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres && echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms && echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus && echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus && echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres && echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres && echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms && echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres && chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus && pm disable com.google.android.gms/.chimera.GmsIntentOperationService",liveCommandInactive:"system_table_unset activity_manager_constants && pm enable com.google.android.gms/.chimera.GmsIntentOperationService"},{id:"gpuboost_opt",marker:"gpuboost_on",defaultState:!1,paths:[{path:"/sys/devices/platform/17500000.mali/dvfs_governor",active:"3",inactive:"1"}],liveCommandActive:"echo '3' > /sys/devices/platform/17500000.mali/dvfs_governor",liveCommandInactive:"echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor"},{id:"swap_opt",marker:"swapset_on",defaultState:!0,paths:[{path:"/proc/sys/vm/dirty_ratio",active:"10",inactive:"0"},{path:"/proc/sys/vm/dirty_background_ratio",active:"3",inactive:"0"},{path:"/proc/sys/vm/dirty_expire_centisecs",active:"2500",inactive:"200"},{path:"/proc/sys/vm/dirty_writeback_centisecs",active:"1250",inactive:"500"},{path:"/proc/sys/vm/laptop_mode",active:"2",inactive:"0"},{path:"/proc/sys/vm/swappiness",active:"70",inactive:"100"}]},{id:"storage_opt",marker:"storageset_on",defaultState:!0,paths:[{path:"/sys/block/sda/queue/rotational",active:"1",inactive:"0"},{path:"/sys/block/sda/queue/add_random",active:"1",inactive:"0"},{path:"/sys/block/sda/queue/rq_affinity",active:"2",inactive:"1"}]},{id:"batteryprotect_opt",marker:"batteryprotect_on",defaultState:!1,paths:[{path:"/sys/class/power_supply/battery/batt_full_capacity",active:null,inactive:"100"}],dynamicPaths:[{path:"/sys/class/power_supply/battery/batt_full_capacity",dependsOn:"batt_level",transform:e=>e+80}]},{id:"frq_on",marker:"frqset_on",defaultState:!0,paths:[{path:"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq",active:null,inactive:"1794000"},{path:"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",active:null,inactive:"2704000"}],dynamicPaths:[{path:"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq",dependsOn:"frq_little",transform:e=>1e3*parseInt(e)},{path:"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",dependsOn:"frq_big",transform:e=>1e3*parseInt(e)}]},{id:"volt_on",marker:"voltset_on",defaultState:!0,paths:[{path:"/sys/power/percent_margin/big_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/lit_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/g3d_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/mif_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/aud_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/cam_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/cp_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/disp_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/fsys0_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/int_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/intcam_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/iva_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/score_margin_percent",active:null,inactive:"0"}],dynamicPaths:[{path:"/sys/power/percent_margin/big_margin_percent",dependsOn:"big_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/lit_margin_percent",dependsOn:"lit_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/g3d_margin_percent",dependsOn:"g3d_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/mif_margin_percent",dependsOn:"mif_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/aud_margin_percent",dependsOn:"aud_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/cam_margin_percent",dependsOn:"cam_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/cp_margin_percent",dependsOn:"cp_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/disp_margin_percent",dependsOn:"disp_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/fsys0_margin_percent",dependsOn:"fsys0_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/int_margin_percent",dependsOn:"int_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/intcam_margin_percent",dependsOn:"intcam_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/iva_margin_percent",dependsOn:"iva_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/score_margin_percent",dependsOn:"score_volt",transform:e=>-Math.round(e)}]},{id:"limitbackground_opt",marker:"limitprocess_on",defaultState:!1,blockActive:`# limitprocess_on=1
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi`,blockInactive:`# limitprocess_on=0
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi`,liveCommandActive:"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi",liveCommandInactive:"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi"},{id:"forcedoze_opt",marker:"forcedoze_on",defaultState:!1,blockActive:`# forcedoze_on=1
dumpsys deviceidle force-idle`,blockInactive:`# forcedoze_on=0
dumpsys deviceidle unforce`,liveCommandActive:"dumpsys deviceidle force-idle",liveCommandInactive:"dumpsys deviceidle unforce"}],popups:[{id:"frq_little",path:"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq",marker:"lit",defaultValue:"1690 Mhz",options:[],masterToggle:"frq_on",inactiveValue:1794e3,transformToPath:e=>1e3*parseInt(e),transformFromPath:e=>e+" Mhz"},{id:"frq_big",path:"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",marker:"big",defaultValue:"1690 Mhz",options:[],masterToggle:"frq_on",inactiveValue:2704e3,transformToPath:e=>1e3*parseInt(e),transformFromPath:e=>e+" Mhz"}],sliders:[{id:"batt_level",path:"/sys/class/power_supply/battery/batt_full_capacity",marker:"battery_litmit",defaultValue:90,min:0,max:15,step:1,valueToSlider:e=>e-80,sliderToValue:e=>e+80,masterToggle:"batteryprotect_opt",inactiveValue:100,unit:"%"},...["big","lit","g3d","mif","aud","cam","cp","disp","fsys0","int","intcam","iva","score"].map(e=>({id:`${e}_volt`,path:`/sys/power/percent_margin/${e}_margin_percent`,marker:`${e}_volt`,defaultValue:"cp"===e?0:-4,min:0,max:10,step:1,valueToSlider:e=>-e,sliderToValue:e=>-e,masterToggle:"volt_on",inactiveValue:0}))]};function T(e,t){let o="";if(e.marker&&(o+=`sed -i "s|^# ${e.marker}=.*|# ${e.marker}=${+!!t}|" ${E}; `),t?e.blockActive:e.blockInactive){var s;let i,n,a=t?e.blockActive:e.blockInactive;o+=(s=e.marker,i=`${E}.${s}_block.tmp`,n=`${E}.tmp`,`cat > ${i} <<'EOB'
${a}
EOB
awk -v blk='${i}' -v marker='^# ${s}=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${E} > ${n}; mv ${n} ${E}; rm -f ${i}; `)}if(e.paths)for(let s of e.paths){let i;if(t)if(null!==s.active)i=s.active;else{let t=e.dynamicPaths?.find(e=>e.path===s.path);if(t){let e=document.getElementById(t.dependsOn);if(e){let o;if(null==(o="INPUT"===e.tagName&&"range"===e.type?parseFloat(e.value):e.dataset.selected)){let e=S.sliders.find(e=>e.id===t.dependsOn),s=S.popups.find(e=>e.id===t.dependsOn);e?o=e.defaultValue:s&&(o=s.defaultValue)}i=t.transform(o)}else i=s.inactive}else i=s.active}else i=s.inactive;o+=`echo '${i}' > ${s.path}; ${k(s.path,i)}`}if(t?e.liveCommandActive:e.liveCommandInactive){let s=t?e.liveCommandActive:e.liveCommandInactive;o+=`${s}; `}return o}function q(e){let t=document.getElementById(e.id);if(!t)return;let o=`toggle_${e.id}`,s=localStorage.getItem(o),i=null!==s?"1"===s:!!e.defaultState;t.checked=i,e.marker&&setTimeout(async()=>{try{let s=(await execSafe(`grep -m1 "^# ${e.marker}=" ${E} || echo "# ${e.marker}=${+!!i}"`)).match(RegExp(`^# ${e.marker}=(\\d+)`));if(s){let e="1"===s[1];e!==i&&(localStorage.setItem(o,e?"1":"0"),t.checked=e,t.dispatchEvent(new Event("change",{bubbles:!0})))}}catch{}},0);let n=null;t.addEventListener("change",()=>{let s=t.checked;localStorage.setItem(o,s?"1":"0"),clearTimeout(n),n=setTimeout(()=>{let t=T(e,s);t&&execSafe(t)},249)})}function I(e){let t=document.getElementById(e.id);if(!t)return;t.min=e.min,t.max=e.max,t.step=e.step;let o=`slider_${e.id}`,s=localStorage.getItem(o),i=null!==s?Number(s):e.defaultValue;t.value=e.valueToSlider?e.valueToSlider(i):i,setTimeout(async()=>{try{let s=(await execSafe(`grep -m1 "^# ${e.marker}=" ${E} || echo "# ${e.marker}=${i}"`)).match(RegExp(`^# ${e.marker}=([^%\\n]*)`));if(s){let n=Number(s[1]);n!==i&&(t.value=e.valueToSlider?e.valueToSlider(n):n,localStorage.setItem(o,n))}}catch{}},0);let n=null;t.addEventListener("change",()=>{let s=parseFloat(t.value),i=e.sliderToValue?e.sliderToValue(s):s;localStorage.setItem(o,i),clearTimeout(n),n=setTimeout(()=>{let t=document.getElementById(e.masterToggle),o=!t||t.checked?i:e.inactiveValue,s=`sed -i "s|^# ${e.marker}=.*|# ${e.marker}=${i}${e.unit||""}|" ${E}; `;execSafe(s+=`echo '${o}' > ${e.path}; ${k(e.path,o)}`)},249)})}function x(e){let t=document.getElementById(e.id);if(!t)return;let o=[];try{o=JSON.parse(t.dataset.options||"[]")}catch{o=e.options}e.options=o;let s=`popup_${e.id}`,i=localStorage.getItem(s)||e.defaultValue;t.dataset.selected=i;let n=t.querySelector(".popup-value");n||((n=document.createElement("span")).className="popup-value",t.appendChild(n)),n.textContent=i,setTimeout(async()=>{try{let o=(await execSafe(`grep -m1 "^# ${e.marker}=" ${E} || echo "# ${e.marker}=${parseInt(i)}"`)).match(RegExp(`^# ${e.marker}=(\\d+)`));if(o){let a=o[1],r=e.transformFromPath(Number(a));r!==i&&(t.dataset.selected=r,n.textContent=r,localStorage.setItem(s,r))}}catch{}},0),t.addEventListener("click",o=>{o.stopPropagation(),window.initPopup&&(document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),t.classList.add("popup-label-active"),window.initPopup.disableOptionsTemporarily?.(300),window.initPopup.openPopup(t,o=>{t.dataset.selected=o,n.textContent=o,localStorage.setItem(s,o),setTimeout(()=>{let t=document.getElementById(e.masterToggle),s=!t||t.checked?e.transformToPath(o):e.inactiveValue,i=o.split(" ")[0];execSafe(`sed -i "s|^# ${e.marker}=.*|# ${e.marker}=${i}|" ${E}; echo '${s}' > ${e.path}; ${k(e.path,s)}`)},249)},e.options))})}window.applySettings=async function(){let e="";try{e=await execSafe(`cat ${E}`)}catch{e=""}for(let t of S.sliders){let o=document.getElementById(t.id);if(!o)continue;let s=`slider_${t.id}`,i=localStorage.getItem(s);null===i&&(i=t.defaultValue,localStorage.setItem(s,i)),i=Number(i),o.value=t.valueToSlider?t.valueToSlider(i):i;let n=RegExp(`^# ${t.marker}=([^%\\n]*)`,"m"),a=e.match(n);if(a&&Number(a[1])!==i){let e=document.getElementById(t.masterToggle),o=!e||e.checked?i:t.inactiveValue,s=`sed -i "s|^# ${t.marker}=.*|# ${t.marker}=${i}${t.unit||""}|" ${E}; `;s+=`echo '${o}' > ${t.path}; ${k(t.path,o)}`,await execSafe(s)}}for(let t of S.popups){let o=document.getElementById(t.id);if(!o)continue;let s=`popup_${t.id}`,i=localStorage.getItem(s)||t.defaultValue;localStorage.setItem(s,i),o.dataset.selected=i;let n=o.querySelector(".popup-value");n&&(n.textContent=i);let a=RegExp(`^# ${t.marker}=(\\d+)`,"m"),r=e.match(a);if(r){let e=r[1],a=t.transformFromPath(Number(e));if(a!==i){localStorage.setItem(s,a),o.dataset.selected=a,n&&(n.textContent=a);let e=document.getElementById(t.masterToggle),i=!e||e.checked?t.transformToPath(a):t.inactiveValue,r=a.split(" ")[0],c=`sed -i "s|^# ${t.marker}=.*|# ${t.marker}=${r}|" ${E}; `;c+=`echo '${i}' > ${t.path}; ${k(t.path,i)}`,await execSafe(c)}}}for(let t of S.toggles){let o=document.getElementById(t.id);if(!o)continue;let s=`toggle_${t.id}`,i=localStorage.getItem(s);null===i&&(i=t.defaultState?"1":"0",localStorage.setItem(s,i));let n="1"===i;if(t.marker){let o=RegExp(`^# ${t.marker}=(\\d+)`,"m"),s=e.match(o),i=s?"1"===s[1]:null;if(null!==i&&i!==n){let e=T(t,n);await execSafe(e)}}o.checked!==n?(o.checked=n,o.dispatchEvent(new Event("change",{bubbles:!0}))):n&&t.dynamicPaths&&o.dispatchEvent(new Event("change",{bubbles:!0}))}},document.addEventListener("DOMContentLoaded",()=>{execSafe(`if [ ! -f ${E} ]; then cat > ${E} << 'EOF'
${L}
EOF
fi`),S.toggles.forEach(q),S.sliders.forEach(I),S.popups.forEach(x)}),document.addEventListener("DOMContentLoaded",()=>{let e={mask:document.querySelector(".oui-dialog-mask"),body:document.body,resetButton:document.querySelector(".close-dialog-text-reset")};window.resetLoadingAnimation=function(e){e&&(e.style.animation="none",e.offsetHeight,e.style.animation="",e.querySelectorAll(".ball").forEach(e=>{e.style.animation="none",e.offsetHeight,e.style.animation=""}))};let t={open(t){let o=document.getElementById(t);if(!o||!e.mask)return;let s=o.querySelector(".oui-loading");s&&resetLoadingAnimation&&resetLoadingAnimation(s),o.classList.add("show"),e.mask.classList.add("show"),e.body.classList.add("no-scroll")},close(){let t=document.querySelector(".oui-dialog.show");return!!t&&!!e.mask&&(t.classList.remove("show"),t.classList.add("hide"),e.mask.classList.remove("show"),e.body.classList.remove("no-scroll"),setTimeout(()=>t.classList.remove("hide"),5),!0)},closeKeepingMask(){let t=document.querySelector(".oui-dialog.show");return!!t&&(t.classList.remove("show"),t.classList.add("hide"),e.mask&&e.mask.classList.add("show"),e.body.classList.add("no-scroll"),setTimeout(()=>t.classList.remove("hide"),5),!0)}};if(e.resetButton){let o=e.resetButton.closest(".reset-dialog-btn");if(!o)return;o.removeEventListener("click",t.close),o.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation();let s=document.createElement("div");s.id="temp-blocking-layer",s.style.cssText="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 3000; pointer-events: all;",e.body.appendChild(s),e.body.classList.add("no-scroll"),t.closeKeepingMask()&&setTimeout(()=>{s.remove(),t.open("resetting_app_dialog"),setTimeout(()=>{let e,t;e=["settings put global forced_app_standby_enabled 1","echo '0' > /sys/power/cpuhotplug/governor/user_mode","echo '0' > /sys/power/cpuhotplug/governor/enabled","echo 'Y' > /sys/module/workqueue/parameters/power_efficient","system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0","chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus","echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres","echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms","echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres","echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres","chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus","pm disable com.google.android.gms/.chimera.GmsIntentOperationService","echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor","echo '10' > /proc/sys/vm/dirty_ratio","echo '3' > /proc/sys/vm/dirty_background_ratio","echo '2500' > /proc/sys/vm/dirty_expire_centisecs","echo '1250' > /proc/sys/vm/dirty_writeback_centisecs","echo '2' > /proc/sys/vm/laptop_mode","echo '70' > /proc/sys/vm/swappiness","echo '1' > /sys/block/sda/queue/rotational","echo '1' > /sys/block/sda/queue/add_random","echo '2' > /sys/block/sda/queue/rq_affinity","echo '100' > /sys/class/power_supply/battery/batt_full_capacity","echo '1690000' > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq","echo '1690000' > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq","echo '-4' > /sys/power/percent_margin/big_margin_percent","echo '-4' > /sys/power/percent_margin/lit_margin_percent","echo '-4' > /sys/power/percent_margin/g3d_margin_percent","echo '-4' > /sys/power/percent_margin/mif_margin_percent","echo '-4' > /sys/power/percent_margin/aud_margin_percent","echo '-4' > /sys/power/percent_margin/cam_margin_percent","echo '0' > /sys/power/percent_margin/cp_margin_percent","echo '-4' > /sys/power/percent_margin/disp_margin_percent","echo '-4' > /sys/power/percent_margin/fsys0_margin_percent","echo '-4' > /sys/power/percent_margin/int_margin_percent","echo '-4' > /sys/power/percent_margin/intcam_margin_percent","echo '-4' > /sys/power/percent_margin/iva_margin_percent","echo '-4' > /sys/power/percent_margin/score_margin_percent","if [ $API -eq 35 ]; then service call activity 51 i32 -1; elif [ $API -eq 34 ]; then service call activity 51 i32 -1; elif [ $API -eq 33 ]; then service call activity 44 i32 -1; fi","dumpsys deviceidle unforce"],t=localStorage.getItem("last_changelog_version"),localStorage.clear(),t&&localStorage.setItem("last_changelog_version",t),setTimeout(()=>{e.forEach(e=>execSafe(e)),execSafe(`cat > ${commandFile} << 'EOF'
${scriptContent}
EOF`)},5),setTimeout(()=>guru.closeApp(),4e3)},5)},700)})}});let C=!0,A=!1,$=!1,O=!1,M={mask:document.querySelector(".oui-loading-mask"),dialog:document.querySelector(".oui-dialog"),loader:document.querySelector(".oui-loading"),label:null,body:document.body,docElement:document.documentElement};function P(){M.body.classList.add("app-blocked-body"),M.docElement.classList.add("app-blocked")}function D(){M.body.classList.remove("app-blocked-body"),M.docElement.classList.remove("app-blocked")}function R(e){M.label||(M.label=document.querySelector(".oui-dialog-description")),M.label&&(M.label.innerHTML=e)}let F=e=>new Promise(t=>setTimeout(t,e));async function N(){if(O)return;M.mask.classList.remove("active"),M.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",M.loader.classList.remove("active"),M.body.classList.remove("no-scroll");let e=async t=>{t.target!==M.mask||M.mask.classList.contains("active")||(await F(5),C=!1,M.mask.removeEventListener("transitionend",e),D())};M.mask.addEventListener("transitionend",e,{passive:!0});let t=JSON.parse(await guru.isRoot());t.success&&!t.hasRoot&&(C=!1,A=!1,await F(300),openDialog(document.getElementById("rootlost_warn"),{mask:!0,maskType:"warn"}))}let H=async e=>{e.target.closest(".closeapp-dialog-btn")&&(e.preventDefault(),e.stopPropagation(),await F(50),guru.closeApp())};async function B(){try{let e=await execSafe("dumpsys battery 2>/dev/null | grep mSavedBatteryAsoc | head -1"),t=await execSafe("dumpsys battery 2>/dev/null | grep mSavedBatteryUsage | head -1"),o=null,s=null;if(e){let t=e.match(/(\d+)/);t&&(o=t[1])}if(t){let e=t.match(/(\d+)/);if(e){let t=e[1],o=t;if(t.length>=3){let e=t.slice(0,-1);o=e.slice(0,-1)+"."+e.slice(-1)}s=o}}let i=document.getElementById("battery_health");o&&s?i.textContent=`${o}% / ${s} Cycles`:i.textContent="Unknown"}catch{document.getElementById("battery_health").textContent="Unknown"}}async function Y(){if(G){try{G.abort()}catch{}G=null}let e=document.getElementById("rootlost_warn"),t=function(){for(let e of document.querySelectorAll(".oui-dialog.show"))if(!e.closest(".oui-loading-mask"))return e;return null}();t!==e&&(O=!0,t&&"function"==typeof closeDialog?closeDialog():!0===C&&(M.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",M.loader.classList.remove("active"),M.body.classList.remove("no-scroll"),D()),"function"==typeof openDialog&&(C=!1,await F(300),openDialog(e,!0===C?{mask:!1}:{mask:!0,maskType:"warn"})))}async function V(){if(!$&&A&&!O){$=!0;try{let e=await guru.isRoot(),t=JSON.parse(e);t.success&&!t.hasRoot&&await Y()}catch{}finally{$=!1}}}async function U(){if(!$&&!O)try{await V()}finally{setTimeout(()=>{$||D()},30)}}document.addEventListener("click",H,{passive:!1});let X=new Set;window.onAppForegrounded=async()=>{for(let e of X)try{e()}catch{}},X.add(async()=>{if(!$)try{await U()}catch{}}),window.onAppWindowFocus=async function(){try{await V()}catch{}finally{D()}},window.onAppWindowBlur=function(){P()};let z={jsonUrl:null,currentVersionCode:null,currentVersionName:null,packageName:null,isChecking:!1},G=null;function W(){if("u">typeof guru)try{let e=guru.getAppInfo(),t=JSON.parse(e);t.success&&(z.currentVersionCode=t.versionCode,z.currentVersionName=t.versionName,z.packageName=t.packageName,z.jsonUrl=t.updateUrl)}catch{}}async function J(){if(z.isChecking||O)return;z.isChecking=!0;let{signal:e}=G=new AbortController,t=document.getElementById("update_checking");try{let o;if(null===z.currentVersionCode&&W(),!z.jsonUrl||null===z.currentVersionCode){O||openDialog(document.getElementById("update_connectionerror"));return}if(!O){if(resetLoadingAnimation){let e=t.querySelector(".oui-loading");e&&resetLoadingAnimation(e)}openDialog(t,{mask:!0,maskType:"warn"})}let s=fetch(z.jsonUrl+(z.jsonUrl.includes("?")?"&":"?")+"_="+Date.now(),{method:"GET",cache:"no-cache",headers:{Accept:"application/json"},signal:e}).then(async e=>{if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();if(!t.versionCode||!t.versionName)throw Error("Invalid update JSON format");return{success:!0,data:t}}).catch(e=>"AbortError"===e.name?{aborted:!0}:{success:!1,error:e}),[,i]=await Promise.all([F(2300),s]);if(e.aborted||O||i?.aborted)return;if(i.success)if(window.__lastUpdateJson=i.data,i.data.versionCode>z.currentVersionCode){let e=document.getElementById("update_available"),t=e.querySelector(".oui-dialog-description"),s="";i.data.changelog&&(s="Changelog:<br>"+i.data.changelog.replace(/\n/g,"<br>")),t.innerHTML=`Version ${i.data.versionName} is available!<br>
          Current version: ${z.currentVersionName}
          <br><br>${s}<br><br>
          Press on "Install now" to install the update.`,o=e}else o=document.getElementById("update_uptodate");else o=document.getElementById("update_connectionerror");if(e.aborted||O)return;switchDialog(t,o,{mask:!0,maskType:"default"})}catch(o){if(o?.name==="AbortError"||O)return;let e=document.getElementById("update_connectionerror");t.classList.contains("show")?switchDialog(t,e,{mask:!0,maskType:"default"}):openDialog(e)}finally{z.isChecking=!1,G=null}}async function j(){try{let e=await guru.getAppInfo(),t=JSON.parse(e);if(!t.success)return;let o=t.versionCode,s=localStorage.getItem("last_changelog_version");(!s||parseInt(s)<o)&&(localStorage.setItem("last_changelog_version",o),await F(500),openDialog(document.getElementById("whatsnew_dialog"),{mask:!0,maskType:"default"}))}catch{}}document.addEventListener("DOMContentLoaded",function(){W();let e=document.getElementById("check_update");e&&e.addEventListener("click",function(e){e.preventDefault(),z.isChecking||O||J()})}),document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".installupdate-dialog-btn");e&&e.addEventListener("click",()=>{if(!O&&(!G||!G.signal.aborted)){if(switchDialog(document.getElementById("update_available"),document.getElementById("update_install"),{mask:!0,maskType:"warn"}),"u">typeof guru)try{let e=window.__lastUpdateJson?.downloadUrl;e?(F(1700),guru.installUpdate(e)):(closeDialog(),openDialog(document.getElementById("update_installerror")))}catch(e){closeDialog(),openDialog(document.getElementById("update_installerror"))}}})}),async function(){try{execSafe("rm -f /data/adb/modules/battery-guru-optimizer-9810/boot-completed.sh"),B(),guru.hideSplash(),P(),await F(200),R("Checking Root Access..."),M.dialog.style.cssText+="opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0);",M.loader.classList.add("active"),M.body.classList.add("no-scroll"),await F(2100);let e=await guru.isRoot();if(!JSON.parse(e).hasRoot){M.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",M.loader.classList.remove("active"),M.body.classList.remove("no-scroll"),C=!1,A=!1,await F(300),openDialog(document.getElementById("root_warn"),{mask:!1});return}R("Checking Device Support..."),A=!0;let t=await guru.getDeviceInfo(),o=JSON.parse(t).model||"";for(let e=0;e<5;e++){if(O)return;await F(300)}if(O)return;if(!["SM-G960F","SM-G960N","SM-G965F","SM-G965N","SM-N960F","SM-N960N","SM-N770F"].includes(o)){M.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",M.loader.classList.remove("active"),M.body.classList.remove("no-scroll"),C=!1,A=!1,await F(300),openDialog(document.getElementById("device_warn"),{mask:!1});return}if(R("Checking Settings..."),O||(await F(300),O)||(await applySettings(),O)||(await F(300),O))return;"function"==typeof enableToggleHaptics&&enableToggleHaptics(),"function"==typeof enableSliderHaptics&&enableSliderHaptics(),await F(100),C&&(await N(),await j())}catch{P(),await F(300),R("ERROR!"),M.dialog.style.cssText+="opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0);",M.loader.classList.add("active"),M.body.classList.add("no-scroll"),await F(700),N()}}();