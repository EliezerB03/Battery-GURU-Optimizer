window.execSafe=function(e){try{let t=guru.exec(e);return t?.then?t.catch(()=>""):Promise.resolve(t||"")}catch{return Promise.resolve("")}};let e={queue:[],busy:!1};window.execQueue=function(t){e.queue.push(t),function t(){e.busy||0===e.queue.length||(e.busy=!0,execSafe(e.queue.shift()).finally(()=>{e.busy=!1,t()}))}()};let t=(e,t)=>{let o;return(...s)=>{clearTimeout(o),o=setTimeout(()=>e(...s),t)}},o=(e,t)=>{let o;return(...s)=>{o||(e(...s),o=!0,setTimeout(()=>o=!1,t))}};window.sleep=e=>new Promise(t=>setTimeout(t,e));let s={sections:null,links:null,container:null,topFade:null,bottomFade:null,nav:null,init(){this.sections=document.querySelectorAll(".tab-section"),this.links=document.querySelectorAll(".oui-tab-link"),this.container=document.querySelector(".container"),this.topFade=document.querySelector(".top-fade"),this.bottomFade=document.querySelector(".bottom-fade"),this.nav=document.querySelector(".oui-tab")}};window.showTab=function(e,t){t.classList.contains("oui-tab-link-active")||requestAnimationFrame(()=>{s.sections.forEach(e=>e.classList.remove("active"));let o=document.getElementById(e);o&&o.classList.add("active"),initSliders(),s.links.forEach(e=>{let o=e===t;e.classList.toggle("oui-tab-link-active",o);let s=e.querySelector(".outline"),i=e.querySelector(".filled"),r=e.querySelector(".oui-tab-text"),n=e.querySelector(".oui-tab-text-active");s&&i&&r&&n&&(r.style.display=o?"none":"block",n.style.display=o?"block":"none",s.style.display=o?"none":"inline-block",i.style.display=o?"inline-block":"none")}),s.container&&(s.container.scrollTop=0)})};let i={toggle:null,sections:null},r={toggle:null,bubble:null,text:null,sections:null},n={toggle:null,bubble:null,text:null,sections:null};function c(){let{toggle:e,sections:t}=i;if(!e)return;let o=e.checked;t.forEach(e=>e.classList.toggle("disabled",!o))}function a(){let{toggle:e,bubble:t,text:o,sections:s}=r;if(!e)return;let i=e.checked;requestAnimationFrame(()=>{o.textContent=i?"ON":"OFF",o.style.color=i?"var(--accent)":"var(--text)",t.style.transition||(t.style.transition="background 0.25s ease"),t.style.background=i?"var(--toggle-master-background)":"",s.forEach(e=>{e.classList.toggle("disabled",!i),i||(e.style.pointerEvents="none",e.querySelectorAll(":active").forEach(e=>e.blur()),requestAnimationFrame(()=>{e.style.pointerEvents=""}))})})}function l(){let{toggle:e,bubble:t,text:o,sections:s}=n;if(!e)return;let i=e.checked;requestAnimationFrame(()=>{o.textContent=i?"ON":"OFF",o.style.color=i?"var(--accent)":"var(--text)",t.style.transition||(t.style.transition="background 0.25s ease"),t.style.background=i?"var(--toggle-master-background)":"",s.forEach(e=>{e.classList.toggle("disabled",!i),i||(e.style.pointerEvents="none",e.querySelectorAll(":active").forEach(e=>e.blur()),requestAnimationFrame(()=>{e.style.pointerEvents=""}))})})}let d={rafId:null,setFade(e){let t=e?"1":"0";s.topFade.style.opacity=t,s.bottomFade.style.opacity=t},isScrollable:e=>e&&e.scrollHeight>e.clientHeight+1,findScrollableForSection(e){if(!e)return null;let t=e;for(;t&&t!==document.body&&(t=t.parentElement);){if(t.classList?.contains("container"))return t;let e=getComputedStyle(t);if(/(auto|scroll)/.test(e.overflowY))return t}let o=getComputedStyle(e);return/(auto|scroll)/.test(o.overflowY)?e:s.container||document.scrollingElement||document.documentElement},update(){this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{let e=document.querySelector("section.active");if(!e||e.hasAttribute("data-fade")&&"false"===e.getAttribute("data-fade"))return void this.setFade(!1);let t=this.findScrollableForSection(e);this.setFade(!!(t&&this.isScrollable(t)))})}};document.addEventListener("DOMContentLoaded",()=>{if(s.init(),[{cache:i,id:"batteryprotect_opt",selector:"#general .options",callback:c},{cache:r,id:"frq_on",bubbleId:"frq_toggle_master",textId:"frq_text",selector:"#freq .options",callback:a},{cache:n,id:"volt_on",bubbleId:"volt_toggle_master",textId:"volt_text",selector:"#voltage .options",callback:l}].forEach(e=>{let t=document.getElementById(e.id);t&&(e.cache.toggle=t,e.cache.sections=document.querySelectorAll(e.selector),e.bubbleId&&(e.cache.bubble=document.getElementById(e.bubbleId),e.cache.text=document.getElementById(e.textId)),t.addEventListener("change",e.callback),e.callback())}),s.topFade&&s.bottomFade){s.topFade.style.cssText="transition: opacity 200ms ease; opacity: 0",s.bottomFade.style.cssText="transition: opacity 200ms ease; opacity: 0",d.update();let e=showTab;showTab=function(t,o){e(t,o),setTimeout(()=>d.update(),40)};let i=new MutationObserver(o(()=>d.update(),100));document.querySelectorAll("section").forEach(e=>i.observe(e,{attributes:!0,attributeFilter:["class"]}));let r=new ResizeObserver(o(()=>d.update(),150));r.observe(document.documentElement),document.querySelectorAll(".container, section").forEach(e=>r.observe(e));let n=new MutationObserver(t(()=>d.update(),100));document.querySelectorAll(".container").forEach(e=>n.observe(e,{childList:!0,subtree:!0})),window.addEventListener("resize",t(()=>d.update(),150))}initSliders()}),function(){let e=s.container||document.querySelector(".container");if(!e)return;let t=e.querySelector(".container-scrollbar"),i=t?.querySelector(".container-scrollbar-thumb");if(!t||!i)return;let r,n=null;function c(){n=null;let o=e.scrollHeight,s=e.clientHeight;if(o<=s+1){t.style.display="none";return}t.style.display="block";let r=t.clientHeight,c=Math.max(s/o*r,24),a=r-c,l=Math.min(a,Math.max(0,e.scrollTop/(o-s||1)*a));i.style.height=c+"px",i.style.transform=`translateY(${l}px)`}function a(){n||(n=requestAnimationFrame(c))}let l=o(()=>{e.classList.add("show-scrollbar"),clearTimeout(r),r=setTimeout(()=>e.classList.remove("show-scrollbar"),1500)},50);e.addEventListener("scroll",()=>{a(),l()},{passive:!0}),window.addEventListener("resize",()=>a());let d=window.showTab;d&&(window.showTab=function(t,o){d(t,o),requestAnimationFrame(()=>{a(),e.classList.remove("show-scrollbar")})}),requestAnimationFrame(c)}();let u=document.querySelector(".container"),p=document.querySelectorAll(".tab-section"),m=new Map;p.forEach(e=>{let t=e.querySelector(".oui-viewing"),o=e.querySelector(".oui-header"),s=e.querySelector(".info-header");t&&o&&m.set(e,{viewing:t,header:o,infoviewing:s,compact:!1,infoCompact:!1})});let _=null,v=null;function y(e=!1){m.forEach(t=>{let{viewing:o,header:s,infoviewing:i}=t,r=o.getBoundingClientRect(),n=Math.max(0,Math.min(-r.top/r.height,1)),c=n>1e-4,a=n>.6;(e||t.compact!==c)&&(t.compact=c,s.classList.toggle("header-compact",c),o.classList.toggle("header-compact",c)),(e||t.infoCompact!==a)&&(t.infoCompact=a,s.classList.toggle("header-compact-infobtn",a),i?.classList.toggle("header-compact-infobtn",a))})}function h(e={}){let{effectClass:t="toggle-effect",roundedLogic:o=null,deltaThreshold:s=8,useDeltaY:i=!0,cooldown:r=300,onClickHandler:n=null}=e;return function(e){let c={pointerDown:!1,pointerInside:!1,cancelled:!1,moved:!1,animationTimeout:null,inactivityTimeout:null,startPos:0,lastActionTime:0},a=e.querySelector(".oui-inner")||e.closest(".oui-button, .oui-button-active, .oui-tab-inner")||e,l=()=>{clearTimeout(c.animationTimeout),clearTimeout(c.inactivityTimeout);let o=e.querySelector(`.${t}`);o&&(o.classList.remove("animate-in"),o.classList.add("animate-out"),a.classList.remove("pressed-effect"),a.classList.add("released-effect"),c.animationTimeout=setTimeout(()=>{a.classList.remove("released-effect"),o.remove()},550))},d=o=>{if(!c.pointerDown)return;clearTimeout(c.inactivityTimeout),c.inactivityTimeout=setTimeout(()=>{c.pointerDown&&!c.moved&&(c.cancelled=!0,l(),c.pointerInside=!1)},700);let r=Math.abs((o.touches?i?o.touches[0].clientY:o.touches[0].clientX:i?o.clientY:o.clientX)-c.startPos);if(!c.moved&&r>s){c.cancelled=!0,c.moved=!0,l(),c.pointerInside=!1,a.classList.remove("pressed-effect");return}if("button-effect"===t){let t=e.getBoundingClientRect(),s=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY;(s<t.left||s>t.right||i<t.top||i>t.bottom)&&c.pointerInside&&(c.cancelled=!0,l(),c.pointerInside=!1,a.classList.remove("pressed-effect"))}},u=()=>{if(!c.pointerDown)return;c.pointerDown=!1,document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",u);let t=Date.now();c.pointerInside&&!c.cancelled&&!c.moved&&t-c.lastActionTime>=r&&(c.lastActionTime=t,n?n(e):e.click()),l(),c.pointerInside=!1,c.cancelled=!1,c.moved=!1},p=s=>{Date.now()-c.lastActionTime<r?s.preventDefault():(c.pointerDown=!0,c.pointerInside=!0,c.cancelled=!1,c.moved=!1,c.startPos=s.touches?i?s.touches[0].clientY:s.touches[0].clientX:i?s.clientY:s.clientX,clearTimeout(c.animationTimeout),clearTimeout(c.inactivityTimeout),c.inactivityTimeout=setTimeout(()=>{c.pointerDown&&!c.moved&&(c.cancelled=!0,l(),c.pointerInside=!1)},700),a.classList.remove("released-effect"),a.classList.add("pressed-effect"),(()=>{if(c.cancelled)return;e.querySelector(`.${t}`)?.remove();let s=document.createElement("span");s.className=`${t} animate-in`,o&&o(e,s),e.appendChild(s),a.classList.add("pressed-effect")})(),document.addEventListener("pointermove",d,{passive:!0}),document.addEventListener("pointerup",u,{passive:!0}),document.addEventListener("touchmove",d,{passive:!0}),document.addEventListener("touchend",u,{passive:!0}))};e.addEventListener("click",e=>{c.pointerInside||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",p,{passive:!1}),e.addEventListener("pointerdown",p,{passive:!1})}}u.addEventListener("scroll",()=>{_||(_=requestAnimationFrame(()=>{y(!1),_=null})),clearTimeout(v),v=setTimeout(()=>y(!0),80)},{passive:!0}),y(!0),window.toggleHapticEnabled=!1,window.enableToggleHaptics=function(){toggleHapticEnabled=!0},document.querySelectorAll('.oui-container-toggle input[type="checkbox"]').forEach(e=>{e.addEventListener("change",e=>{toggleHapticEnabled&&e.isTrusted&&"u">typeof guru&&guru.hapticToggle()})});let g=h({effectClass:"toggle-effect",roundedLogic:(e,t)=>{if(null!==e.querySelector("#batteryprotect_opt"))t.classList.add("rounded-top");else{let o=[...e.parentElement.querySelectorAll(".oui-container-toggle, .oui-bubble-item, .oui-bubble-item2")],s=e===o[0],i=e===o[o.length-1];1===o.length?t.classList.add("rounded-all"):s?t.classList.add("rounded-top"):i&&t.classList.add("rounded-bottom")}},deltaThreshold:8,useDeltaY:!0,cooldown:300});document.querySelectorAll(".oui-container-toggle, .oui-bubble-item, .oui-bubble-item2").forEach(g);let f=h({effectClass:"button-effect",deltaThreshold:8,useDeltaY:!0,cooldown:300});document.querySelectorAll(".oui-button, .oui-button-active").forEach(f);let b=h({effectClass:"tab-button-effect",roundedLogic:(e,t)=>t.classList.add("rounded-all"),deltaThreshold:8,useDeltaY:!1,cooldown:300});document.querySelectorAll(".oui-tab-link").forEach(b);let w=h({effectClass:"dialog-button-effect",roundedLogic:(e,t)=>t.classList.add("rounded-all"),deltaThreshold:8,useDeltaY:!0,cooldown:0});function E(){_||(_=requestAnimationFrame(()=>{_=null;let e=window.__popupInstance,t=window.__popupPositioner,o=window.__getActiveTrigger?.();e&&t&&e.classList.contains("show")&&o&&t(o)}))}document.querySelectorAll(".oui-dialog-action-button").forEach(w),document.querySelectorAll(".oui-overlay-bubble-info, .oui-overlay-bubble-info-header").forEach(e=>{let t={pointerDown:!1,pointerInside:!1,cancelled:!1,moved:!1,animationTimeout:null,inactivityTimeout:null,startY:0,dialogOpened:!1},o=()=>{clearTimeout(t.animationTimeout),clearTimeout(t.inactivityTimeout);let o=e.querySelector(".oui-icon-info-effect");o&&(o.classList.remove("animate-in"),o.classList.add("animate-out"),e.classList.remove("pressed-effect"),e.classList.add("released-effect"),t.animationTimeout=setTimeout(()=>{e.classList.remove("released-effect"),o.remove()},550))},s=s=>{if(!t.pointerDown)return;clearTimeout(t.inactivityTimeout),t.inactivityTimeout=setTimeout(()=>{t.pointerDown&&!t.moved&&(t.cancelled=!0,o(),t.pointerInside=!1)},700);let i=Math.abs((s.touches?s.touches[0].clientY:s.clientY)-t.startY);!t.moved&&i>8&&(t.cancelled=!0,t.moved=!0,o(),t.pointerInside=!1,e.classList.remove("pressed-effect"))},i=()=>{t.pointerDown&&(t.pointerDown=!1,document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",i),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",i),!t.pointerInside||t.cancelled||t.moved||t.dialogOpened||(t.dialogOpened=!0,e.click(),setTimeout(()=>t.dialogOpened=!1,50)),o(),t.pointerInside=!1,t.cancelled=!1,t.moved=!1)},r=r=>{t.pointerDown=!0,t.pointerInside=!0,t.cancelled=!1,t.moved=!1,t.startY=r.touches?r.touches[0].clientY:r.clientY,clearTimeout(t.animationTimeout),clearTimeout(t.inactivityTimeout),t.inactivityTimeout=setTimeout(()=>{t.pointerDown&&!t.moved&&(t.cancelled=!0,o(),t.pointerInside=!1)},700),e.classList.remove("released-effect"),e.classList.add("pressed-effect"),(()=>{if(t.cancelled)return;e.querySelector(".oui-icon-info-effect")?.remove();let o=document.createElement("span");o.className="oui-icon-info-effect animate-in rounded-all",e.appendChild(o),e.classList.add("pressed-effect"),e.classList.remove("released-effect")})(),document.addEventListener("pointermove",s,{passive:!0}),document.addEventListener("pointerup",i,{passive:!0}),document.addEventListener("touchmove",s,{passive:!0}),document.addEventListener("touchend",i,{passive:!0})};e.addEventListener("click",e=>{t.pointerInside||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",r,{passive:!1}),e.addEventListener("pointerdown",r,{passive:!1})}),document.querySelector(".container").addEventListener("scroll",E,{passive:!0}),window.addEventListener("resize",E),function(){let e=null,t=document.getElementById("popup-menu");if(t&&t.parentElement!==document.body&&document.body.appendChild(t),window.__popupInstance=t,window.__popupPositioner=y,window.__getActiveTrigger=()=>e,!t)return;let o={content:t.querySelector(".popup-content"),optionsList:document.getElementById("popup-options")},s={popupOpen:!1,optionsEnabled:!0,pointerDownOutside:!1},i=0,r=document.querySelector(".container"),n=t.querySelector(".popup-scrollbar"),c=t.querySelector(".popup-scrollbar-thumb"),a=null,l=()=>{c.classList.add("show"),clearTimeout(a),a=setTimeout(d,1500)},d=()=>c.classList.remove("show");function u(){let e=o.optionsList;if(e.scrollHeight<=e.clientHeight){n.style.display="none";return}n.style.display="block";let t=e.clientHeight/e.scrollHeight,s=Math.max(18,e.clientHeight*t),i=e.scrollTop/(e.scrollHeight-e.clientHeight),r=n.clientHeight-s;c.style.height=s+"px",c.style.top=r*i+"px"}o.optionsList.addEventListener("scroll",()=>{u(),_(),l()}),window.addEventListener("resize",u);let p=t.querySelector(".popup-fade-top"),m=t.querySelector(".popup-fade-bottom");function _(){let e=o.optionsList;if(!(e.scrollHeight>e.clientHeight+1)){p.classList.remove("show"),m.classList.remove("show");return}let t=e.scrollTop<=3,s=e.scrollTop+e.clientHeight>=e.scrollHeight-2;p.classList.toggle("show",!t),m.classList.toggle("show",!s)}function v(){t.classList.remove("show"),s.popupOpen=!1,s.optionsEnabled=!0,e=null,r&&(r.style.overflow="auto",r.scrollTop=i),document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),c.classList.remove("show"),clearTimeout(a)}function y(e){let o,s=e.getBoundingClientRect(),i=t.offsetHeight,r=t.offsetWidth,n=window.innerHeight,c=window.innerWidth,a=.025*c,l=s.right+8;l+r>c-a&&(l=c-r-a);let d=n-s.bottom,u=s.top;d>=i?(o=s.top)+i>n-.15*n&&u>=i&&(o=s.bottom-i):u>=i?(o=s.bottom-i)<.2*n&&d>=i&&(o=s.top):o=d>u?s.top:s.bottom-i,t.style.top=o+"px",t.style.left=l+"px"}function h(e,i,r,n){o.optionsList.innerHTML="",e.forEach((c,a)=>{let l,d,u,p,m,_=document.createElement("li");_.className="oui-bubble-item";let v="";if(1===e.length?v="rounded-all":0===a?v="rounded-top":a===e.length-1&&(v="rounded-bottom"),_.innerHTML=`
        <div class="popup-inner">
          <span class="popup-text">${c}</span>
        </div>
        <span class="popup-effect ${v}"></span>
      `,c===i){_.classList.add("selected");let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("class","popup-icon-selected checkmark"),e.innerHTML='<path style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:3" d="m5 12 5 5 9-9"/>',_.querySelector(".popup-inner").appendChild(e)}let y=_.querySelector(".popup-inner"),h=_.querySelector(".popup-effect");l={down:!1,inside:!1,cancelled:!1,moved:!1,animTimeout:null,inactTimeout:null,startY:0,lastTime:0},d=()=>{clearTimeout(l.animTimeout),clearTimeout(l.inactTimeout),h.classList.contains("animate-in")&&(h.classList.remove("animate-in"),h.classList.add("animate-out"),y.classList.remove("pressed-effect"),y.classList.add("released-effect"),l.animTimeout=setTimeout(()=>{h.classList.remove("animate-out"),y.classList.remove("released-effect")},550))},u=e=>{if(!l.down)return;clearTimeout(l.inactTimeout),l.inactTimeout=setTimeout(()=>{l.down&&!l.moved&&(l.cancelled=!0,d(),l.inside=!1)},700);let t=Math.abs((e.touches?e.touches[0].clientY:e.clientY)-l.startY);if(!l.moved&&t>8){l.cancelled=!0,l.moved=!0,d(),l.inside=!1,y.classList.remove("pressed-effect");return}let o=_.getBoundingClientRect(),s=e.touches?e.touches[0].clientX:e.clientX,i=e.touches?e.touches[0].clientY:e.clientY;(s<o.left||s>o.right||i<o.top||i>o.bottom)&&l.inside&&(l.cancelled=!0,d(),l.inside=!1,y.classList.remove("pressed-effect"))},p=()=>{if(!l.down)return;l.down=!1,document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",p),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",p);let e=Date.now();l.inside&&!l.cancelled&&!l.moved&&e-l.lastTime>=200&&(l.lastTime=e,s.optionsEnabled&&n&&(t.classList.remove("show"),s.popupOpen=!1,s.optionsEnabled=!0,document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),n(c,r))),d(),l.inside=!1,l.cancelled=!1,l.moved=!1},m=e=>{if(!s.optionsEnabled){e.preventDefault(),e.stopPropagation();return}Date.now()-l.lastTime<200?e.preventDefault():(l.down=!0,l.inside=!0,l.cancelled=!1,l.moved=!1,l.startY=e.touches?e.touches[0].clientY:e.clientY,clearTimeout(l.animTimeout),clearTimeout(l.inactTimeout),l.inactTimeout=setTimeout(()=>{l.down&&!l.moved&&(l.cancelled=!0,d(),l.inside=!1)},700),y.classList.remove("released-effect"),l.cancelled||(h.classList.remove("animate-out"),h.classList.add("animate-in"),y.classList.add("pressed-effect"),y.classList.remove("released-effect")),document.addEventListener("pointermove",u,{passive:!0}),document.addEventListener("pointerup",p,{passive:!0}),document.addEventListener("touchmove",u,{passive:!0}),document.addEventListener("touchend",p,{passive:!0}))},_.addEventListener("click",e=>{l.inside||(e.preventDefault(),e.stopPropagation())},!0),_.addEventListener("touchstart",m,{passive:!1}),_.addEventListener("pointerdown",m,{passive:!1}),o.optionsList.appendChild(_)}),requestAnimationFrame(()=>{!function(){let e=o.optionsList.children;if(!e.length)return;let t=e[0].offsetHeight;e.length>4.55?(o.optionsList.style.maxHeight=4.55*t+"px",o.optionsList.style.overflowY="scroll"):(o.optionsList.style.maxHeight="none",o.optionsList.style.overflowY="hidden")}(),u(),_()})}document.addEventListener("pointerdown",e=>{s.pointerDownOutside=!t.contains(e.target)},!0),document.addEventListener("pointerup",e=>{s.popupOpen&&s.pointerDownOutside&&!t.contains(e.target)&&(v(),e.preventDefault(),e.stopPropagation())},!0),["click","pointerdown","pointerup","touchstart","touchend"].forEach(e=>{document.addEventListener(e,e=>{s.popupOpen&&!t.contains(e.target)&&(e.preventDefault(),e.stopPropagation())},{capture:!0,passive:!1})});window.initPopup={openPopup:function(n,c){e=n;let a=JSON.parse(n.dataset.options),d=n.dataset.selected;t.classList.contains("show")?(y(n),o.content.classList.add("switching"),setTimeout(()=>{h(a,d,n,c),o.optionsList.scrollTop=0,u(),_(),o.content.classList.remove("switching")},150)):(h(a,d,n,c),requestAnimationFrame(()=>{o.optionsList.scrollTop=0,t.classList.add("show"),s.popupOpen=!0,r&&(i=r.scrollTop,r.style.overflow="hidden"),requestAnimationFrame(()=>{y(n),u(),function(){let t=o.optionsList,s=e?.dataset?.selected;if(!s){t.scrollTop=0,u();return}let i=t.querySelectorAll("li"),r=null;if(i.forEach(e=>{e.textContent.trim()===s.trim()&&(r=e)}),!r){t.scrollTop=0,u();return}let n=r.offsetTop,c=r.offsetHeight,a=t.clientHeight;t.scrollTop=Math.max(0,n-a/3.169+c/2),u(),_(),l()}(),_(),l()})}))},closePopup:v,disableOptionsTemporarily:(e=300)=>{s.optionsEnabled=!1,setTimeout(()=>s.optionsEnabled=!0,e)}}}(),window.initSliders=function(){let e,t,o=["volt_big","volt_little","volt_gpu","volt_mif","volt_audio","volt_camera","volt_cp","volt_display","volt_fsys","volt_int","volt_intcamera","volt_iva","volt_score"],s=["batt_level"],i=new Map,r=new Map,n=new Map,c=null,a=new Map;function l(e){if(!a.has(e)){let t=document.getElementById(e);if(!t)return null;a.set(e,{slider:t,parent:t.parentElement,dotsContainer:t.nextElementSibling,valuesContainer:t.parentElement.querySelector(".slider-values, .batt-slider-values")})}return a.get(e)}function d(e){e.forEach(e=>{let t=l(e);if(!t?.slider||!t.dotsContainer)return;let o=t.slider.max-t.slider.min,s=t.slider.offsetWidth-15,i=document.createDocumentFragment();for(let e=0;e<=o;e++){let t=document.createElement("span");t.style.left=`${7.5+e/o*s+2}px`,i.appendChild(t)}t.dotsContainer.innerHTML="",t.dotsContainer.appendChild(i)})}function u(e){let t=l(e);if(!t?.slider||!t.valuesContainer)return;let o=t.slider.offsetWidth-15,s=t.valuesContainer.querySelectorAll("span");if(3!==s.length)return;let i=[7.5,7.5+.5*o+1,7.5+o];s.forEach((e,t)=>{e.style.cssText=`position: absolute; top: 0; transform: translateX(-50%); left: ${i[t]}px`})}let p=(e,t)=>{let o=e.get(t);o&&(clearTimeout(o),e.delete(t))},m=(e,t,o,s)=>{p(e,t),e.set(t,setTimeout(o,s))};function _(e,t=!1){let o=t?"batt-slider-value-float":"slider-value-float",s=l(e.id),i=s.parent.querySelector(`.${o}`);i||((i=document.createElement("div")).className=o,i.innerHTML=`<span class="${t?"slider-bat-value-text":"slider-value-text"}"></span>`,s.parent.appendChild(i));let r=i.firstElementChild,n=e.valueAsNumber;r.textContent=t?`${80+n}%`:0===n?"0":`-${n}`;let c=e.offsetWidth-15,a=(n-e.min)/(e.max-e.min);i.style.left=`${7.5+c*a}px`}function v(e,t,o=!1){let s=l(e.id).parent.querySelector(`.${o?"batt-slider-value-float":"slider-value-float"}`);s?.classList.toggle("visible",t)}function y(e,t=null){c||(c=document.querySelectorAll("button, .oui-container-toggle, .popup-trigger, .oui-tab-link, .oui-overlay-bubble-info"));let i=e?"":"none";c.forEach(e=>e.style.pointerEvents=i),[...o,...s].forEach(e=>{let o=l(e);o?.slider&&o.slider!==t&&(o.slider.style.pointerEvents=i)})}function h(e,t=!1){let n=t?e=>p(r,e):e=>p(i,e),c=t?(e,t,o)=>m(r,e,t,o):(e,t,o)=>m(i,e,t,o);e.forEach(e=>{let o=l(e);if(!o?.slider)return;let s=o.slider;_(s,t);let i=()=>{n(e),y(!1,s),_(s,t),v(s,!0,t)};s.addEventListener("touchstart",i,{passive:!0}),s.addEventListener("touchend",()=>{y(!0),c(e,()=>v(s,!1,t),270)},{passive:!0}),s.addEventListener("input",()=>_(s,t),{passive:!0}),s.addEventListener("mousedown",i,{passive:!0})}),window._sliderGlobalListenersAdded||(window.addEventListener("mouseup",()=>{y(!0),[...o,...s].forEach(e=>{let t=l(e);if(t?.slider){let o=s.includes(e);(o?(e,t,o)=>m(r,e,t,o):(e,t,o)=>m(i,e,t,o))(e,()=>v(t.slider,!1,o),270)}})},{passive:!0}),window._sliderGlobalListenersAdded=!0)}function g(e,t=!1){let o=t?e=>p(r,e):e=>p(i,e),s=t?(e,t,o)=>m(r,e,t,o):(e,t,o)=>m(i,e,t,o);e.forEach(e=>{let i=l(e);if(!i?.slider)return;let r=i.slider,c={down:!1,startX:0,startValue:0,moved:!1,initialValue:0,shouldFire:!1,rafId:null,lastVibrateValue:null,hasDragged:!1};r.addEventListener("pointerdown",s=>{let i=Date.now();if(i-(n.get(e)||0)<100)return void s.preventDefault();n.set(e,i),o(e),c.down=!0,c.moved=!1,c.hasDragged=!1,c.shouldFire=!1,c.initialValue=r.valueAsNumber,c.lastVibrateValue=r.valueAsNumber;let a=r.getBoundingClientRect(),l=s.clientX-a.left,d=Number(r.min)||0,u=Number(r.max)||100,p=u-d,m=d+l/a.width*p;r.value=Math.round(Math.min(u,Math.max(d,m))),_(r,t),r.valueAsNumber!==c.initialValue&&(c.shouldFire=!0,window.sliderHapticEnabled&&"u">typeof guru&&guru.hapticSlider(),c.lastVibrateValue=r.valueAsNumber),c.startX=s.clientX,c.startValue=r.valueAsNumber,r.setPointerCapture(s.pointerId),v(r,!0,t),r.classList.add("active-thumb"),s.preventDefault()},{passive:!1}),r.addEventListener("pointermove",e=>{if(!c.down)return;e.preventDefault();let o=e.clientX-c.startX;Math.abs(o)>5&&(c.moved=!0,c.hasDragged=!0),c.rafId&&cancelAnimationFrame(c.rafId),c.rafId=requestAnimationFrame(()=>{let e=r.clientWidth,s=Number(r.min)||0,i=Number(r.max)||100,n=c.startValue+o/e*(i-s),a=Math.round(n=Math.min(i,Math.max(s,n)));r.value=a,_(r,t),window.sliderHapticEnabled&&c.hasDragged&&a!==c.lastVibrateValue&&"u">typeof guru&&(guru.hapticSlider(),c.lastVibrateValue=a),c.shouldFire=!0})},{passive:!1}),r.addEventListener("pointerup",o=>{c.down&&(c.down=!1,c.rafId&&(cancelAnimationFrame(c.rafId),c.rafId=null),r.releasePointerCapture(o.pointerId),c.shouldFire&&r.valueAsNumber!==c.initialValue&&r.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),s(e,()=>v(r,!1,t),280),r.classList.remove("active-thumb"))},{passive:!1}),r.addEventListener("pointercancel",o=>{c.down=!1,c.rafId&&(cancelAnimationFrame(c.rafId),c.rafId=null),r.releasePointerCapture(o.pointerId),s(e,()=>v(r,!1,t),280),r.classList.remove("active-thumb")})})}d([...o,...s]),[...o,...s].forEach(e=>u(e)),h(o,!1),h(s,!0),g(o,!1),g(s,!0),window.addEventListener("resize",()=>{t&&cancelAnimationFrame(t),clearTimeout(e),t=requestAnimationFrame(()=>{[...o,...s].forEach(e=>{let t=l(e);t?.slider&&_(t.slider,s.includes(e))})}),e=setTimeout(()=>{d([...o,...s]),[...o,...s].forEach(e=>u(e))},150)},{passive:!0})},window.sliderHapticEnabled=!1,window.enableSliderHaptics=function(){sliderHapticEnabled=!0},document.addEventListener("DOMContentLoaded",()=>{let e=(e,t)=>{let o;return(...s)=>{o||(e(...s),o=!0,setTimeout(()=>o=!1,t))}},t={mask:document.querySelector(".oui-dialog-mask"),body:document.body,doc:document.documentElement,buttons:null,dialogs:document.querySelectorAll(".oui-dialog")},o=null,s=!1,i=0,r=new WeakMap,n=new WeakMap,c=e=>{let t=e.target;for(;t;){let e=window.getComputedStyle(t);if("auto"===e.overflowY||"scroll"===e.overflowY||t.classList?.contains("oui-dialog-description"))return;if(t=t.parentElement,t?.classList?.contains("oui-dialog"))break}e.preventDefault()},a=e=>i=e.touches[0].clientY,l=e=>{if(!o)return;let t=e.target,s=!1;for(;t&&t!==o;){let e=window.getComputedStyle(t);if(("auto"===e.overflowY||"scroll"===e.overflowY)&&t.scrollHeight>t.clientHeight){s=!0;break}t=t.parentElement}if(s)return;let{scrollTop:r,scrollHeight:n,offsetHeight:c}=o,a=e.touches[0].clientY,l=a>i,d=a<i;(0===r&&l||r+c>=n&&d)&&e.preventDefault(),i=a},d=e=>{s=!e,requestAnimationFrame(()=>{t.buttons||(t.buttons=document.querySelectorAll(".oui-dialog-action-button, .close-dialog-btn, .reset-dialog-btn")),t.buttons.forEach(t=>t.style.pointerEvents=e?"":"none"),e?(t.body.style.removeProperty("pointer-events"),t.body.style.removeProperty("user-select"),t.doc.style.removeProperty("pointer-events"),t.doc.style.removeProperty("user-select")):(t.body.style.pointerEvents="none",t.body.style.userSelect="none",t.doc.style.pointerEvents="none",t.doc.style.userSelect="none")})},u=e=>{let t=document.getElementById("resetting_app_dialog");if(s||t?.classList.contains("show"))return e.preventDefault(),e.stopPropagation(),!1;m()},p=(e,s={mask:!0,maskType:"default"})=>{d(!1),e.querySelectorAll('.oui-dialog-description, [style*="overflow-y: auto"], [style*="overflow-y: scroll"]').forEach(e=>e.scrollTop=0),e.classList.add("show"),s.mask&&("warn"!==s.maskType&&t.mask.addEventListener("click",u,{passive:!1}),t.mask.classList.add("show")),o=e,t.body.classList.add("no-scroll");let i=f(e);i?.reset(),i?.show(),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchstart",a,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1}),setTimeout(()=>d(!0),275)},m=()=>{if(!o)return;d(!1),o.classList.remove("show"),o.classList.add("hide"),t.mask.classList.contains("show")&&(t.mask.classList.remove("show"),t.mask.removeEventListener("click",u)),t.body.classList.remove("no-scroll"),document.removeEventListener("touchmove",c),document.removeEventListener("touchstart",a),document.removeEventListener("touchmove",l);let e=t=>{t.target===o&&o.classList.contains("hide")&&(o.removeEventListener("transitionend",e),setTimeout(()=>{o.classList.remove("hide"),o=null,d(!0)},5))};o.addEventListener("transitionend",e)};window.openDialog=p,window.closeDialog=m,window.switchDialog=(e,s,i={mask:!0,maskType:"default"})=>{if(!e||!s)return;d(!1),t.mask.removeEventListener("click",u),e.classList.remove("show"),e.classList.add("hide"),s.classList.remove("show","hide"),s.querySelectorAll('.oui-dialog-description, [style*="overflow-y: auto"], [style*="overflow-y: scroll"]').forEach(e=>e.scrollTop=0);let r=n=>{if(n.target===e&&e.classList.contains("hide")){e.removeEventListener("transitionend",r),e.classList.remove("hide"),s.classList.add("show"),o=s,"warn"!==i.maskType&&t.mask.addEventListener("click",u,{passive:!1});let n=f(s);n?.reset(),n?.show(),setTimeout(()=>d(!0),275)}};e.addEventListener("transitionend",r)};let _=(t,o)=>{let s=r.get(t)||(t=>{if(!t)return null;if(r.has(t))return r.get(t);let o=t.querySelector(".oui-dialog-description");if(!o)return null;let s=t.querySelector(".dialog-top-fade"),i=t.querySelector(".dialog-bottom-fade");s||((s=document.createElement("div")).className="dialog-top-fade",s.style.opacity="0",t.appendChild(s)),i||((i=document.createElement("div")).className="dialog-bottom-fade",i.style.opacity="0",t.appendChild(i));let n=e(()=>{requestAnimationFrame(()=>{let e=o.getBoundingClientRect(),r=t.getBoundingClientRect();s.style.top=`${e.top-r.top}px`,i.style.bottom=`${r.bottom-e.bottom}px`})},100);if(n(),"ResizeObserver"in window){let e=new ResizeObserver(n);e.observe(o),e.observe(t)}let c={desc:o,top:s,bottom:i};return r.set(t,c),c})(t);if(!s)return;let i=o?"1":"0";s.top.style.opacity=i,s.bottom.style.opacity=i},v=null,y=()=>{v&&cancelAnimationFrame(v),v=requestAnimationFrame(()=>{let e=document.querySelector(".oui-dialog.show");if(!e)return _(e,!1);let t=e.querySelector(".oui-dialog-description")||e;_(e,t?.scrollHeight>t?.clientHeight+1)})};document.querySelectorAll("[data-dialog-target]").forEach(e=>{e.addEventListener("click",t=>{if(s)return t.preventDefault(),t.stopPropagation(),!1;let o=e.getAttribute("data-dialog-target"),i=document.getElementById(o),r=e.querySelector('input[type="checkbox"].toggle');i?.querySelector(".oui-loading")&&window.resetLoadingAnimation&&window.resetLoadingAnimation(i.querySelector(".oui-loading")),r?setTimeout(()=>r.checked&&i&&p(i),0):i&&p(i)})}),document.querySelectorAll(".close-dialog-btn").forEach(e=>{e.addEventListener("click",e=>{if(s)return e.preventDefault(),e.stopPropagation(),!1;m()})}),y();let h=new MutationObserver(e(y,100));if(t.dialogs.forEach(e=>h.observe(e,{attributes:!0,attributeFilter:["class"]})),"ResizeObserver"in window){let o=new ResizeObserver(e(y,150));o.observe(t.doc),document.querySelectorAll(".oui-dialog, .oui-dialog-description").forEach(e=>o.observe(e))}let g=new MutationObserver(e(y,100));document.querySelectorAll(".oui-dialog .oui-dialog-description").forEach(e=>g.observe(e,{childList:!0,subtree:!0})),window.addEventListener("resize",e(y,150));let f=e=>{if(!e)return null;if(n.has(e))return n.get(e);let t=e.querySelector(".oui-dialog-description"),o=e.querySelector(".dialog-scrollbar"),s=e.querySelector(".dialog-scrollbar-thumb");if(!t||!o||!s)return null;let i=null,r=!1,c=()=>{r=!1;let e=t.scrollHeight,i=t.clientHeight;if(e<=i+1)return void o.classList.remove("show");let n=t.scrollTop,c=o.clientHeight,a=Math.max(i/e*c,24);s.style.height=a+"px",s.style.transform=`translateY(${n/(e-i)*(c-a)}px)`},a=()=>{r||(r=!0,requestAnimationFrame(c))};if(t.addEventListener("scroll",()=>{a(),o.classList.add("show"),clearTimeout(i),i=setTimeout(()=>o.classList.remove("show"),1500)},{passive:!0}),"ResizeObserver"in window){let o=new ResizeObserver(()=>a());o.observe(t),o.observe(e)}let l={reset(){t.scrollTop=0,o.classList.remove("show"),a()},show(){o.classList.add("show"),clearTimeout(i),i=setTimeout(()=>o.classList.remove("show"),1500)}};return n.set(e,l),a(),l}}),document.addEventListener("DOMContentLoaded",()=>{let e="/data/data/com.guru.batteryoptimizer/guru.sh",t=`# BATTERY GURU OPTIMIZER (ALL SETTINGS)
# Developed by @EliezerB03

#!/system/bin/sh

# ============== ALL OPTIMIZATIONS  ============== #

#---------------< BATTERY OPTIMIZATIONS ON APPS >---------------#
# forceappsbattopt_on=1
settings put global forced_app_standby_enabled 1

#---------------< CPU HOTPLUG OPTIMIZATIONS >---------------#
# hotplugset_on=1
echo '0' > /sys/power/cpuhotplug/governor/user_mode
echo '0' > /sys/power/cpuhotplug/governor/enabled

#---------------< CPU POWER EFFICIENT >---------------#
# powereffiset_on=1
echo 'Y' > /sys/module/workqueue/parameters/power_efficient

#---------------< THERMAL OPTIMIZATIONS >---------------#
# thermalset_on=1
system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0
chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms
echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres
echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres
chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus
pm disable com.google.android.gms/.chimera.GmsIntentOperationService

#---------------< GPU BOOST >---------------#
# gpuboost_on=0
echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor

#---------------< SWAP OPTIMIZATIONS >---------------#
# swapset_on=1
echo '10' > /proc/sys/vm/dirty_ratio
echo '3' > /proc/sys/vm/dirty_background_ratio
echo '2500' > /proc/sys/vm/dirty_expire_centisecs
echo '1250' > /proc/sys/vm/dirty_writeback_centisecs
echo '2' > /proc/sys/vm/laptop_mode
echo '70' > /proc/sys/vm/swappiness

#---------------< STORAGE OPTIMIZATIONS >---------------#
# storageset_on=1
echo '1' > /sys/block/sda/queue/rotational
echo '1' > /sys/block/sda/queue/add_random
echo '2' > /sys/block/sda/queue/rq_affinity

#---------------< BATTERY PROTECTION >---------------#
# batteryprotect_on=0
# battery_litmit=90%
echo '100' > /sys/class/power_supply/battery/batt_full_capacity

#---------------< FREQS SETTINGS >---------------#
# frqset_on=1
# lit=1690 Mhz
echo '1690000' > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq
# big=1690 Mhz
echo '1690000' > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq

#---------------< VOLTAGE SETTINGS >---------------#
# voltset_on=1
# big_volt=-4
echo '-4' > /sys/power/percent_margin/big_margin_percent
# lit_volt=-4
echo '-4' > /sys/power/percent_margin/lit_margin_percent
# g3d_volt=-4
echo '-4' > /sys/power/percent_margin/g3d_margin_percent
# mif_volt=-4
echo '-4' > /sys/power/percent_margin/mif_margin_percent
# aud_volt=-4
echo '-4' > /sys/power/percent_margin/aud_margin_percent
# cam_volt=-4
echo '-4' > /sys/power/percent_margin/cam_margin_percent
# cp_volt=0
echo '0' > /sys/power/percent_margin/cp_margin_percent
# disp_volt=-4
echo '-4' > /sys/power/percent_margin/disp_margin_percent
# fsys0_volt=-4
echo '-4' > /sys/power/percent_margin/fsys0_margin_percent
# int_volt=-4
echo '-4' > /sys/power/percent_margin/int_margin_percent
# intcam_volt=-4
echo '-4' > /sys/power/percent_margin/intcam_margin_percent
# iva_volt=-4
echo '-4' > /sys/power/percent_margin/iva_margin_percent
# score_volt=-4
echo '-4' > /sys/power/percent_margin/score_margin_percent

#---------------< LIMIT BACKGROUND APP PROCESS (LABS) >---------------#
# limitprocess_on=0
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi

#---------------< FORCE DOZE (LABS) >---------------#
# forcedoze_on=0
dumpsys deviceidle unforce

# ======================================`;execSafe(`if [ ! -f ${e} ]; then cat > ${e} << 'EOF'
${t}
EOF
fi`);let o=(t,o)=>`sed -i "s|echo ['\\"][^'\\"]*['\\"] > ${t}|echo '${o}' > ${t}|g" ${e}; `,s=e=>setTimeout(e,0),i=(t,o)=>{let s=`${e}.${t}_block.tmp`,i=`${e}.tmp`;return`cat > ${s} <<'EOB'
${o}
EOB
awk -v blk='${s}' -v marker='^# ${t}=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; mv ${i} ${e}; rm -f ${s}; `};function r({id:t,paths:r,probePath:n,marker:c,defaultState:a=!0}){let l=document.getElementById(t);if(!l)return;let d=l.closest(".oui-container-toggle");d&&d.classList.add("no-animation");let u=n&&r[n]?n:Object.keys(r)[0],{active:p,inactive:m}=r[u],_=`toggle_state_${t}`,v=localStorage.getItem(_),y=null!==v?"1"===v:a;l.checked=!!y,d&&requestAnimationFrame(()=>d.classList.remove("no-animation")),s(()=>{try{c?execSafe(`grep -F "# ${c}=" ${e} || echo "# ${c}=0"`).then(i=>{let n=i.includes("=1");if(localStorage.setItem(_,n?"1":"0"),r&&Object.keys(r).length>0){let i="";for(let s in r){let c=n?r[s].active:r[s].inactive;if("frq_on"===t&&n&&(s.includes("policy0")||s.includes("policy4"))){let t=s.includes("policy0")?"lit":"big";i+=`val=$(grep -F "# ${t}=" ${e} | awk '{print $2}' | sed 's/Mhz//'); val=$((val*1000)); echo $val > ${s}; ${o(s,`$((${t}*1000))`)} `;continue}i+=`echo '${c}' > ${s}; ${o(s,c)}`}s(()=>execSafe(i))}l.checked=n}):execSafe(`grep -F "${u}" ${e} || true; cat ${u} 2>/dev/null || true`).then(e=>{let t=e.split("\n"),o=t[0]||"",s=t[1]||"",i=y,n=o.includes(`echo '${p}' > ${u}`)||o.includes(`echo "${p}" > ${u}"`),c=o.includes(`echo '${m}' > ${u}`)||o.includes(`echo "${m}" > ${u}"`);n&&!c?i=!0:c&&!n?i=!1:s.trim()&&(i=s.trim()===p);let a=i?p:m;if(""!==s.trim()&&s.trim()!==a){let e="";for(let t in r)e+=`echo '${i?r[t].active:r[t].inactive}' > ${t}; `;e&&execSafe(e)}localStorage.setItem(_,i?"1":"0"),l.checked=i})}catch{}}),l.addEventListener("change",()=>{let n=l.checked;localStorage.setItem(_,n?"1":"0"),setTimeout(()=>{let a="";c&&(a+=`sed -i "s|# ${c}=.*$|# ${c}=${+!!n}|" ${e}; `);let l={forcebattapps_opt:()=>i("forceappsbattopt_on",n?"# forceappsbattopt_on=1\nsettings put global forced_app_standby_enabled 1":"# forceappsbattopt_on=0\nsettings put global forced_app_standby_enabled 0"),thermal_opt:()=>i("thermalset_on",n?`# thermalset_on=1
system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0
chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms
echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres
echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres
chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus
pm disable com.google.android.gms/.chimera.GmsIntentOperationService`:"# thermalset_on=0\nsystem_table_unset activity_manager_constants\npm enable com.google.android.gms/.chimera.GmsIntentOperationService"),limitbackground_opt:()=>i("limitprocess_on",n?"# limitprocess_on=1\nif [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi":"# limitprocess_on=0\nif [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi"),forcedoze_opt:()=>i("forcedoze_on",n?"# forcedoze_on=1\ndumpsys deviceidle force-idle":"# forcedoze_on=0\ndumpsys deviceidle unforce")};if(l[t])a+=l[t]();else if(r&&Object.keys(r).length>0)for(let s in r){let i=n?r[s].active:r[s].inactive;if("frq_on"===t&&n&&(s.includes("policy0")||s.includes("policy4"))){let t=s.includes("policy0")?"lit":"big";a+=`val=$(grep -F "# ${t}=" ${e} | awk '{print $2}' | sed 's/Mhz//'); val=$((val*1000)); echo $val > ${s}; ${o(s,`$((${t}*1000))`)} `;continue}a+=`echo '${i}' > ${s}; ${o(s,i)}`}s(()=>execSafe(a));let d={forcebattapps_opt:()=>execSafe(n?"settings put global forced_app_standby_enabled 1":"settings put global forced_app_standby_enabled 0"),cpu_hotplug:()=>execSafe(n?"echo '0' > /sys/power/cpuhotplug/governor/user_mode && echo '0' > /sys/power/cpuhotplug/governor/enabled":"echo '1' > /sys/power/cpuhotplug/governor/user_mode && echo '1' > /sys/power/cpuhotplug/governor/enabled"),power_eff:()=>execSafe(n?"echo 'Y' > /sys/module/workqueue/parameters/power_efficient":"echo 'N' > /sys/module/workqueue/parameters/power_efficient"),thermal_opt:()=>execSafe(n?"system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0 && chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus && chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus && echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus && echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus && echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres && echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres && echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres && echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms && echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus && echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus && echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres && echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres && echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms && echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres && chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus && pm disable com.google.android.gms/.chimera.GmsIntentOperationService":"system_table_unset activity_manager_constants && pm enable com.google.android.gms/.chimera.GmsIntentOperationService"),gpuboost_opt:()=>execSafe(n?"echo '3' > /sys/devices/platform/17500000.mali/dvfs_governor":"echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor"),swap_opt:()=>execSafe(n?"echo '10' > /proc/sys/vm/dirty_ratio && echo '3' > /proc/sys/vm/dirty_background_ratio && echo '2500' > /proc/sys/vm/dirty_expire_centisecs && echo '1250' > /proc/sys/vm/dirty_writeback_centisecs && echo '2' > /proc/sys/vm/laptop_mode && echo '70' > /proc/sys/vm/swappiness":"echo '0' > /proc/sys/vm/dirty_ratio && echo '0' > /proc/sys/vm/dirty_background_ratio && echo '200' > /proc/sys/vm/dirty_expire_centisecs && echo '500' > /proc/sys/vm/dirty_writeback_centisecs && echo '0' > /proc/sys/vm/laptop_mode && echo '100' > /proc/sys/vm/swappiness"),storage_opt:()=>execSafe(n?"echo '1' > /sys/block/sda/queue/rotational && echo '1' > /sys/block/sda/queue/add_random && echo '2' > /sys/block/sda/queue/rq_affinity":"echo '0' > /sys/block/sda/queue/rotational && echo '0' > /sys/block/sda/queue/add_random && echo '1' > /sys/block/sda/queue/rq_affinity"),limitbackground_opt:()=>execSafe(n?"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi":"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi"),forcedoze_opt:()=>execSafe(n?"dumpsys deviceidle force-idle":"dumpsys deviceidle unforce")};d[t]&&d[t]()},249)})}let n=[{id:"forcebattapps_opt",probePath:"FORCEAPPSBATT_MARKER",marker:"forceappsbattopt_on",defaultState:!0,paths:{FORCEAPPSBATT_MARKER:{active:"settings put global forced_app_standby_enabled 1",inactive:"settings put global forced_app_standby_enabled 0"}}},{id:"cpu_hotplug",probePath:"CPUHOTPLUG_STATE_MARKER",marker:"hotplugset_on",defaultState:!0,paths:{"/sys/power/cpuhotplug/governor/user_mode":{active:"0",inactive:"1"},"/sys/power/cpuhotplug/governor/enabled":{active:"0",inactive:"1"}}},{id:"power_eff",probePath:"POWEREFFI_STATE_MARKER",marker:"powereffiset_on",defaultState:!0,paths:{"/sys/module/workqueue/parameters/power_efficient":{active:"Y",inactive:"N"}}},{id:"thermal_opt",probePath:"THERMAL_STATE_MARKER",marker:"thermalset_on",defaultState:!0,paths:{THERMAL_STATE_MARKER:{active:"system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0; chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus; echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres; echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms; echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres; chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus; pm disable com.google.android.gms/.chimera.GmsIntentOperationService",inactive:"system_table_unset activity_manager_constants; pm enable com.google.android.gms/.chimera.GmsIntentOperationService"}}},{id:"gpuboost_opt",probePath:"GPUBOOST_STATE_MARKER",marker:"gpuboost_on",defaultState:!1,paths:{"/sys/devices/platform/17500000.mali/dvfs_governor":{active:"3",inactive:"1"}}},{id:"swap_opt",probePath:"SWAP_STATE_MARKER",marker:"swapset_on",defaultState:!0,paths:{"/proc/sys/vm/dirty_ratio":{active:"10",inactive:"0"},"/proc/sys/vm/dirty_background_ratio":{active:"3",inactive:"0"},"/proc/sys/vm/dirty_expire_centisecs":{active:"2500",inactive:"200"},"/proc/sys/vm/dirty_writeback_centisecs":{active:"1250",inactive:"500"},"/proc/sys/vm/laptop_mode":{active:"2",inactive:"0"},"/proc/sys/vm/swappiness":{active:"70",inactive:"100"}}},{id:"storage_opt",probePath:"STORAGE_STATE_MARKER",marker:"storageset_on",defaultState:!0,paths:{"/sys/block/sda/queue/rotational":{active:"1",inactive:"0"},"/sys/block/sda/queue/add_random":{active:"1",inactive:"0"},"/sys/block/sda/queue/rq_affinity":{active:"2",inactive:"1"}}},{id:"batteryprotect_opt",probePath:"BATTERYPROTECT_STATE_MARKER",marker:"batteryprotect_on",defaultState:!1,paths:{"/sys/class/power_supply/battery/batt_full_capacity":{active:"90",inactive:"100"}}},{id:"frq_on",probePath:"FRQ_STATE_MARKER",marker:"frqset_on",defaultState:!0,paths:{"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq":{active:"1690000",inactive:"1794000"},"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq":{active:"1690000",inactive:"2704000"}}},{id:"volt_on",probePath:"VOLTAGE_STATE_MARKER",marker:"voltset_on",defaultState:!0,paths:{"/sys/power/percent_margin/big_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/lit_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/g3d_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/mif_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/aud_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/cam_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/cp_margin_percent":{active:"0",inactive:"0"},"/sys/power/percent_margin/disp_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/fsys0_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/int_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/intcam_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/iva_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/score_margin_percent":{active:"-4",inactive:"0"}}},{id:"limitbackground_opt",probePath:"LIMITBACKGROUND_MARKER",marker:"limitprocess_on",defaultState:!1,paths:{LIMITBACKGROUND_MARKER:{active:"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi",inactive:"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi"}}},{id:"forcedoze_opt",probePath:"FORCEDOZE_LAB_MARKER",marker:"forcedoze_on",defaultState:!1,paths:{FORCEDOZE_LAB_MARKER:{active:"dumpsys deviceidle force-idle",inactive:"dumpsys deviceidle unforce"}}}];n.forEach(e=>r(e));let c=initPopup,a={frq_little:"1690 Mhz",frq_big:"1690 Mhz"};function l(t,o){o.dataset.selected=t;let s=o.querySelector(".popup-value");s||((s=document.createElement("span")).className="popup-value",o.appendChild(s)),s.textContent=t,localStorage.setItem(o.id,t);let i="frq_little"===o.id?"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq":"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",r=1e3*parseInt(t),n="frq_little"===o.id?"# lit=":"# big=";execQueue(`echo '${r}' > ${i} && sed -i "s|${n}.*|${n}${t}|" ${e} && sed -i "s|echo ['\\"][^'\\"]*['\\"] > ${i}|echo '${r}' > ${i}|g" ${e}`)}["frq_little","frq_big"].forEach(e=>{let t=document.getElementById(e);if(!t)return;let o=localStorage.getItem(e)||a[e];t.dataset.selected=o;let s=t.querySelector(".popup-value");s||((s=document.createElement("span")).className="popup-value",t.appendChild(s)),s.textContent=o,t.addEventListener("click",e=>{(e.stopPropagation(),t.classList.contains("popup-label-active"))?c.closePopup():(document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),t.classList.add("popup-label-active"),c.disableOptionsTemporarily(300),c.openPopup(t,l))})});let d=[{id:"batt_level",path:"/sys/class/power_supply/battery/batt_full_capacity",marker:"battery_litmit"}],u=e=>Math.round(e)+80,p=e=>Math.round(parseInt(e))-80;d.forEach(t=>{let i,r=document.getElementById(t.id);if(!r)return;let n=`battery_${t.id}`;r.value=p(null===localStorage.getItem(n)?90:parseInt(localStorage.getItem(n)));let c=document.getElementById("batteryprotect_opt");s(()=>{try{execSafe(`grep -F "# ${t.marker}=" ${e} || echo "# ${t.marker}=90%"`).then(e=>{let i=e.match(RegExp(`# ${t.marker}=(\\d+)%`));if(i){let e=parseInt(i[1]);if(r.value=p(e),localStorage.setItem(n,e),c?.checked){let i=`echo '${e}' > ${t.path}; ${o(t.path,e)}`;s(()=>execSafe(i))}}})}catch{}}),r.addEventListener("input",()=>{let a=u(Math.round(parseFloat(r.value)));localStorage.setItem(n,a),clearTimeout(i),i=setTimeout(()=>{let i=c?.checked,r=`sed -i "s|# ${t.marker}=.*|# ${t.marker}=${a}%|" ${e}; `;i?r+=`sed -i "s|# batteryprotect_on=.*|# batteryprotect_on=1|" ${e}; echo '${a}' > ${t.path}; ${o(t.path,a)}`:r+=`sed -i "s|# batteryprotect_on=.*|# batteryprotect_on=0|" ${e}; echo '100' > ${t.path}; ${o(t.path,"100")}`,s(()=>execSafe(r))},249)})});let m=document.getElementById("batteryprotect_opt");m&&m.addEventListener("change",()=>{let t=m.checked;setTimeout(()=>{let i=d.map(s=>{let i=document.getElementById(s.id);if(!i)return"";let r=u(Math.round(parseFloat(i.value))),n=t?r:100;return`sed -i "s|# batteryprotect_on=.*|# batteryprotect_on=${+!!t}|" ${e}; echo '${n}' > ${s.path}; ${o(s.path,n)}`}).filter(e=>e).join("; ");i&&s(()=>execSafe(i))},249)});let _=[{id:"volt_big",path:"/sys/power/percent_margin/big_margin_percent",marker:"big_volt"},{id:"volt_little",path:"/sys/power/percent_margin/lit_margin_percent",marker:"lit_volt"},{id:"volt_gpu",path:"/sys/power/percent_margin/g3d_margin_percent",marker:"g3d_volt"},{id:"volt_mif",path:"/sys/power/percent_margin/mif_margin_percent",marker:"mif_volt"},{id:"volt_audio",path:"/sys/power/percent_margin/aud_margin_percent",marker:"aud_volt"},{id:"volt_camera",path:"/sys/power/percent_margin/cam_margin_percent",marker:"cam_volt"},{id:"volt_cp",path:"/sys/power/percent_margin/cp_margin_percent",marker:"cp_volt"},{id:"volt_display",path:"/sys/power/percent_margin/disp_margin_percent",marker:"disp_volt"},{id:"volt_fsys",path:"/sys/power/percent_margin/fsys0_margin_percent",marker:"fsys0_volt"},{id:"volt_int",path:"/sys/power/percent_margin/int_margin_percent",marker:"int_volt"},{id:"volt_intcamera",path:"/sys/power/percent_margin/intcam_margin_percent",marker:"intcam_volt"},{id:"volt_iva",path:"/sys/power/percent_margin/iva_margin_percent",marker:"iva_volt"},{id:"volt_score",path:"/sys/power/percent_margin/score_margin_percent",marker:"score_volt"}],v=e=>-Math.round(e),y=e=>-Math.round(parseInt(e));_.forEach(t=>{let i,r=document.getElementById(t.id);if(!r)return;let n="volt_cp"===t.id?0:-4,c=`voltage_${t.id}`;r.value=y(null===localStorage.getItem(c)?n:parseInt(localStorage.getItem(c)));let a=document.getElementById("volt_on");s(()=>{try{let i="volt_cp"===t.id?0:-4;execSafe(`grep -F "# ${t.marker}=" ${e} || echo "# ${t.marker}=${i}"`).then(e=>{let i=e.match(RegExp(`# ${t.marker}=(-?\\d+)`));if(i){let e=parseInt(i[1]);if(r.value=y(e),localStorage.setItem(c,e),a?.checked){let i=`echo '${e}' > ${t.path}; ${o(t.path,e)}`;s(()=>execSafe(i))}}})}catch{}}),r.addEventListener("input",()=>{let n=v(Math.round(parseFloat(r.value)));localStorage.setItem(c,n),clearTimeout(i),i=setTimeout(()=>{let i=a?.checked,r=`sed -i "s|# ${t.marker}=.*|# ${t.marker}=${n}|" ${e}; `;r+=i?`echo '${n}' > ${t.path}; ${o(t.path,n)}`:`echo '0' > ${t.path}; ${o(t.path,"0")}`,s(()=>execSafe(r))},250)})});let h=document.getElementById("volt_on");h&&h.addEventListener("change",()=>{let e=h.checked;setTimeout(()=>{let t=_.map(t=>{let s=document.getElementById(t.id);if(!s)return"";let i=v(Math.round(parseFloat(s.value))),r=e?i:0;return`echo '${r}' > ${t.path}; ${o(t.path,r)}`}).filter(e=>e).join("; ");t&&s(()=>execSafe(t))},249)}),Object.entries({commandFile:e,scriptContent:t,buildSedReplace:o,scheduleIdle:s,initToggleOption:r,AllToggles:n,sliderValueToBattery:u,batteryToSliderValue:p,sliderValueToVoltage:v,voltageToSliderValue:y,batterySliders:d,voltageSliders:_}).forEach(([e,t])=>{try{void 0!==t&&(window[e]=t)}catch{}}),window.applySettings=async function(){return new Promise(t=>{s(()=>{try{let s=async t=>{try{return(await execSafe(`grep -m1 "^[#][[:space:]]*${t}=" ${e} | head -n1 | cut -d'=' -f2`)).trim()}catch{return null}},i=(e,t)=>{if(!e||!t)return!1;let o=Number(e.replace(/\s*Mhz\s*/i,"")),s=Number(t.replace(/\s*Mhz\s*/i,""));return o===s};setTimeout(()=>{n.forEach(e=>{let t=document.getElementById(e.id);if(!t)return;let o=`toggle_state_${e.id}`,s=null===localStorage.getItem(o)?void 0===e.defaultState||e.defaultState:"1"===localStorage.getItem(o);null===localStorage.getItem(o)&&localStorage.setItem(o,s?"1":"0"),t.checked=s,t.dispatchEvent(new Event("change",{bubbles:!0}))})},0),setTimeout(async()=>{for(let t=0;t<d.length;t++){let i=d[t];setTimeout(async()=>{try{let t=`battery_${i.id}`,r=document.getElementById(i.id);if(!r)return;let n=null===localStorage.getItem(t)?90:Number(localStorage.getItem(t));null===localStorage.getItem(t)&&localStorage.setItem(t,String(n)),r.value=p(n);let c=await s(i.marker);if(null===c||Number(c.replace("%",""))!==n){let t=document.getElementById("batteryprotect_opt"),s=t?.checked,r=s?n:100,c=`
                      if grep -m1 -q "^[#][[:space:]]*${i.marker}=" "${e}"; then
                        sed -i 's|^[#][[:space:]]*${i.marker}=.*|# ${i.marker}=${n}%|' "${e}";
                      else
                        printf "# ${i.marker}=%s%%\\n" "${n}" >> "${e}";
                      fi
                      if grep -m1 -q "^[#][[:space:]]*batteryprotect_on=" "${e}"; then
                        sed -i 's|^[#][[:space:]]*batteryprotect_on=.*|# batteryprotect_on=${+!!s}|' "${e}";
                      else
                        printf "# batteryprotect_on=%s\\n" "${+!!s}" >> "${e}";
                      fi
                      echo '${r}' > ${i.path};
                      ${o(i.path,r)}`.trim();execQueue(c)}}catch{}},10*t)}},5),setTimeout(async()=>{let t=["frq_little","frq_big"],r={frq_little:"1690 Mhz",frq_big:"1690 Mhz"},n={frq_little:1794e3,frq_big:2704e3};for(let c=0;c<t.length;c++){let a=t[c],l=document.getElementById(a);if(!l)continue;let d="frq_little"===a?"lit":"big",u=null===localStorage.getItem(a)?r[a]:localStorage.getItem(a);null===localStorage.getItem(a)&&localStorage.setItem(a,u),l.dataset.selected=u;let p=l.querySelector(".popup-value");p||((p=document.createElement("span")).className="popup-value",l.appendChild(p)),p.textContent=u,setTimeout(async()=>{try{let t=await s(d);if(!i(u,t)){let t="frq_little"===a?"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq":"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",s=document.getElementById("frq_on"),i=s?.checked?1e3*Number(u.replace(/\s*Mhz\s*/i,"")):n[a],r="frq_little"===a?"# lit=":"# big=",c=`sed -i "s|${r}.*|${r}${u}|" ${e}; echo '${i}' > ${t}; ${o(t,i)}`;execQueue(c)}}catch{}},"frq_little"===a?120:200)}},50),setTimeout(async()=>{for(let t=0;t<_.length;t++){let i=_[t];setTimeout(async()=>{try{let t=`voltage_${i.id}`,r=document.getElementById(i.id);if(!r)return;let n="volt_cp"===i.id?0:-4,c=null===localStorage.getItem(t)?n:Number(localStorage.getItem(t));null===localStorage.getItem(t)&&localStorage.setItem(t,String(c)),r.value=y(c);let a=await s(i.marker);if(null===a||Number(a)!==c){let t=document.getElementById("volt_on"),s=t?.checked?c:0,r=`
                      if grep -m1 -q "^[#][[:space:]]*${i.marker}=" "${e}"; then
                        sed -i 's|^[#][[:space:]]*${i.marker}=.*|# ${i.marker}=${c}|' "${e}";
                      else
                        printf "# ${i.marker}=%s\\n" "${c}" >> "${e}";
                      fi
                      echo '${s}' > ${i.path};
                      ${o(i.path,s)}
                    `.trim();execQueue(r)}}catch{}},80*t)}setTimeout(()=>t(),80*_.length+450)},250)}catch{}})})}}),document.addEventListener("DOMContentLoaded",()=>{let e={mask:document.querySelector(".oui-dialog-mask"),body:document.body,resetButton:document.querySelector(".close-dialog-text-reset")};window.resetLoadingAnimation=function(e){e&&(e.style.animation="none",e.offsetHeight,e.style.animation="",e.querySelectorAll(".ball").forEach(e=>{e.style.animation="none",e.offsetHeight,e.style.animation=""}))};let t={open(t){let o=document.getElementById(t);if(!o||!e.mask)return;let s=o.querySelector(".oui-loading");s&&resetLoadingAnimation&&resetLoadingAnimation(s),o.classList.add("show"),e.mask.classList.add("show"),e.body.classList.add("no-scroll")},close(){let t=document.querySelector(".oui-dialog.show");return!!t&&!!e.mask&&(t.classList.remove("show"),t.classList.add("hide"),e.mask.classList.remove("show"),e.body.classList.remove("no-scroll"),setTimeout(()=>t.classList.remove("hide"),5),!0)},closeKeepingMask(){let t=document.querySelector(".oui-dialog.show");return!!t&&(t.classList.remove("show"),t.classList.add("hide"),e.mask&&e.mask.classList.add("show"),e.body.classList.add("no-scroll"),setTimeout(()=>t.classList.remove("hide"),5),!0)}};if(e.resetButton){let o=e.resetButton.closest(".reset-dialog-btn");if(!o)return;o.removeEventListener("click",t.close),o.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation();let s=document.createElement("div");s.id="temp-blocking-layer",s.style.cssText="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 3000; pointer-events: all;",e.body.appendChild(s),e.body.classList.add("no-scroll"),t.closeKeepingMask()&&setTimeout(()=>{s.remove(),t.open("resetting_app_dialog"),setTimeout(()=>{let e;e=["settings put global forced_app_standby_enabled 1","echo '0' > /sys/power/cpuhotplug/governor/user_mode","echo '0' > /sys/power/cpuhotplug/governor/enabled","echo 'Y' > /sys/module/workqueue/parameters/power_efficient","system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0","chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus","echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres","echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms","echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres","echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres","chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus","pm disable com.google.android.gms/.chimera.GmsIntentOperationService","echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor","echo '10' > /proc/sys/vm/dirty_ratio","echo '3' > /proc/sys/vm/dirty_background_ratio","echo '2500' > /proc/sys/vm/dirty_expire_centisecs","echo '1250' > /proc/sys/vm/dirty_writeback_centisecs","echo '2' > /proc/sys/vm/laptop_mode","echo '70' > /proc/sys/vm/swappiness","echo '1' > /sys/block/sda/queue/rotational","echo '1' > /sys/block/sda/queue/add_random","echo '2' > /sys/block/sda/queue/rq_affinity","echo '100' > /sys/class/power_supply/battery/batt_full_capacity","echo '1690000' > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq","echo '1690000' > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq","echo '-4' > /sys/power/percent_margin/big_margin_percent","echo '-4' > /sys/power/percent_margin/lit_margin_percent","echo '-4' > /sys/power/percent_margin/g3d_margin_percent","echo '-4' > /sys/power/percent_margin/mif_margin_percent","echo '-4' > /sys/power/percent_margin/aud_margin_percent","echo '-4' > /sys/power/percent_margin/cam_margin_percent","echo '0' > /sys/power/percent_margin/cp_margin_percent","echo '-4' > /sys/power/percent_margin/disp_margin_percent","echo '-4' > /sys/power/percent_margin/fsys0_margin_percent","echo '-4' > /sys/power/percent_margin/int_margin_percent","echo '-4' > /sys/power/percent_margin/intcam_margin_percent","echo '-4' > /sys/power/percent_margin/iva_margin_percent","echo '-4' > /sys/power/percent_margin/score_margin_percent","if [ $API -eq 35 ]; then service call activity 51 i32 -1; elif [ $API -eq 34 ]; then service call activity 51 i32 -1; elif [ $API -eq 33 ]; then service call activity 44 i32 -1; fi","dumpsys deviceidle unforce"],execSafe("rm -rf /data/data/com.guru.batteryoptimizer/app_webview"),setTimeout(()=>{e.forEach(e=>execSafe(e)),execSafe(`cat > ${commandFile} << 'EOF'
${scriptContent}
EOF`)},5),setTimeout(()=>guru.closeApp(),4e3)},5)},700)})}});let S=!0,k=!1,L=!1,T=!1,$={mask:document.querySelector(".oui-loading-mask"),dialog:document.querySelector(".oui-dialog"),loader:document.querySelector(".oui-loading"),label:null,body:document.body,docElement:document.documentElement};function q(){$.body.style.cssText+="pointer-events: none; user-select: none; overflow: hidden;",$.docElement.style.cssText+="pointer-events: none; user-select: none;"}function x(){$.body.style.cssText=$.body.style.cssText.replace(/pointer-events:\s*none;?/g,"").replace(/user-select:\s*none;?/g,"").replace(/overflow:\s*hidden;?/g,""),$.docElement.style.cssText=$.docElement.style.cssText.replace(/pointer-events:\s*none;?/g,"").replace(/user-select:\s*none;?/g,"")}function I(e){$.label||($.label=document.querySelector(".oui-dialog-description")),$.label&&($.label.innerHTML=e)}let A=e=>new Promise(t=>setTimeout(t,e));async function C(){if(T)return;$.mask.classList.remove("active"),$.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",$.loader.classList.remove("active"),$.body.classList.remove("no-scroll");let e=async t=>{t.target!==$.mask||$.mask.classList.contains("active")||(await A(5),S=!1,x(),$.mask.removeEventListener("transitionend",e))};$.mask.addEventListener("transitionend",e,{passive:!0});let t=JSON.parse(await guru.isRoot());t.success&&!t.hasRoot&&(S=!1,k=!1,await A(300),openDialog(document.getElementById("rootlost_warn"),{mask:!0,maskType:"warn"}))}let R=async e=>{e.target.closest(".closeapp-dialog-btn")&&(e.preventDefault(),e.stopPropagation(),await A(50),guru.closeApp())};async function M(){try{let[e,t]=await Promise.all([execSafe("dumpsys battery 2>/dev/null | grep mSavedBatteryAsoc | cut -d'[' -f2 | cut -d']' -f1"),execSafe("dumpsys battery 2>/dev/null | grep mSavedBatteryUsage | cut -d'[' -f2 | cut -d']' -f1")]),o=(e||"").toString().trim(),s=(t||"").toString().trim(),i=null;if(s&&s.length>1){let e=s.slice(0,-1);i=e.slice(0,-1)+"."+e.slice(-1)}document.getElementById("battery_health").textContent=o&&i?`${o}% / ${i} Cycles`:"Unknown"}catch{document.getElementById("battery_health").textContent="Unknown"}}async function O(){if(B){try{B.abort()}catch{}B=null}let e=document.getElementById("rootlost_warn"),t=function(){for(let e of document.querySelectorAll(".oui-dialog.show"))if(!e.closest(".oui-loading-mask"))return e;return null}();t!==e&&(T=!0,t&&"function"==typeof closeDialog?closeDialog():!0===S&&($.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",$.loader.classList.remove("active"),$.body.classList.remove("no-scroll"),x()),"function"==typeof openDialog&&(S=!1,await A(300),openDialog(e,!0===S?{mask:!1}:{mask:!0,maskType:"warn"})))}async function P(){if(!L&&k){L=!0;try{let e=await guru.isRoot(),t=JSON.parse(e);t.success&&!t.hasRoot&&await O()}finally{L=!1}}}document.addEventListener("click",R,{passive:!1});let D=new Set;window.onAppForegrounded=async()=>{for(let e of D)try{e()}catch{}},D.add(async()=>{await P()}),window.onAppWindowFocus=async function(){await P(),x()},window.onAppWindowBlur=function(){q()};let F={jsonUrl:null,currentVersionCode:null,currentVersionName:null,packageName:null,isChecking:!1},B=null;function H(){if("u">typeof guru)try{let e=guru.getAppInfo(),t=JSON.parse(e);t.success&&(F.currentVersionCode=t.versionCode,F.currentVersionName=t.versionName,F.packageName=t.packageName,F.jsonUrl=t.updateUrl)}catch{}}async function N(){if(F.isChecking||T)return;F.isChecking=!0;let{signal:e}=B=new AbortController,t=document.getElementById("update_checking");try{let o;if(null===F.currentVersionCode&&H(),!F.jsonUrl||null===F.currentVersionCode){T||openDialog(document.getElementById("update_connectionerror"));return}if(!T){if(resetLoadingAnimation){let e=t.querySelector(".oui-loading");e&&resetLoadingAnimation(e)}openDialog(t,{mask:!0,maskType:"warn"})}let s=fetch(F.jsonUrl+(F.jsonUrl.includes("?")?"&":"?")+"_="+Date.now(),{method:"GET",cache:"no-cache",headers:{Accept:"application/json"},signal:e}).then(async e=>{if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();if(!t.versionCode||!t.versionName)throw Error("Invalid update JSON format");return{success:!0,data:t}}).catch(e=>"AbortError"===e.name?{aborted:!0}:{success:!1,error:e}),[,i]=await Promise.all([A(2300),s]);if(e.aborted||T||i?.aborted)return;if(i.success)if(window.__lastUpdateJson=i.data,i.data.versionCode>F.currentVersionCode){let e=document.getElementById("update_available"),t=e.querySelector(".oui-dialog-description"),s="";i.data.changelog&&(s="Changelog:<br>"+i.data.changelog.replace(/\n/g,"<br>")),t.innerHTML=`Version ${i.data.versionName} is available!<br>
          Current version: ${F.currentVersionName}
          <br><br>${s}<br><br>
          Press on "Install now" to install the update.`,o=e}else o=document.getElementById("update_uptodate");else o=document.getElementById("update_connectionerror");if(e.aborted||T)return;switchDialog(t,o,{mask:!0,maskType:"default"})}catch(o){if(o?.name==="AbortError"||T)return;let e=document.getElementById("update_connectionerror");t.classList.contains("show")?switchDialog(t,e,{mask:!0,maskType:"default"}):openDialog(e)}finally{F.isChecking=!1,B=null}}document.addEventListener("DOMContentLoaded",function(){H();let e=document.getElementById("check_update");e&&e.addEventListener("click",function(e){e.preventDefault(),F.isChecking||T||N()})}),document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".installupdate-dialog-btn");e&&e.addEventListener("click",()=>{if(!T&&(!B||!B.signal.aborted)){if(switchDialog(document.getElementById("update_available"),document.getElementById("update_install"),{mask:!0,maskType:"warn"}),"u">typeof guru)try{let e=window.__lastUpdateJson?.downloadUrl;e?(A(1700),guru.installUpdate(e)):(closeDialog(),openDialog(document.getElementById("update_installerror")))}catch(e){closeDialog(),openDialog(document.getElementById("update_installerror"))}}})}),async function(){try{M(),guru.hideSplash(),q(),await A(200),I("Checking Root Access..."),$.dialog.style.cssText+="opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0);",$.loader.classList.add("active"),$.body.classList.add("no-scroll"),await A(2100);let e=await guru.isRoot();if(!JSON.parse(e).hasRoot){$.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",$.loader.classList.remove("active"),$.body.classList.remove("no-scroll"),S=!1,k=!1,await A(300),openDialog(document.getElementById("root_warn"),{mask:!1});return}I("Checking Device Support..."),k=!0;let t=await guru.getDeviceInfo(),o=JSON.parse(t).model||"";for(let e=0;e<5;e++){if(T)return;await A(300)}if(T)return;if(!["SM-G960F","SM-G960N","SM-G965F","SM-G965N","SM-N960F","SM-N960N","SM-N770F"].includes(o)){$.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",$.loader.classList.remove("active"),$.body.classList.remove("no-scroll"),S=!1,k=!1,await A(300),openDialog(document.getElementById("device_warn"),{mask:!1});return}if(I("Checking Settings..."),T||(await A(300),T)||(await applySettings(),T)||(await A(300),T))return;"function"==typeof enableToggleHaptics&&enableToggleHaptics(),"function"==typeof enableSliderHaptics&&enableSliderHaptics(),await A(100),S&&await C()}catch{q(),await A(300),I("ERROR!"),$.dialog.style.cssText+="opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0);",$.loader.classList.add("active"),$.body.classList.add("no-scroll"),await A(700),C()}}();