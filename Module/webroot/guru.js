let e;window.showTab=function(e,t){if(t.classList.contains("oui-tab-link--active"))return;document.querySelectorAll(".tab-section").forEach(e=>{e.classList.remove("active")}),document.getElementById(e).classList.add("active"),window.initSliders(),document.querySelectorAll(".oui-tab-link").forEach(e=>{e.classList.remove("oui-tab-link--active");let t=e.querySelector(".outline"),i=e.querySelector(".filled");t&&i&&(t.style.display="inline-block",i.style.display="none")}),t.classList.add("oui-tab-link--active");let i=t.querySelector(".outline"),s=t.querySelector(".filled");i&&s&&(i.style.display="none",s.style.display="inline-block");let o=document.querySelector(".scroll-container");o&&(o.scrollTop=0),v(251)};let t=document.getElementById("batteryprotect_opt"),i=document.querySelectorAll("#general .options");function s(){let e=t.checked;i.forEach(t=>{t.classList.toggle("disabled",!e)})}let o=document.getElementById("frq_on"),r=document.getElementById("frq_toggle_master"),c=document.getElementById("frq_text"),n=document.querySelectorAll("#freq .options");function a(){let e=o.checked;c.textContent=e?"ON":"OFF",c.style.color=e?"var(--app-accent)":"",r.style.background=e?"var(--toggle-master-background)":"",r.style.transition=".25s",c.style.fontFamily="'SamsungSharpSans-Bold', sans-serif",c.style.fontWeight="normal",c.style.transform="translateY(2px)",n.forEach(t=>{t.classList.toggle("disabled",!e)})}let l=document.getElementById("volt_on"),d=document.getElementById("volt_toggle_master"),m=document.getElementById("volt_text"),u=document.querySelectorAll("#voltage .options");function p(){let e=l.checked;m.textContent=e?"ON":"OFF",m.style.color=e?"var(--app-accent)":"",d.style.background=e?"var(--toggle-master-background)":"",d.style.transition=".25s",m.style.fontFamily="'SamsungSharpSans-Bold', sans-serif",m.style.fontWeight="normal",m.style.transform="translateY(2px)",u.forEach(t=>{t.classList.toggle("disabled",!e)})}t.addEventListener("change",s),o.addEventListener("change",a),l.addEventListener("change",p),s(),a(),p();let _=document.querySelector(".scroll-container");function v(e=251){_&&(_.style.overflowY="hidden",setTimeout(()=>{_.style.overflowY="auto"},e))}v(251),document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".top-glow"),t=document.querySelector(".bottom-glow");if(!e||!t)return;e.style.transition||(e.style.transition="opacity 200ms ease"),t.style.transition||(t.style.transition="opacity 200ms ease"),e.style.opacity=e.style.opacity||"0",t.style.opacity=t.style.opacity||"0";let i=i=>{e.style.opacity=i?"1":"0",t.style.opacity=i?"1":"0"},s=null,o=()=>{s&&cancelAnimationFrame(s),s=requestAnimationFrame(()=>{let e=document.querySelector("section.active");if(!e||e.hasAttribute("data-glow")&&"false"===e.getAttribute("data-glow"))return void i(!1);let t=(e=>{if(!e)return null;let t=e;for(;t&&t!==document.body&&(t=t.parentElement);){if(t.classList&&t.classList.contains("scroll-container"))return t;let e=getComputedStyle(t);if(/(auto|scroll)/.test(e.overflowY))return t}let i=getComputedStyle(e);if(/(auto|scroll)/.test(i.overflowY))return e;let s=document.querySelector(".scroll-container");return s&&s.contains(e)?s:document.scrollingElement||document.documentElement})(e);i(!!(t&&t&&t.scrollHeight>t.clientHeight+1))})};o();let r=window.showTab;"function"==typeof r&&(window.showTab=function(e,t){r(e,t),setTimeout(o,40)});let c=new MutationObserver(o);document.querySelectorAll("section").forEach(e=>c.observe(e,{attributes:!0,attributeFilter:["class"]}));let n=new ResizeObserver(o);n.observe(document.documentElement),document.querySelectorAll(".scroll-container, section").forEach(e=>n.observe(e));let a=new MutationObserver(o);document.querySelectorAll(".scroll-container").forEach(e=>a.observe(e,{childList:!0,subtree:!0})),window.addEventListener("resize",o);let l=document.querySelector(".oui-tab"),d=document.documentElement;function m(){let e=l?l.getBoundingClientRect().height:60;d.style.setProperty("--nav-height",`${Math.round(e)}px`)}window.addEventListener("load",m),window.addEventListener("resize",m),l&&"ResizeObserver"in window&&new ResizeObserver(m).observe(l),window.initSliders()}),_.addEventListener("scroll",()=>{_.classList.add("show-scrollbar"),clearTimeout(e),e=setTimeout(()=>{_.classList.remove("show-scrollbar")},1500)});let f=document.querySelector(".oui-loading-mask"),g=document.querySelector(".oui-dialog"),y=document.querySelector(".oui-loading");window.resetLoadingAnimation=function(e){e&&(e.style.animation="none",e.offsetHeight,e.style.animation="",e.querySelectorAll(".ball").forEach(e=>{e.style.animation="none",e.offsetHeight,e.style.animation=""}))},document.body.style.pointerEvents="none",document.body.style.userSelect="none",document.body.style.overflow="hidden",document.documentElement.style.pointerEvents="none",document.documentElement.style.userSelect="none",setTimeout(()=>{g.style.opacity="1",g.style.pointerEvents="auto",g.style.transform="translateX(-50%) translateY(0)",y.classList.add("active"),document.body.classList.add("no-scroll")},150),setTimeout(()=>{f.classList.remove("active"),g.style.opacity="0",g.style.pointerEvents="none",g.style.transform="translateX(-50%) translateY(20px)",y.classList.remove("active"),document.body.classList.remove("no-scroll")},4700),f.addEventListener("transitionend",e=>{e.target!==f||f.classList.contains("active")||setTimeout(()=>{document.body.style.pointerEvents="",document.body.style.userSelect="",document.body.style.overflow="",document.documentElement.style.pointerEvents="",document.documentElement.style.userSelect=""},5)});let h=document.querySelector(".scroll-container"),b=document.querySelectorAll(".tab-section");h.addEventListener("scroll",()=>{let e=null;if(b.forEach(t=>{let i=t.querySelector(".oui-viewing"),s=t.querySelector(".oui-header"),o=t.querySelector(".info-header");if(!i||!s)return;let r=i.getBoundingClientRect(),c=h.getBoundingClientRect(),n=r.top-c.top,a=i.offsetHeight/4,l=i.offsetHeight/1.23;n<=a&&n>-r.height&&(e=t),n<-a?(s.classList.add("header-compact"),i.classList.add("header-compact")):(s.classList.remove("header-compact"),i.classList.remove("header-compact")),n<-l?(s.classList.add("header-compact-infobtn"),o.classList.add("header-compact-infobtn")):(s.classList.remove("header-compact-infobtn"),o.classList.remove("header-compact-infobtn"))}),e){let t=e.querySelector(".oui-header"),i=e.querySelector(".oui-viewing-title"),s=null==t?void 0:t.querySelector(".oui-header-title");t&&i&&s&&(s.textContent=i.textContent.trim())}}),document.querySelectorAll(".oui-container-toggle, .oui-bubble-item, .oui-bubble-item2").forEach(e=>{let t=!1,i=!1,s=!1,o=!1,r=null,c=null,n=0,a=0,l=()=>{var t;if(s)return;null==(t=e.querySelector(".toggle-effect"))||t.remove();let i=document.createElement("span");if(i.className="toggle-effect animate-in",null!==e.querySelector("#batteryprotect_opt"))i.classList.add("rounded-top");else{let t=[...e.parentElement.querySelectorAll(".oui-container-toggle, .oui-bubble-item, .oui-bubble-item2")],s=e===t[0],o=e===t[t.length-1];1===t.length?i.classList.add("rounded-all"):s?i.classList.add("rounded-top"):o&&i.classList.add("rounded-bottom")}e.appendChild(i);let o=e.querySelector(".oui-inner");o&&o.classList.add("pressed-effect")},d=()=>{clearTimeout(r),clearTimeout(c);let t=e.querySelector(".toggle-effect");if(!t)return;t.classList.remove("animate-in"),t.classList.add("animate-out");let i=e.querySelector(".oui-inner");i&&(i.classList.remove("pressed-effect"),i.classList.add("released-effect")),r=setTimeout(()=>{e.classList.remove("released-effect"),t.remove()},550)},m=r=>{if(!t)return;clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,d(),i=!1)},700);let a=Math.abs((r.touches?r.touches[0].clientY:r.clientY)-n);if(!o&&a>8){s=!0,o=!0,d(),i=!1;let t=e.querySelector(".oui-inner");t&&t.classList.remove("pressed-effect");return}},u=r=>{if(!t)return;t=!1,document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",u);let c=Date.now();i&&!s&&!o&&c-a>=300&&(a=c,e.click()),d(),i=!1,s=!1,o=!1};e.addEventListener("click",e=>{i||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",p=>{if(Date.now()-a<300)return void p.preventDefault();t=!0,i=!0,s=!1,o=!1,n=p.touches[0].clientY,clearTimeout(r),clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,d(),i=!1)},700);let _=e.querySelector(".oui-inner");_&&(_.classList.remove("released-effect"),_.classList.add("pressed-effect")),l(),document.addEventListener("touchmove",m),document.addEventListener("touchend",u)}),e.addEventListener("pointerdown",p=>{if(Date.now()-a<300)return void p.preventDefault();t=!0,i=!0,s=!1,o=!1,n=p.touches?p.touches[0].clientY:p.clientY,clearTimeout(r),clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,d(),i=!1)},700);let _=e.querySelector(".oui-inner");_&&(_.classList.remove("released-effect"),_.classList.add("pressed-effect")),l(),document.addEventListener("pointermove",m),document.addEventListener("pointerup",u),document.addEventListener("touchmove",m),document.addEventListener("touchend",u)})}),document.querySelectorAll(".oui-button").forEach(e=>{let t=!1,i=!1,s=!1,o=!1,r=null,c=null,n=0,a=e.closest(".oui-button"),l=0,d=()=>{var t;if(s)return;null==(t=e.querySelector(".button-effect"))||t.remove();let i=document.createElement("span");i.className="button-effect animate-in",e.appendChild(i),a&&(a.classList.add("pressed-effect"),a.classList.remove("released-effect"))},m=()=>{clearTimeout(r),clearTimeout(c);let t=e.querySelector(".button-effect");t&&(t.classList.remove("animate-in"),t.classList.add("animate-out"),a&&(a.classList.remove("pressed-effect"),a.classList.add("released-effect")),r=setTimeout(()=>{a&&a.classList.remove("released-effect"),t.remove()},550))},u=r=>{if(!t)return;clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,m(),i=!1)},700);let l=Math.abs((r.touches?r.touches[0].clientY:r.clientY)-n);if(!o&&l>8){s=!0,o=!0,m(),i=!1,a&&a.classList.remove("pressed-effect");return}let d=e.getBoundingClientRect(),u=r.touches?r.touches[0].clientX:r.clientX,p=r.touches?r.touches[0].clientY:r.clientY;(u<d.left||u>d.right||p<d.top||p>d.bottom)&&i&&(s=!0,m(),i=!1,a&&a.classList.remove("pressed-effect"))},p=r=>{if(!t)return;t=!1,document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",p),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",p);let c=Date.now();i&&!s&&!o&&c-l>=300&&(l=c,e.click()),m(),i=!1,s=!1,o=!1};e.addEventListener("click",e=>{i||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",e=>{Date.now()-l<300?e.preventDefault():(t=!0,i=!0,s=!1,o=!1,n=e.touches[0].clientY,clearTimeout(r),clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,m(),i=!1)},700),a&&(a.classList.remove("released-effect"),a.classList.add("pressed-effect")),d(),document.addEventListener("touchmove",u),document.addEventListener("touchend",p))}),e.addEventListener("pointerdown",e=>{Date.now()-l<300?e.preventDefault():(t=!0,i=!0,s=!1,o=!1,n=e.touches?e.touches[0].clientY:e.clientY,clearTimeout(r),clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,m(),i=!1)},700),a&&(a.classList.remove("released-effect"),a.classList.add("pressed-effect")),d(),document.addEventListener("pointermove",u),document.addEventListener("pointerup",p),document.addEventListener("touchmove",u),document.addEventListener("touchend",p))})}),document.querySelectorAll(".oui-tab-link").forEach(e=>{let t=!1,i=!1,s=!1,o=!1,r=null,c=null,n=0,a=e.closest(".oui-tab-inner"),l=0,d=()=>{var t;if(s)return;null==(t=e.querySelector(".tab-button-effect"))||t.remove();let i=document.createElement("span");i.className="tab-button-effect animate-in rounded-all",e.appendChild(i),a&&(a.classList.add("pressed-effect"),a.classList.remove("released-effect"))},m=()=>{clearTimeout(r),clearTimeout(c);let t=e.querySelector(".tab-button-effect");t&&(t.classList.remove("animate-in"),t.classList.add("animate-out"),a&&(a.classList.remove("pressed-effect"),a.classList.add("released-effect")),r=setTimeout(()=>{a&&a.classList.remove("released-effect"),t.remove()},550))},u=e=>{if(!t)return;clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,m(),i=!1)},700);let r=Math.abs((e.touches?e.touches[0].clientX:e.clientX)-n);if(!o&&r>8){s=!0,o=!0,m(),i=!1,a&&a.classList.remove("pressed-effect");return}},p=r=>{if(!t)return;t=!1,document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",p),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",p);let c=Date.now();i&&!s&&!o&&c-l>=300&&(l=c,e.click()),m(),i=!1,s=!1,o=!1};e.addEventListener("click",e=>{i||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",e=>{Date.now()-l<300?e.preventDefault():(t=!0,i=!0,s=!1,o=!1,n=e.touches[0].clientX,clearTimeout(r),clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,m(),i=!1)},700),a&&(a.classList.remove("released-effect"),a.classList.add("pressed-effect")),d(),document.addEventListener("touchmove",u),document.addEventListener("touchend",p))}),e.addEventListener("pointerdown",e=>{Date.now()-l<300?e.preventDefault():(t=!0,i=!0,s=!1,o=!1,n=e.touches?e.touches[0].clientX:e.clientX,clearTimeout(r),clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,m(),i=!1)},700),a&&(a.classList.remove("released-effect"),a.classList.add("pressed-effect")),d(),document.addEventListener("pointermove",u),document.addEventListener("pointerup",p),document.addEventListener("touchmove",u),document.addEventListener("touchend",p))})}),document.querySelectorAll(".oui-dialog-action-button").forEach(e=>{let t=!1,i=!1,s=!1,o=!1,r=null,c=null,n=0,a=()=>{clearTimeout(r),clearTimeout(c);let t=e.querySelector(".dialog-button-effect");t&&(t.classList.remove("animate-in"),t.classList.add("animate-out"),e.classList.remove("pressed-effect"),e.classList.add("released-effect"),r=setTimeout(()=>{e.classList.remove("released-effect"),t.remove()},550))},l=e=>{if(!t)return;clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,a(),i=!1)},700);let r=Math.abs(e.clientY-n);if(!o&&r>8){s=!0,o=!0,a(),i=!1;return}},d=r=>{t&&(t=!1,document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",d),!i||s||o||e.click(),a(),i=!1,s=!1,o=!1)};e.addEventListener("pointerdown",m=>{t=!0,i=!0,s=!1,o=!1,n=m.clientY,clearTimeout(r),clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,a(),i=!1)},700),(()=>{var t;if(s)return;null==(t=e.querySelector(".dialog-button-effect"))||t.remove();let i=document.createElement("span");i.className="dialog-button-effect animate-in rounded-all",e.appendChild(i),e.classList.add("pressed-effect"),e.classList.remove("released-effect")})(),document.addEventListener("pointermove",l),document.addEventListener("pointerup",d)}),e.addEventListener("click",e=>{i||(e.preventDefault(),e.stopPropagation())},!0)}),document.querySelectorAll(".oui-overlay-bubble-info, .oui-overlay-bubble-info-header").forEach(e=>{let t=!1,i=!1,s=!1,o=!1,r=null,c=null,n=0,a=!1,l=()=>{var t;if(s)return;null==(t=e.querySelector(".oui-icon-info-effect"))||t.remove();let i=document.createElement("span");i.className="oui-icon-info-effect animate-in rounded-all",e.appendChild(i),e.classList.add("pressed-effect"),e.classList.remove("released-effect")},d=()=>{clearTimeout(r),clearTimeout(c);let t=e.querySelector(".oui-icon-info-effect");t&&(t.classList.remove("animate-in"),t.classList.add("animate-out"),e.classList.remove("pressed-effect"),e.classList.add("released-effect"),r=setTimeout(()=>{e.classList.remove("released-effect"),t.remove()},550))},m=r=>{if(!t)return;clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,d(),i=!1)},700);let a=Math.abs((r.touches?r.touches[0].clientY:r.clientY)-n);if(!o&&a>8){s=!0,o=!0,d(),i=!1,e.classList.remove("pressed-effect");return}},u=r=>{t&&(t=!1,document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",u),!i||s||o||a||(a=!0,e.click(),setTimeout(()=>{a=!1},50)),d(),i=!1,s=!1,o=!1)};e.addEventListener("click",e=>{i||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",a=>{t=!0,i=!0,s=!1,o=!1,n=a.touches[0].clientY,clearTimeout(r),clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,d(),i=!1)},700),e.classList.remove("released-effect"),e.classList.add("pressed-effect"),l(),document.addEventListener("touchmove",m),document.addEventListener("touchend",u)}),e.addEventListener("pointerdown",a=>{t=!0,i=!0,s=!1,o=!1,n=a.touches?a.touches[0].clientY:a.clientY,clearTimeout(r),clearTimeout(c),c=setTimeout(()=>{t&&!o&&(s=!0,d(),i=!1)},700),e.classList.remove("released-effect"),e.classList.add("pressed-effect"),l(),document.addEventListener("pointermove",m),document.addEventListener("pointerup",u),document.addEventListener("touchmove",m),document.addEventListener("touchend",u)})}),window.initSliders=function(){let e=["volt_big","volt_little","volt_gpu","volt_mif","volt_audio","volt_camera","volt_cp","volt_display","volt_fsys","volt_int","volt_intcamera","volt_iva","volt_score"],t=["batt_level"],i=new Map,s=new Map,o=new Map;function r(){e.forEach(e=>{let t=document.getElementById(e);if(!t)return;let i=t.nextElementSibling;if(!i)return;let s=parseInt(t.max)-parseInt(t.min),o=t.offsetWidth-15;i.innerHTML="";for(let e=0;e<=s;e++){let t=document.createElement("span"),r=7.5+e/s*o+2;t.style.left=`${r}px`,i.appendChild(t)}}),t.forEach(e=>{let t=document.getElementById(e);if(!t)return;let i=t.nextElementSibling;if(!i)return;let s=parseInt(t.max)-parseInt(t.min),o=t.offsetWidth-15;i.innerHTML="";for(let e=0;e<=s;e++){let t=document.createElement("span"),r=7.5+e/s*o+2;t.style.left=`${r}px`,i.appendChild(t)}})}function c(e){let t=document.getElementById(e);if(!t)return;let i=t.parentElement.querySelector(".slider-values");if(!i)return;let s=t.offsetWidth-15,o=i.querySelectorAll("span");if(3!==o.length)return;let r=[7.5,7.5+.5*s+1,7.5+s];o.forEach((e,t)=>{e.style.position="absolute",e.style.top="0",e.style.transform="translateX(-50%)",e.style.left=r[t]+"px"})}function n(e){let t=document.getElementById(e);if(!t)return;let i=t.parentElement.querySelector(".batt-slider-values");if(!i)return;let s=t.offsetWidth-15,o=i.querySelectorAll("span");if(3!==o.length)return;let r=[7.5,7.5+.5*s+1,7.5+s];o.forEach((e,t)=>{e.style.position="absolute",e.style.top="0",e.style.transform="translateX(-50%)",e.style.left=r[t]+"px"})}function a(e){i.has(e)&&(clearTimeout(i.get(e)),i.delete(e))}function l(e){s.has(e)&&(clearTimeout(s.get(e)),s.delete(e))}function d(e,t,s){a(e);let o=setTimeout(t,s);i.set(e,o)}function m(e,t,i){l(e);let o=setTimeout(t,i);s.set(e,o)}function u(e){let t=e.parentElement.querySelector(".batt-slider-value-float");if(!t){(t=document.createElement("div")).className="batt-slider-value-float";let i=document.createElement("span");i.className="slider-value-text",t.appendChild(i),e.parentElement.appendChild(t)}let i=t.querySelector(".slider-value-text"),s=parseInt(e.value,10);i.textContent=80+s+"%";let o=e.offsetWidth,r=(s-e.min)/(e.max-e.min);t.style.left=`${7.5+(o-15)*r}px`}function p(e){let t=e.parentElement.querySelector(".batt-slider-value-float");t&&t.classList.add("visible")}function _(e){let t=e.parentElement.querySelector(".batt-slider-value-float");t&&t.classList.remove("visible")}function v(e){let t=e.parentElement.querySelector(".slider-value-float");if(!t){(t=document.createElement("div")).className="slider-value-float";let i=document.createElement("span");i.className="slider-value-text",t.appendChild(i),e.parentElement.appendChild(t)}let i=t.querySelector(".slider-value-text"),s=parseInt(e.value,10);i.textContent=0===s?"0":`-${s}`;let o=e.offsetWidth,r=(s-e.min)/(e.max-e.min);t.style.left=`${7.5+(o-15)*r}px`}function f(e){let t=e.parentElement.querySelector(".slider-value-float");t&&t.classList.add("visible")}function g(e){let t=e.parentElement.querySelector(".slider-value-float");t&&t.classList.remove("visible")}function y(i,s=null){document.querySelectorAll("button, .oui-container-toggle, .popup-trigger, .oui-tab-link, .oui-overlay-bubble-info").forEach(e=>{e.style.pointerEvents=i?"":"none"}),[...e,...t].forEach(e=>{let t=document.getElementById(e);t&&t!==s&&(t.style.pointerEvents=i?"":"none")})}e.forEach(e=>{let t=document.getElementById(e);if(!t)return;let i=!1,s=0,r=0,c=!1,n=0,l=!1;t.addEventListener("pointerdown",d=>{let m=Date.now();if(m-(o.get(e)||0)<100)return void d.preventDefault();o.set(e,m),a(e),i=!0,c=!1,l=!1,n=t.valueAsNumber;let u=t.getBoundingClientRect(),p=d.clientX-u.left,_=t.min?Number(t.min):0,g=t.max?Number(t.max):100,y=g-_,h=_+p/u.width*y;t.value=Math.round(Math.min(g,Math.max(_,h))),requestAnimationFrame(()=>{v(t)}),t.valueAsNumber!==n&&(l=!0),s=d.clientX,r=t.valueAsNumber,t.setPointerCapture(d.pointerId),f(t),t.classList.add("active-thumb"),d.preventDefault()},{passive:!1}),t.addEventListener("pointermove",e=>{if(!i)return;e.preventDefault();let o=e.clientX-s;if(Math.abs(o)>5&&(c=!0),c){let e=t.clientWidth,i=t.min?Number(t.min):0,s=t.max?Number(t.max):100,c=r+o/e*(s-i);t.value=Math.round(c=Math.min(s,Math.max(i,c))),requestAnimationFrame(()=>{v(t)}),l=!0}},{passive:!1}),t.addEventListener("pointerup",s=>{if(i){if(i=!1,t.releasePointerCapture(s.pointerId),l&&t.valueAsNumber!==n){let e=new Event("input",{bubbles:!0,cancelable:!0});t.dispatchEvent(e)}d(e,()=>{g(t)},280),t.classList.remove("active-thumb")}},{passive:!1}),t.addEventListener("pointercancel",s=>{i=!1,t.releasePointerCapture(s.pointerId),d(e,()=>{g(t)},280),t.classList.remove("active-thumb")})}),t.forEach(e=>{let t=document.getElementById(e);if(!t)return;let i=!1,s=0,r=0,c=!1,n=0,a=!1;t.addEventListener("pointerdown",d=>{let m=Date.now();if(m-(o.get(e)||0)<100)return void d.preventDefault();o.set(e,m),l(e),i=!0,c=!1,a=!1,n=t.valueAsNumber;let _=t.getBoundingClientRect(),v=d.clientX-_.left,f=t.min?Number(t.min):0,g=t.max?Number(t.max):100,y=g-f,h=f+v/_.width*y;t.value=Math.round(Math.min(g,Math.max(f,h))),requestAnimationFrame(()=>{u(t)}),t.valueAsNumber!==n&&(a=!0),s=d.clientX,r=t.valueAsNumber,t.setPointerCapture(d.pointerId),p(t),t.classList.add("active-thumb"),d.preventDefault()},{passive:!1}),t.addEventListener("pointermove",e=>{if(!i)return;e.preventDefault();let o=e.clientX-s;if(Math.abs(o)>5&&(c=!0),c){let e=t.clientWidth,i=t.min?Number(t.min):0,s=t.max?Number(t.max):100,c=r+o/e*(s-i);t.value=Math.round(c=Math.min(s,Math.max(i,c))),requestAnimationFrame(()=>{u(t)}),a=!0}},{passive:!1}),t.addEventListener("pointerup",s=>{if(i){if(i=!1,t.releasePointerCapture(s.pointerId),a&&t.valueAsNumber!==n){let e=new Event("input",{bubbles:!0,cancelable:!0});t.dispatchEvent(e)}m(e,()=>{_(t)},280),t.classList.remove("active-thumb")}},{passive:!1}),t.addEventListener("pointercancel",s=>{i=!1,t.releasePointerCapture(s.pointerId),m(e,()=>{_(t)},280),t.classList.remove("active-thumb")})}),r(),e.forEach(e=>c(e)),t.forEach(e=>n(e)),e.forEach(e=>{let t=document.getElementById(e);t&&(v(t),t.addEventListener("touchstart",()=>{a(e),y(!1,t),v(t),f(t)}),t.addEventListener("touchend",()=>{y(!0),d(e,()=>{g(t)},270)}),t.addEventListener("input",()=>v(t)),t.addEventListener("mousedown",()=>{a(e),y(!1,t),v(t),f(t)}),window.addEventListener("mouseup",()=>{y(!0),d(e,()=>{g(t)},270)}),window.addEventListener("resize",()=>v(t)))}),t.forEach(e=>{let t=document.getElementById(e);t&&(u(t),t.addEventListener("touchstart",()=>{l(e),y(!1,t),u(t),p(t)}),t.addEventListener("touchend",()=>{y(!0),m(e,()=>{_(t)},270)}),t.addEventListener("input",()=>u(t)),t.addEventListener("mousedown",()=>{l(e),y(!1,t),u(t),p(t)}),window.addEventListener("mouseup",()=>{y(!0),m(e,()=>{_(t)},270)}),window.addEventListener("resize",()=>u(t)))}),window.addEventListener("resize",()=>{r(),e.forEach(e=>c(e)),t.forEach(e=>n(e))})},document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".oui-dialog-mask"),t=null,i=!1,s=0,o=e=>{let t=e.target;for(;t;){let e=window.getComputedStyle(t);if("auto"===e.overflowY||"scroll"===e.overflowY||t.classList&&t.classList.contains("oui-dialog-description"))return;if((t=t.parentElement)&&t.classList&&t.classList.contains("oui-dialog"))break}e.preventDefault()};function r(){i=!0,document.body.style.pointerEvents="none",document.body.style.userSelect="none",document.body.style.overflow="hidden",document.documentElement.style.pointerEvents="none",document.documentElement.style.userSelect="none",document.querySelectorAll(".oui-dialog-action-button, .close-dialog-btn, .reset-dialog-btn").forEach(e=>{e.style.pointerEvents="none"})}function c(){i=!1,document.body.style.pointerEvents="",document.body.style.userSelect="",document.body.style.overflow="",document.documentElement.style.pointerEvents="",document.documentElement.style.userSelect="",document.querySelectorAll(".oui-dialog-action-button, .close-dialog-btn, .reset-dialog-btn").forEach(e=>{e.style.pointerEvents=""})}let n=e=>{s=e.touches[0].clientY},a=e=>{if(!t)return;let i=e.target,o=!1;for(;i&&i!==t;){let e=window.getComputedStyle(i);if(("auto"===e.overflowY||"scroll"===e.overflowY)&&i.scrollHeight>i.clientHeight){o=!0;break}i=i.parentElement}if(o)return;let r=t,c=r.scrollTop,n=r.scrollHeight,a=r.offsetHeight,l=e.touches[0].clientY,d=l>s,m=l<s;(0===c&&d||c+a>=n&&m)&&e.preventDefault(),s=l},l=i=>{r(),i.querySelectorAll('.oui-dialog-description, [style*="overflow-y: auto"], [style*="overflow-y: scroll"]').forEach(e=>{e.scrollTop=0}),i.classList.add("show"),e.classList.add("show"),t=i,document.body.classList.add("no-scroll"),document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("touchstart",n,{passive:!1}),document.addEventListener("touchmove",a,{passive:!1}),setTimeout(()=>{c()},275)},d=()=>{if(!t)return;r(),t.classList.remove("show"),t.classList.add("hide"),e.classList.remove("show"),document.body.classList.remove("no-scroll"),document.removeEventListener("touchmove",o),document.removeEventListener("touchstart",n),document.removeEventListener("touchmove",a);let i=e=>{e.target===t&&t.classList.contains("hide")&&(t.removeEventListener("transitionend",i),setTimeout(()=>{t.classList.remove("hide"),t=null,c()},5))};t.addEventListener("transitionend",i)};window.openDialog=l,window.closeDialog=d,document.querySelectorAll("[data-dialog-target]").forEach(e=>{e.addEventListener("click",t=>{if(i)return t.preventDefault(),t.stopPropagation(),!1;let s=e.getAttribute("data-dialog-target"),o=document.getElementById(s),r=e.querySelector('input[type="checkbox"].toggle');if(o){let e=o.querySelector(".oui-loading");e&&resetLoadingAnimation(e)}r?setTimeout(()=>{r.checked&&o&&l(o)},0):o&&l(o)})}),document.querySelectorAll(".close-dialog-btn").forEach(e=>{e.addEventListener("click",e=>{if(i)return e.preventDefault(),e.stopPropagation(),!1;d()})}),e.addEventListener("click",e=>{let t=document.getElementById("closing_app_dialog");return i||t&&t.classList.contains("show")?(e.preventDefault(),e.stopPropagation(),!1):void d()});let m=new WeakMap,u=(e,t)=>{let i=m.get(e)||(e=>{if(!e)return null;if(m.has(e))return m.get(e);let t=e.querySelector(".oui-dialog-description");if(!t)return null;let i=e.querySelector(".dialog-top-glow"),s=e.querySelector(".dialog-bottom-glow");i||((i=document.createElement("div")).className="dialog-top-glow",e.appendChild(i)),s||((s=document.createElement("div")).className="dialog-bottom-glow",e.appendChild(s));let o=()=>{let o=t.getBoundingClientRect(),r=e.getBoundingClientRect(),c=o.top-r.top,n=r.bottom-o.bottom;i.style.top=`${c}px`,s.style.bottom=`${n}px`};if(o(),"ResizeObserver"in window){let i=new ResizeObserver(o);i.observe(t),i.observe(e)}i.style.opacity=i.style.opacity||"0",s.style.opacity=s.style.opacity||"0";let r={desc:t,topGlow:i,bottomGlow:s};return m.set(e,r),r})(e);i&&(i.topGlow.style.opacity=t?"1":"0",i.bottomGlow.style.opacity=t?"1":"0")},p=()=>{requestAnimationFrame(()=>{let e=document.querySelector(".oui-dialog.show");if(!e)return u(e,!1);let t=(e=>{if(!e)return null;let t=e.querySelector(".oui-dialog-description");return t||e})(e);u(e,!!(t&&t&&t.scrollHeight>t.clientHeight+1))})};p();let _=new MutationObserver(p);if(document.querySelectorAll(".oui-dialog").forEach(e=>_.observe(e,{attributes:!0,attributeFilter:["class"]})),"ResizeObserver"in window){let e=new ResizeObserver(p);e.observe(document.documentElement),document.querySelectorAll(".oui-dialog, .oui-dialog-description").forEach(t=>e.observe(t))}let v=new MutationObserver(p);document.querySelectorAll(".oui-dialog .oui-dialog-description").forEach(e=>v.observe(e,{childList:!0,subtree:!0})),window.addEventListener("resize",p)}),document.addEventListener("DOMContentLoaded",()=>{let e="/data/adb/modules/battery-guru-optimizer-9810/boot-completed.sh",t=e=>{try{let t=ksu.exec(e);if(t&&"function"==typeof t.then)return t.catch(()=>"");if(t&&"function"==typeof t.catch)return t.catch(()=>"");return Promise.resolve(t||"")}catch(e){return Promise.resolve("")}},i=(t,i)=>`sed -i "s|echo ['\\"][^'\\"]*['\\"] > ${t}|echo '${i}' > ${t}|g" ${e}; `;function s(e){"requestIdleCallback"in window?requestIdleCallback(e):setTimeout(e,0)}let o=[{id:"forcebattapps_opt",probePath:"FORCEAPPSBATT_MARKER",marker:"forceappsbattopt_on",defaultState:!0,paths:{FORCEAPPSBATT_MARKER:{active:"settings put global forced_app_standby_enabled 1".replace(/\n/g," "),inactive:"settings put global forced_app_standby_enabled 0".replace(/\n/g," ")}}},{id:"gmsoptimize_opt",probePath:"GMSOPTIMIZED_MARKER",marker:"gmsoptimized_on",defaultState:!0,paths:{GMSOPTIMIZED_MARKER:{active:"dumpsys deviceidle whitelist -com.google.android.gms; pm disable com.google.android.gms/com.google.android.gms.auth.managed.admin.DeviceAdminReceiver; pm disable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver".replace(/\n/g," "),inactive:"dumpsys deviceidle whitelist +com.google.android.gms; pm enable com.google.android.gms/com.google.android.gms.auth.managed.admin.DeviceAdminReceiver; pm enable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver".replace(/\n/g," ")}}},{id:"cpu_hotplug",probePath:"CPUHOTPLUG_STATE_MARKER",marker:"hotplugset_on",defaultState:!0,paths:{"/sys/power/cpuhotplug/governor/user_mode":{active:"0",inactive:"1"},"/sys/power/cpuhotplug/governor/enabled":{active:"0",inactive:"1"}}},{id:"power_eff",probePath:"POWEREFFI_STATE_MARKER",marker:"powereffiset_on",defaultState:!0,paths:{"/sys/module/workqueue/parameters/power_efficient":{active:"Y",inactive:"N"}}},{id:"thermal_opt",probePath:"THERMAL_STATE_MARKER",marker:"thermalset_on",defaultState:!0,paths:{THERMAL_STATE_MARKER:{active:"system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0; chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus; echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres; echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms; echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres; chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus; pm disable com.google.android.gms/.chimera.GmsIntentOperationService".replace(/\n/g," "),inactive:"system_table_unset activity_manager_constants; pm enable com.google.android.gms/.chimera.GmsIntentOperationService".replace(/\n/g," ")}}},{id:"gpuboost_opt",probePath:"GPUBOOST_STATE_MARKER",marker:"gpuboost_on",defaultState:!1,paths:{"/sys/devices/platform/17500000.mali/dvfs_governor":{active:"3",inactive:"1"}}},{id:"swap_opt",probePath:"SWAP_STATE_MARKER",marker:"swapset_on",defaultState:!0,paths:{"/proc/sys/vm/dirty_ratio":{active:"10",inactive:"0"},"/proc/sys/vm/dirty_background_ratio":{active:"3",inactive:"0"},"/proc/sys/vm/dirty_expire_centisecs":{active:"2500",inactive:"200"},"/proc/sys/vm/dirty_writeback_centisecs":{active:"1250",inactive:"500"},"/proc/sys/vm/laptop_mode":{active:"2",inactive:"0"},"/proc/sys/vm/swappiness":{active:"70",inactive:"100"}}},{id:"storage_opt",probePath:"STORAGE_STATE_MARKER",marker:"storageset_on",defaultState:!0,paths:{"/sys/block/sda/queue/rotational":{active:"1",inactive:"0"},"/sys/block/sda/queue/add_random":{active:"1",inactive:"0"},"/sys/block/sda/queue/rq_affinity":{active:"2",inactive:"1"}}},{id:"batteryprotect_opt",probePath:"BATTERYPROTECT_STATE_MARKER",marker:"batteryprotect_on",defaultState:!1,paths:{"/sys/class/power_supply/battery/batt_full_capacity":{active:"90",inactive:"100"}}},{id:"frq_on",probePath:"FRQ_STATE_MARKER",marker:"frqset_on",defaultState:!0,paths:{"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq":{active:"1690000",inactive:"1794000"},"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq":{active:"1794000",inactive:"2704000"}}},{id:"volt_on",probePath:"VOLTAGE_STATE_MARKER",marker:"voltset_on",defaultState:!0,paths:{"/sys/power/percent_margin/big_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/lit_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/g3d_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/mif_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/aud_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/cam_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/cp_margin_percent":{active:"0",inactive:"0"},"/sys/power/percent_margin/disp_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/fsys0_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/int_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/intcam_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/iva_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/score_margin_percent":{active:"-4",inactive:"0"}}},{id:"limitbackground_opt",probePath:"LIMITBACKGROUND_MARKER",marker:"limitprocess_on",defaultState:!1,paths:{LIMITBACKGROUND_MARKER:{active:"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi".replace(/\n/g," "),inactive:"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi".replace(/\n/g," ")}}},{id:"forcedoze_opt",probePath:"FORCEDOZE_LAB_MARKER",marker:"forcedoze_on",defaultState:!1,paths:{FORCEDOZE_LAB_MARKER:{active:"dumpsys deviceidle force-idle".replace(/\n/g," "),inactive:"dumpsys deviceidle unforce".replace(/\n/g," ")}}}];o.forEach(o=>(function({id:o,paths:r,probePath:c,marker:n,defaultState:a=!0}){let l=document.getElementById(o);if(!l)return;let d=l.closest(".oui-container-toggle");d&&d.classList.add("no-animation");let m=c&&r[c]?c:Object.keys(r)[0],u=r[m].active,p=r[m].inactive,_=`toggle_state_${o}`,v=a,f=localStorage.getItem(_);null!==f&&(v="1"===f),l.checked=!!v,d&&requestAnimationFrame(()=>d.classList.remove("no-animation")),s(()=>{try{n?t(`grep -F "# ${n}=" ${e} || echo "# ${n}=0"`).then(c=>{let n=c.includes("=1");if(localStorage.setItem(_,n?"1":"0"),r&&Object.keys(r).length>0){let c="";for(let t in r){let s=n?r[t].active:r[t].inactive;if("frq_on"===o&&n&&(t.includes("policy0")||t.includes("policy4"))){let s=t.includes("policy0")?"lit":"big";c+=`val=$(grep -F "# ${s}=" ${e} | awk '{print $2}' | sed 's/Mhz//'); `,c+=`val=$((val*1000)); echo $val > ${t}; `,c+=i(t,`$((${s}*1000))`)+" ";continue}c+=`echo '${s}' > ${t}; `,c+=i(t,s)}s(()=>t(c))}l.checked=n}):t(`grep -F "${m}" ${e} || true`).then(e=>{let i=v,s=e.includes(`echo '${u}' > ${m}`)||e.includes(`echo "${u}" > ${m}"`),o=e.includes(`echo '${p}' > ${m}`)||e.includes(`echo "${p}" > ${m}"`);s&&!o?i=!0:o&&!s?i=!1:t(`cat ${m} || true`).then(e=>{i=e.trim()===u});let c=i?u:p;t(`cat ${m} || true`).then(e=>{if(""!==e.trim()&&e.trim()!==c){let e="";for(let t in r)e+=`echo '${i?r[t].active:r[t].inactive}' > ${t}; `;t(e)}localStorage.setItem(_,i?"1":"0")}),l.checked=i})}catch{}}),l.addEventListener("change",()=>{let c=l.checked;localStorage.setItem(_,c?"1":"0");let a="";if(n&&(a+=`sed -i "s|# ${n}=.*$|# ${n}=${+!!c}|" ${e}; `),"forcebattapps_opt"===o){let t=`${e}.forcebattapps_block.tmp`,i=`${e}.tmp`;if(c){let s=`# forceappsbattopt_on=1
settings put global forced_app_standby_enabled 1`;a+=`cat > ${t} <<'EOB'
${s}
EOB
`,a+=`awk -v blk='${t}' -v marker='^# forceappsbattopt_on=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; `,a+=`mv ${i} ${e}; rm -f ${t}; `}else{let s=`# forceappsbattopt_on=0
settings put global forced_app_standby_enabled 0`;a+=`cat > ${t} <<'EOB'
${s}
EOB
`,a+=`awk -v blk='${t}' -v marker='^# forceappsbattopt_on=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; `,a+=`mv ${i} ${e}; rm -f ${t}; `}}else if("gmsoptimize_opt"===o){let t=`${e}.gmsoptimize_block.tmp`,i=`${e}.tmp`;if(c){let s=`# gmsoptimized_on=1
pm disable com.google.android.gms/com.google.android.gms.auth.managed.admin.DeviceAdminReceiver
pm disable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver
dumpsys deviceidle whitelist -com.google.android.gms`;a+=`cat > ${t} <<'EOB'
${s}
EOB
`,a+=`awk -v blk='${t}' -v marker='^# gmsoptimized_on=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; `,a+=`mv ${i} ${e}; rm -f ${t}; `}else{let s=`# gmsoptimized_on=0
pm enable com.google.android.gms/com.google.android.gms.auth.managed.admin.DeviceAdminReceiver
pm enable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver
dumpsys deviceidle whitelist +com.google.android.gms`;a+=`cat > ${t} <<'EOB'
${s}
EOB
`,a+=`awk -v blk='${t}' -v marker='^# gmsoptimized_on=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; `,a+=`mv ${i} ${e}; rm -f ${t}; `}}else if("thermal_opt"===o){let t=`${e}.thermal_block.tmp`,i=`${e}.tmp`;if(c){let s=`# thermalset_on=1
system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0
chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms
echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres
echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres
chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus
pm disable com.google.android.gms/.chimera.GmsIntentOperationService`;a+=`cat > ${t} <<'EOB'
${s}
EOB
`,a+=`awk -v blk='${t}' -v marker='^# thermalset_on=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; `,a+=`mv ${i} ${e}; rm -f ${t}; `}else{let s=`# thermalset_on=0
system_table_unset activity_manager_constants
pm enable com.google.android.gms/.chimera.GmsIntentOperationService`;a+=`cat > ${t} <<'EOB'
${s}
EOB
`,a+=`awk -v blk='${t}' -v marker='^# thermalset_on=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; `,a+=`mv ${i} ${e}; rm -f ${t}; `}}else if("limitbackground_opt"===o){let t=`${e}.limitbackground_block.tmp`,i=`${e}.tmp`;if(c){let s=`# limitprocess_on=1
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi`;a+=`cat > ${t} <<'EOB'
${s}
EOB
`,a+=`awk -v blk='${t}' -v marker='^# limitprocess_on=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; `,a+=`mv ${i} ${e}; rm -f ${t}; `}else{let s=`# limitprocess_on=0
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi`;a+=`cat > ${t} <<'EOB'
${s}
EOB
`,a+=`awk -v blk='${t}' -v marker='^# limitprocess_on=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; `,a+=`mv ${i} ${e}; rm -f ${t}; `}}else if("forcedoze_opt"===o){let t=`${e}.forcedoze_block.tmp`,i=`${e}.tmp`;if(c){let s=`# forcedoze_on=1
dumpsys deviceidle force-idle`;a+=`cat > ${t} <<'EOB'
${s}
EOB
`,a+=`awk -v blk='${t}' -v marker='^# forcedoze_on=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; `,a+=`mv ${i} ${e}; rm -f ${t}; `}else{let s=`# forcedoze_on=0
dumpsys deviceidle unforce`;a+=`cat > ${t} <<'EOB'
${s}
EOB
`,a+=`awk -v blk='${t}' -v marker='^# forcedoze_on=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; `,a+=`mv ${i} ${e}; rm -f ${t}; `}}else if(r&&Object.keys(r).length>0)for(let t in r){let s=c?r[t].active:r[t].inactive;if("frq_on"===o&&c&&(t.includes("policy0")||t.includes("policy4"))){let s=t.includes("policy0")?"lit":"big";a+=`val=$(grep -F "# ${s}=" ${e} | awk '{print $2}' | sed 's/Mhz//'); `,a+=`val=$((val*1000)); echo $val > ${t}; `,a+=i(t,`$((${s}*1000))`)+" ";continue}a+=`echo '${s}' > ${t}; `,a+=i(t,s)}s(()=>t(a)),"forcebattapps_opt"===o&&t(l.checked?"settings put global forced_app_standby_enabled 1":"settings put global forced_app_standby_enabled 0"),"gmsoptimize_opt"===o&&t(l.checked?"dumpsys deviceidle whitelist -com.google.android.gms && pm disable com.google.android.gms/com.google.android.gms.auth.managed.admin.DeviceAdminReceiver && pm disable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver":"dumpsys deviceidle whitelist +com.google.android.gms && pm enable com.google.android.gms/com.google.android.gms.auth.managed.admin.DeviceAdminReceiver && pm enable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver"),"thermal_opt"===o&&t(l.checked?"system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0 && chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus && chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus && echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus && echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus && echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres && echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres && echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres && echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms && echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus && echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus && echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres && echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres && echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms && echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres && chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus && pm disable com.google.android.gms/.chimera.GmsIntentOperationService":"system_table_unset activity_manager_constants && pm enable com.google.android.gms/.chimera.GmsIntentOperationService"),"limitbackground_opt"===o&&t(l.checked?"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi":"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi"),"forcedoze_opt"===o&&t(l.checked?"dumpsys deviceidle force-idle":"dumpsys deviceidle unforce")})})(o)),function(){let i=document.getElementById("popup-menu");if(!i)return;let o=i.querySelector(".popup-content"),r=document.getElementById("popup-options"),c=!1,n=!1,a=!0;function l(){i.classList.remove("show"),n=!1,a=!0,document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active"))}function d(o,c,l){r.innerHTML="",o.forEach((d,m)=>{let u=document.createElement("li");u.className="oui-bubble-item";let p="";if(1===o.length?p="rounded-all":0===m?p="rounded-top":m===o.length-1&&(p="rounded-bottom"),u.innerHTML=`<div class="popup-inner"><span class="popup-text">${d}</span></div><span class="popup-effect ${p}"></span>`,d===c){u.classList.add("selected");let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("class","popup-icon-selected checkmark"),e.innerHTML='<path style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:3" d="m5 12 5 5 9-9"/>',u.querySelector(".popup-inner").appendChild(e)}let _=u.querySelector(".popup-inner"),v=u.querySelector(".popup-effect"),f=!1,g=!1,y=()=>{if(v.classList.contains("animate-in")){v.classList.remove("animate-in"),v.classList.add("animate-out");let e=()=>{v.classList.remove("animate-out"),v.removeEventListener("animationend",e)};v.addEventListener("animationend",e)}_.classList.remove("pressed-effect")};u.addEventListener("pointerdown",e=>{a?(f=!0,g=!1,_.classList.add("pressed-effect"),v.classList.add("animate-in"),setTimeout(()=>{g||y()},400)):e.stopPropagation()}),u.addEventListener("pointermove",e=>{if(!f)return;let t=u.getBoundingClientRect();e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=t.top&&e.clientY<=t.bottom||g||(g=!0,f=!1,y(),e.preventDefault(),e.stopPropagation())}),u.addEventListener("pointerleave",()=>{f&&!g&&(g=!0,f=!1,y())}),u.addEventListener("pointerup",()=>{f=!1,y()}),u.addEventListener("pointercancel",()=>{f=!1,g=!0,y()}),u.addEventListener("click",o=>{if(!a)return;o.stopPropagation(),i.classList.remove("show"),n=!1,a=!0,document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),l.dataset.selected=d;let r=l.querySelector(".popup-value");r||((r=document.createElement("span")).className="popup-value",l.appendChild(r)),r.textContent=d,localStorage.setItem(l.id,d);let c="frq_little"===l.id?"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq":"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",m=1e3*d.replace("Mhz",""),u="frq_little"===l.id?"# lit=":"# big=",p=`echo '${m}' > ${c}; sed -i "s|echo ['\\"][^'\\"]*['\\"] > ${c}|echo '${m}' > ${c}|g" ${e}; sed -i "s|${u}.*|${u}${d}|" ${e}`;s(()=>t(p))}),r.appendChild(u)});let d=l.querySelector(".popup-value");d&&(d.textContent=c)}function m(e){let t=e.getBoundingClientRect(),s=i.offsetHeight,o=i.offsetWidth,r=window.innerWidth,c=JSON.parse(e.dataset.options).length,n=t.top+window.scrollY+t.height/2-s/2-40*(c>10)-177,a=t.right+8;a+o>r&&(a=r-o-26),i.style.top=`${n}px`,i.style.left=`${a}px`}document.addEventListener("pointerdown",e=>{c=!i.contains(e.target)},!0),document.addEventListener("pointerup",e=>{n&&c&&!i.contains(e.target)&&(l(),e.preventDefault(),e.stopPropagation())},!0),["click","pointerdown","pointerup","touchstart","touchend"].forEach(e=>{document.addEventListener(e,e=>{n&&!i.contains(e.target)&&(e.preventDefault(),e.stopPropagation())},{capture:!0,passive:!1})}),["frq_little","frq_big"].forEach(e=>{let t=document.getElementById(e);if(!t)return;let s=localStorage.getItem(e)||({frq_little:"1690 Mhz",frq_big:"1794 Mhz"})[e];t.dataset.selected=s;let r=t.querySelector(".popup-value");r||((r=document.createElement("span")).className="popup-value",t.appendChild(r)),r.textContent=s,t.addEventListener("click",e=>{if(e.stopPropagation(),t.classList.contains("popup-label-active"))return void l();document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),t.classList.add("popup-label-active"),function(e=300){a=!1,setTimeout(()=>{a=!0},e)}(300);let s=JSON.parse(t.dataset.options),r=t.dataset.selected;i.classList.contains("show")?(m(t),o.classList.add("switching"),setTimeout(()=>{d(s,r,t),o.classList.remove("switching")},150)):(d(s,r,t),requestAnimationFrame(()=>{m(t),i.classList.add("show"),n=!0}))})})}();let r=[{id:"batt_level",path:"/sys/class/power_supply/battery/batt_full_capacity",marker:"battery_litmit"}];function c(e){return Math.round(e)+80}function n(e){return Math.round(parseInt(e))-80}r.forEach(o=>{let r,a=document.getElementById(o.id);if(!a)return;let l=`battery_${o.id}`,d=localStorage.getItem(l);a.value=n(d=null===d?90:parseInt(d)),s(()=>{try{t(`grep -F "# ${o.marker}=" ${e} || echo "# ${o.marker}=90%"`).then(e=>{let r=e.match(RegExp(`# ${o.marker}=(\\d+)%`));if(r){let e=parseInt(r[1]);a.value=n(e),localStorage.setItem(l,e);let c=document.getElementById("batteryprotect_opt");if(c&&c.checked){let r=`echo '${e}' > ${o.path}; `+i(o.path,e);s(()=>t(r))}}})}catch{}}),a.addEventListener("input",()=>{let n=c(Math.round(parseFloat(a.value)));localStorage.setItem(l,n),clearTimeout(r),r=setTimeout(()=>{let r=document.getElementById("batteryprotect_opt"),c=r&&r.checked,a="";a+=`sed -i "s|# ${o.marker}=.*|# ${o.marker}=${n}%|" ${e}; `,c?(a+=`sed -i "s|# batteryprotect_on=.*|# batteryprotect_on=1|" ${e}; `,a+=`echo '${n}' > ${o.path}; `,a+=i(o.path,n)):(a+=`sed -i "s|# batteryprotect_on=.*|# batteryprotect_on=0|" ${e}; `,a+=`echo '100' > ${o.path}; `,a+=i(o.path,"100")),s(()=>t(a))},5)})});let a=document.getElementById("batteryprotect_opt");a&&a.addEventListener("change",()=>{let o=a.checked;r.forEach(r=>{let n=document.getElementById(r.id);if(!n)return;let a=c(Math.round(parseFloat(n.value))),l=o?a:100,d=`sed -i "s|# batteryprotect_on=.*|# batteryprotect_on=${+!!o}|" ${e}; `;d+=`echo '${l}' > ${r.path}; `,d+=i(r.path,l),s(()=>t(d))})});let l=[{id:"volt_big",path:"/sys/power/percent_margin/big_margin_percent",marker:"big_volt"},{id:"volt_little",path:"/sys/power/percent_margin/lit_margin_percent",marker:"lit_volt"},{id:"volt_gpu",path:"/sys/power/percent_margin/g3d_margin_percent",marker:"g3d_volt"},{id:"volt_mif",path:"/sys/power/percent_margin/mif_margin_percent",marker:"mif_volt"},{id:"volt_audio",path:"/sys/power/percent_margin/aud_margin_percent",marker:"aud_volt"},{id:"volt_camera",path:"/sys/power/percent_margin/cam_margin_percent",marker:"cam_volt"},{id:"volt_cp",path:"/sys/power/percent_margin/cp_margin_percent",marker:"cp_volt"},{id:"volt_display",path:"/sys/power/percent_margin/disp_margin_percent",marker:"disp_volt"},{id:"volt_fsys",path:"/sys/power/percent_margin/fsys0_margin_percent",marker:"fsys0_volt"},{id:"volt_int",path:"/sys/power/percent_margin/int_margin_percent",marker:"int_volt"},{id:"volt_intcamera",path:"/sys/power/percent_margin/intcam_margin_percent",marker:"intcam_volt"},{id:"volt_iva",path:"/sys/power/percent_margin/iva_margin_percent",marker:"iva_volt"},{id:"volt_score",path:"/sys/power/percent_margin/score_margin_percent",marker:"score_volt"}];function d(e){return-Math.round(e)}function m(e){return-Math.round(parseInt(e))}l.forEach(o=>{let r,c=document.getElementById(o.id);if(!c)return;let n="volt_cp"===o.id?0:-4,a=`voltage_${o.id}`,l=localStorage.getItem(a);c.value=m(l=null===l?n:parseInt(l)),s(()=>{try{let r="volt_cp"===o.id?0:-4;t(`grep -F "# ${o.marker}=" ${e} || echo "# ${o.marker}=${r}"`).then(e=>{let r=e.match(RegExp(`# ${o.marker}=(-?\\d+)`));if(r){let e=parseInt(r[1]);c.value=m(e),localStorage.setItem(a,e);let n=document.getElementById("volt_on");if(n&&n.checked){let r=`echo '${e}' > ${o.path}; `+i(o.path,e);s(()=>t(r))}}})}catch{}}),c.addEventListener("input",()=>{let n=d(Math.round(parseFloat(c.value)));localStorage.setItem(a,n),clearTimeout(r),r=setTimeout(()=>{let r=document.getElementById("volt_on"),c=r&&r.checked,a="";a+=`sed -i "s|# ${o.marker}=.*|# ${o.marker}=${n}|" ${e}; `,c?(a+=`echo '${n}' > ${o.path}; `,a+=i(o.path,n)):(a+=`echo '0' > ${o.path}; `,a+=i(o.path,"0")),s(()=>t(a))},150)})});let u=document.getElementById("volt_on");u&&u.addEventListener("change",()=>{let e=u.checked;l.forEach(o=>{let r=document.getElementById(o.id);if(!r)return;let c=d(Math.round(parseFloat(r.value))),n=e?c:0,a=`echo '${n}' > ${o.path}; `+i(o.path,n);s(()=>t(a))})});let p=!1,_=[],v=!1,f=async()=>{if(!v&&0!==_.length){for(v=!0;_.length>0;){let e=_.shift();try{await t(e),await new Promise(e=>setTimeout(e,15))}catch{}}v=!1}},g=e=>{_.push(e),setTimeout(f,0)};s(()=>{try{let s=async i=>{try{return(await t(`grep -m1 "^[#][[:space:]]*${i}=" ${e} | head -n1 | cut -d'=' -f2`)).trim()}catch{return null}},c=(e,t)=>{if(!e||!t)return!1;let i=Number(e.replace(/\s*Mhz\s*/i,"")),s=Number(t.replace(/\s*Mhz\s*/i,""));return i===s};setTimeout(()=>{o.forEach(e=>{let t,i=e.id,s=`toggle_state_${i}`,o=document.getElementById(i);if(!o)return;if(null===localStorage.getItem(s)){let i=void 0===e.defaultState||e.defaultState;t=i,localStorage.setItem(s,i?"1":"0")}else t="1"===localStorage.getItem(s);o.checked=t;let r=new Event("change",{bubbles:!0});o.dispatchEvent(r)})},0),setTimeout(async()=>{for(let t=0;t<r.length;t++){let o=r[t];setTimeout(async()=>{try{let t,r=`battery_${o.id}`,c=document.getElementById(o.id);if(!c)return;null===localStorage.getItem(r)?(t=90,localStorage.setItem(r,String(t))):t=Number(localStorage.getItem(r)),c.value=n(t);let a=await s(o.marker);if(null===a||Number(a.replace("%",""))!==t){let s=document.getElementById("batteryprotect_opt"),r=!!s&&s.checked,c=r?t:100,n=`
                  if grep -m1 -q "^[#][[:space:]]*${o.marker}=" "${e}"; then
                    sed -i 's|^[#][[:space:]]*${o.marker}=.*|# ${o.marker}=${t}%|' "${e}";
                  else
                    printf "# ${o.marker}=%s%%\\n" "${t}" >> "${e}";
                  fi
                  if grep -m1 -q "^[#][[:space:]]*batteryprotect_on=" "${e}"; then
                    sed -i 's|^[#][[:space:]]*batteryprotect_on=.*|# batteryprotect_on=${+!!r}|' "${e}";
                  else
                    printf "# batteryprotect_on=%s\\n" "${+!!r}" >> "${e}";
                  fi
                  echo '${c}' > ${o.path};
                  ${i(o.path,c)}
                `.trim();g(n)}}catch{}},10*t)}setTimeout(()=>{p=!0},5)},5),setTimeout(async()=>{for(let t of["frq_little","frq_big"]){let o,r=document.getElementById(t);if(!r)continue;let n={frq_little:"1690 Mhz",frq_big:"1794 Mhz"},a="frq_little"===t?"lit":"big";null===localStorage.getItem(t)?(o=n[t],localStorage.setItem(t,o)):o=localStorage.getItem(t),r.dataset.selected=o;let l=r.querySelector(".popup-value");l||((l=document.createElement("span")).className="popup-value",r.appendChild(l)),l.textContent=o,setTimeout(async()=>{try{let r=await s(a);if(!c(o,r)){let s,r="frq_little"===t?"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq":"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",c=document.getElementById("frq_on"),n=c&&c.checked,a={frq_little:1794e3,frq_big:2704e3};if(n){let e=Number(o.replace(/\s*Mhz\s*/i,""));s=1e3*e}else s=a[t];let l="frq_little"===t?"# lit=":"# big=",d=`sed -i "s|${l}.*|${l}${o}|" ${e}; echo '${s}' > ${r}; `+i(r,s);g(d)}}catch{}},"frq_little"===t?120:200)}},50),setTimeout(async()=>{for(let t=0;t<l.length;t++){let o=l[t];setTimeout(async()=>{try{let t,r=`voltage_${o.id}`,c=document.getElementById(o.id);if(!c)return;null===localStorage.getItem(r)?(t="volt_cp"===o.id?0:-4,localStorage.setItem(r,String(t))):t=Number(localStorage.getItem(r)),c.value=m(t);let n=await s(o.marker);if(null===n||Number(n)!==t){let s=document.getElementById("volt_on"),r=s&&s.checked?t:0,c=`
                  if grep -m1 -q "^[#][[:space:]]*${o.marker}=" "${e}"; then
                    sed -i 's|^[#][[:space:]]*${o.marker}=.*|# ${o.marker}=${t}|' "${e}";
                  else
                    printf "# ${o.marker}=%s\\n" "${t}" >> "${e}";
                  fi
                  echo '${r}' > ${o.path};
                  ${i(o.path,r)}
                `.trim();g(c)}}catch{}},80*t)}setTimeout(()=>{p=!0},80*l.length+450)},250)}catch{setTimeout(()=>{p=!0},350)}}),window.isInitialLoadComplete=()=>p}),document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".close-dialog-text-reset");if(e){let t=e.closest(".reset-dialog-btn");t&&(t.removeEventListener("click",()=>{let e=document.querySelector(".oui-dialog.show"),t=document.querySelector(".oui-dialog-mask");return!!e&&!!t&&(e.classList.remove("show"),e.classList.add("hide"),t.classList.remove("show"),document.body.classList.remove("no-scroll"),setTimeout(()=>{e.classList.remove("hide")},5),!0)}),t.addEventListener("click",e=>{let t,i;e.preventDefault(),e.stopPropagation();let s=document.createElement("div");s.id="temp-blocking-layer",s.style.cssText=`
          position: fixed; top: 0; left: 0;
          width: 100%; height: 100%;
          z-index: 3000; pointer-events: all;
        `,document.body.appendChild(s),document.body.classList.add("no-scroll"),t=document.querySelector(".oui-dialog.show"),i=document.querySelector(".oui-dialog-mask"),t&&(t.classList.remove("show"),t.classList.add("hide"),i&&i.classList.add("show"),document.body.classList.add("no-scroll"),setTimeout(()=>{t.classList.remove("hide")},5),1)&&setTimeout(()=>{let e=document.getElementById("temp-blocking-layer");e&&e.remove();let t=document.getElementById("closing_app_dialog"),i=document.querySelector(".oui-dialog-mask");if(t&&i){if(t){let e=t.querySelector(".oui-loading");e&&resetLoadingAnimation(e)}t.classList.add("show"),i.classList.add("show"),document.body.classList.add("no-scroll")}setTimeout(()=>{let e,t;e=["settings put global forced_app_standby_enabled 1","pm disable com.google.android.gms/com.google.android.gms.auth.managed.admin.DeviceAdminReceiver","pm disable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver","dumpsys deviceidle whitelist -com.google.android.gms","echo '0' > /sys/power/cpuhotplug/governor/user_mode","echo '0' > /sys/power/cpuhotplug/governor/enabled","echo 'Y' > /sys/module/workqueue/parameters/power_efficient","system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0","chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus","echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres","echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms","echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres","echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres","chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus","pm disable com.google.android.gms/.chimera.GmsIntentOperationService","echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor","echo '10' > /proc/sys/vm/dirty_ratio","echo '3' > /proc/sys/vm/dirty_background_ratio","echo '2500' > /proc/sys/vm/dirty_expire_centisecs","echo '1250' > /proc/sys/vm/dirty_writeback_centisecs","echo '2' > /proc/sys/vm/laptop_mode","echo '70' > /proc/sys/vm/swappiness","echo '1' > /sys/block/sda/queue/rotational","echo '1' > /sys/block/sda/queue/add_random","echo '2' > /sys/block/sda/queue/rq_affinity","echo '100' > /sys/class/power_supply/battery/batt_full_capacity","echo '1690000' > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq","echo '1794000' > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq","echo '-4' > /sys/power/percent_margin/big_margin_percent","echo '-4' > /sys/power/percent_margin/lit_margin_percent","echo '-4' > /sys/power/percent_margin/g3d_margin_percent","echo '-4' > /sys/power/percent_margin/mif_margin_percent","echo '-4' > /sys/power/percent_margin/aud_margin_percent","echo '-4' > /sys/power/percent_margin/cam_margin_percent","echo '0' > /sys/power/percent_margin/cp_margin_percent","echo '-4' > /sys/power/percent_margin/disp_margin_percent","echo '-4' > /sys/power/percent_margin/fsys0_margin_percent","echo '-4' > /sys/power/percent_margin/int_margin_percent","echo '-4' > /sys/power/percent_margin/intcam_margin_percent","echo '-4' > /sys/power/percent_margin/iva_margin_percent","echo '-4' > /sys/power/percent_margin/score_margin_percent","if [ $API -eq 35 ]; then service call activity 51 i32 -1; elif [ $API -eq 34 ]; then service call activity 51 i32 -1; elif [ $API -eq 33 ]; then service call activity 44 i32 -1; fi","dumpsys deviceidle unforce"],t=`# BATTERY GURU OPTIMIZER (ALL SETTINGS)
# Developed by @EliezerB03

#!/sbin/sh

# ============== ALL OPTIMIZATIONS  ============== #

#---------------< BATTERY OPTIMIZATIONS ON APPS >---------------#
# forceappsbattopt_on=1
settings put global forced_app_standby_enabled 1

#---------------< GMS OPTIMIZATIONS >---------------#
# gmsoptimized_on=1
pm disable com.google.android.gms/com.google.android.gms.auth.managed.admin.DeviceAdminReceiver
pm disable com.google.android.gms/com.google.android.gms.mdm.receivers.MdmDeviceAdminReceiver
dumpsys deviceidle whitelist -com.google.android.gms

#---------------< CPU HOTPLUG OPTIMIZATIONS >---------------#
# hotplugset_on=1
echo '0' > /sys/power/cpuhotplug/governor/user_mode
echo '0' > /sys/power/cpuhotplug/governor/enabled

#---------------< CPU POWER EFFICIENT >---------------#
# powereffiset_on=1
echo 'Y' > /sys/module/workqueue/parameters/power_efficient

#---------------< THERMAL OPTIMIZATIONS >---------------#
# thermalset_on=1
system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0
chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms
echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres
echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres
chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus
pm disable com.google.android.gms/.chimera.GmsIntentOperationService

#---------------< GPU BOOST >---------------#
# gpuboost_on=0
echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor

#---------------< SWAP OPTIMIZATIONS >---------------#
# swapset_on=1
echo '10' > /proc/sys/vm/dirty_ratio
echo '3' > /proc/sys/vm/dirty_background_ratio
echo '2500' > /proc/sys/vm/dirty_expire_centisecs
echo '1250' > /proc/sys/vm/dirty_writeback_centisecs
echo '2' > /proc/sys/vm/laptop_mode
echo '70' > /proc/sys/vm/swappiness

#---------------< STORAGE OPTIMIZATIONS >---------------#
# storageset_on=1
echo '1' > /sys/block/sda/queue/rotational
echo '1' > /sys/block/sda/queue/add_random
echo '2' > /sys/block/sda/queue/rq_affinity

#---------------< BATTERY PROTECTION >---------------#
# batteryprotect_on=0
# battery_litmit=90%
echo '100' > /sys/class/power_supply/battery/batt_full_capacity

#---------------< FREQS SETTINGS >---------------#
# frqset_on=1
# lit=1690 Mhz
echo '1690000' > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq
# big=1794 Mhz
echo '1794000' > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq

#---------------< VOLTAGE SETTINGS >---------------#
# voltset_on=1
# big_volt=-4
echo '-4' > /sys/power/percent_margin/big_margin_percent
# lit_volt=-4
echo '-4' > /sys/power/percent_margin/lit_margin_percent
# g3d_volt=-4
echo '-4' > /sys/power/percent_margin/g3d_margin_percent
# mif_volt=-4
echo '-4' > /sys/power/percent_margin/mif_margin_percent
# aud_volt=-4
echo '-4' > /sys/power/percent_margin/aud_margin_percent
# cam_volt=-4
echo '-4' > /sys/power/percent_margin/cam_margin_percent
# cp_volt=0
echo '0' > /sys/power/percent_margin/cp_margin_percent
# disp_volt=-4
echo '-4' > /sys/power/percent_margin/disp_margin_percent
# fsys0_volt=-4
echo '-4' > /sys/power/percent_margin/fsys0_margin_percent
# int_volt=-4
echo '-4' > /sys/power/percent_margin/int_margin_percent
# intcam_volt=-4
echo '-4' > /sys/power/percent_margin/intcam_margin_percent
# iva_volt=-4
echo '-4' > /sys/power/percent_margin/iva_margin_percent
# score_volt=-4
echo '-4' > /sys/power/percent_margin/score_margin_percent

#---------------< LIMIT BACKGROUND APP PROCESS (LABS) >---------------#
# limitprocess_on=0
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi

#---------------< FORCE DOZE (LABS) >---------------#
# forcedoze_on=0
dumpsys deviceidle unforce

# ======================================`,ksu.exec("rm -rf /data/data/me.weishu.kernelsu/app_webview"),ksu.exec("rm -rf /data/data/com.rifsxd.ksunext/app_webview"),ksu.exec("rm -rf /data/data/me.bmax.apatch/app_webview"),setTimeout(()=>{e.forEach(e=>{ksu.exec(e)}),ksu.exec(`cat > /data/adb/modules/battery-guru-optimizer-9810/boot-completed.sh << 'EOF'
${t}
EOF`)},2e3),setTimeout(()=>{ksu.exec("am force-stop me.weishu.kernelsu"),ksu.exec("am force-stop com.rifsxd.ksunext"),ksu.exec("am force-stop me.bmax.apatch")},2200)},1300)},700)}))}});