window.execSafe=function(e){try{let t=ksu.exec(e);return t?.then?t.catch(()=>""):Promise.resolve(t||"")}catch{return Promise.resolve("")}};let e=(e,t)=>{let o;return(...s)=>{clearTimeout(o),o=setTimeout(()=>e(...s),t)}},t=(e,t)=>{let o;return(...s)=>{o||(e(...s),o=!0,setTimeout(()=>o=!1,t))}};window.sleep=e=>new Promise(t=>setTimeout(t,e));let o={sections:null,links:null,container:null,topFade:null,bottomFade:null,nav:null,init(){this.sections=document.querySelectorAll(".tab-section"),this.links=document.querySelectorAll(".oui-tab-link"),this.container=document.querySelector(".container"),this.topFade=document.querySelector(".top-fade"),this.bottomFade=document.querySelector(".bottom-fade"),this.nav=document.querySelector(".oui-tab")}};window.showTab=function(e,t){t.classList.contains("oui-tab-link-active")||requestAnimationFrame(()=>{o.sections.forEach(e=>e.classList.remove("active"));let s=document.getElementById(e);s&&s.classList.add("active"),initSliders(),o.links.forEach(e=>{let o=e===t;e.classList.toggle("oui-tab-link-active",o);let s=e.querySelector(".outline"),i=e.querySelector(".filled"),n=e.querySelector(".oui-tab-text"),a=e.querySelector(".oui-tab-text-active");s&&i&&n&&a&&(n.style.display=o?"none":"block",a.style.display=o?"block":"none",s.style.display=o?"none":"inline-block",i.style.display=o?"inline-block":"none")}),o.container&&(o.container.scrollTop=0)})};let s={toggle:null,sections:null},i={toggle:null,bubble:null,text:null,sections:null},n={toggle:null,bubble:null,text:null,sections:null};function a(){let{toggle:e,sections:t}=s;if(!e)return;let o=e.checked;t.forEach(e=>e.classList.toggle("disabled",!o))}function r(){let{toggle:e,bubble:t,text:o,sections:s}=i;if(!e)return;let n=e.checked;requestAnimationFrame(()=>{o.textContent=n?"ON":"OFF",o.style.color=n?"var(--accent)":"var(--text)",t.style.transition||(t.style.transition="background 0.25s ease"),t.style.background=n?"var(--toggle-master-background)":"",s.forEach(e=>{e.classList.toggle("disabled",!n),n||(e.style.pointerEvents="none",e.querySelectorAll(":active").forEach(e=>e.blur()),requestAnimationFrame(()=>{e.style.pointerEvents=""}))})})}function c(){let{toggle:e,bubble:t,text:o,sections:s}=n;if(!e)return;let i=e.checked;requestAnimationFrame(()=>{o.textContent=i?"ON":"OFF",o.style.color=i?"var(--accent)":"var(--text)",t.style.transition||(t.style.transition="background 0.25s ease"),t.style.background=i?"var(--toggle-master-background)":"",s.forEach(e=>{e.classList.toggle("disabled",!i),i||(e.style.pointerEvents="none",e.querySelectorAll(":active").forEach(e=>e.blur()),requestAnimationFrame(()=>{e.style.pointerEvents=""}))})})}let l={rafId:null,setFade(e){let t=e?"1":"0";o.topFade.style.opacity=t,o.bottomFade.style.opacity=t},isScrollable:e=>e&&e.scrollHeight>e.clientHeight+1,findScrollableForSection(e){if(!e)return null;let t=e;for(;t&&t!==document.body&&(t=t.parentElement);){if(t.classList?.contains("container"))return t;let e=getComputedStyle(t);if(/(auto|scroll)/.test(e.overflowY))return t}let s=getComputedStyle(e);return/(auto|scroll)/.test(s.overflowY)?e:o.container||document.scrollingElement||document.documentElement},update(){this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{let e=document.querySelector("section.active");if(!e||e.hasAttribute("data-fade")&&"false"===e.getAttribute("data-fade"))return void this.setFade(!1);let t=this.findScrollableForSection(e);this.setFade(!!(t&&this.isScrollable(t)))})}};document.addEventListener("DOMContentLoaded",()=>{if(o.init(),[{cache:s,id:"batteryprotect_opt",selector:"#general .options",callback:a},{cache:i,id:"frq_on",bubbleId:"frq_toggle_master",textId:"frq_text",selector:"#freq .options",callback:r},{cache:n,id:"volt_on",bubbleId:"volt_toggle_master",textId:"volt_text",selector:"#voltage .options",callback:c}].forEach(e=>{let t=document.getElementById(e.id);t&&(e.cache.toggle=t,e.cache.sections=document.querySelectorAll(e.selector),e.bubbleId&&(e.cache.bubble=document.getElementById(e.bubbleId),e.cache.text=document.getElementById(e.textId)),t.addEventListener("change",e.callback),e.callback())}),o.topFade&&o.bottomFade){o.topFade.style.cssText="transition: opacity 200ms ease; opacity: 0",o.bottomFade.style.cssText="transition: opacity 200ms ease; opacity: 0",l.update();let s=showTab;showTab=function(e,t){s(e,t),setTimeout(()=>l.update(),40)};let i=new MutationObserver(t(()=>l.update(),100));document.querySelectorAll("section").forEach(e=>i.observe(e,{attributes:!0,attributeFilter:["class"]}));let n=new ResizeObserver(t(()=>l.update(),150));n.observe(document.documentElement),document.querySelectorAll(".container, section").forEach(e=>n.observe(e));let a=new MutationObserver(e(()=>l.update(),100));document.querySelectorAll(".container").forEach(e=>a.observe(e,{childList:!0,subtree:!0})),window.addEventListener("resize",e(()=>l.update(),150))}initSliders()}),function(){let e=o.container||document.querySelector(".container");if(!e)return;let s=e.querySelector(".container-scrollbar"),i=s?.querySelector(".container-scrollbar-thumb");if(!s||!i)return;let n,a=null;function r(){a=null;let t=e.scrollHeight,o=e.clientHeight;if(t<=o+1){s.style.display="none";return}s.style.display="block";let n=s.clientHeight,r=Math.max(o/t*n,24),c=n-r,l=Math.min(c,Math.max(0,e.scrollTop/(t-o||1)*c));i.style.height=r+"px",i.style.transform=`translateY(${l}px)`}function c(){a||(a=requestAnimationFrame(r))}let l=t(()=>{e.classList.add("show-scrollbar"),clearTimeout(n),n=setTimeout(()=>e.classList.remove("show-scrollbar"),1500)},50);e.addEventListener("scroll",()=>{c(),l()},{passive:!0}),window.addEventListener("resize",()=>c());let d=window.showTab;d&&(window.showTab=function(t,o){d(t,o),requestAnimationFrame(()=>{c(),e.classList.remove("show-scrollbar")})}),requestAnimationFrame(r)}();let d=document.querySelector(".container"),u=document.querySelectorAll(".tab-section"),p=new Map;u.forEach(e=>{let t=e.querySelector(".oui-viewing"),o=e.querySelector(".oui-header"),s=e.querySelector(".info-header");t&&o&&p.set(e,{viewing:t,header:o,infoviewing:s,compact:!1,infoCompact:!1})});let m=null,_=null;function v(e=!1){p.forEach(t=>{let{viewing:o,header:s,infoviewing:i}=t,n=o.getBoundingClientRect(),a=Math.max(0,Math.min(-n.top/n.height,1)),r=a>1e-4,c=a>.6;(e||t.compact!==r)&&(t.compact=r,s.classList.toggle("header-compact",r),o.classList.toggle("header-compact",r)),(e||t.infoCompact!==c)&&(t.infoCompact=c,s.classList.toggle("header-compact-infobtn",c),i?.classList.toggle("header-compact-infobtn",c))})}function h(e={}){let{effectClass:t="toggle-effect",roundedLogic:o=null,deltaThreshold:s=8,useDeltaY:i=!0,cooldown:n=300,onClickHandler:a=null}=e;return function(e){let r={pointerDown:!1,pointerInside:!1,cancelled:!1,moved:!1,animationTimeout:null,inactivityTimeout:null,startPos:0,lastActionTime:0},c=e.querySelector(".oui-inner")||e.closest(".oui-button, .oui-button-active, .oui-tab-inner")||e,l=()=>{clearTimeout(r.animationTimeout),clearTimeout(r.inactivityTimeout);let o=e.querySelector(`.${t}`);o&&(o.classList.remove("animate-in"),o.classList.add("animate-out"),c.classList.remove("pressed-effect"),c.classList.add("released-effect"),r.animationTimeout=setTimeout(()=>{c.classList.remove("released-effect"),o.remove()},550))},d=o=>{if(!r.pointerDown)return;clearTimeout(r.inactivityTimeout),r.inactivityTimeout=setTimeout(()=>{r.pointerDown&&!r.moved&&(r.cancelled=!0,l(),r.pointerInside=!1)},700);let n=Math.abs((o.touches?i?o.touches[0].clientY:o.touches[0].clientX:i?o.clientY:o.clientX)-r.startPos);if(!r.moved&&n>s){r.cancelled=!0,r.moved=!0,l(),r.pointerInside=!1,c.classList.remove("pressed-effect");return}if("button-effect"===t){let t=e.getBoundingClientRect(),s=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY;(s<t.left||s>t.right||i<t.top||i>t.bottom)&&r.pointerInside&&(r.cancelled=!0,l(),r.pointerInside=!1,c.classList.remove("pressed-effect"))}},u=()=>{if(!r.pointerDown)return;r.pointerDown=!1,document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",u);let t=Date.now();r.pointerInside&&!r.cancelled&&!r.moved&&t-r.lastActionTime>=n&&(r.lastActionTime=t,a?a(e):e.click()),l(),r.pointerInside=!1,r.cancelled=!1,r.moved=!1},p=s=>{Date.now()-r.lastActionTime<n?s.preventDefault():(r.pointerDown=!0,r.pointerInside=!0,r.cancelled=!1,r.moved=!1,r.startPos=s.touches?i?s.touches[0].clientY:s.touches[0].clientX:i?s.clientY:s.clientX,clearTimeout(r.animationTimeout),clearTimeout(r.inactivityTimeout),r.inactivityTimeout=setTimeout(()=>{r.pointerDown&&!r.moved&&(r.cancelled=!0,l(),r.pointerInside=!1)},700),c.classList.remove("released-effect"),c.classList.add("pressed-effect"),(()=>{if(r.cancelled)return;e.querySelector(`.${t}`)?.remove();let s=document.createElement("span");s.className=`${t} animate-in`,o&&o(e,s),e.appendChild(s),c.classList.add("pressed-effect")})(),document.addEventListener("pointermove",d,{passive:!0}),document.addEventListener("pointerup",u,{passive:!0}),document.addEventListener("touchmove",d,{passive:!0}),document.addEventListener("touchend",u,{passive:!0}))};e.addEventListener("click",e=>{r.pointerInside||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",p,{passive:!1}),e.addEventListener("pointerdown",p,{passive:!1})}}d.addEventListener("scroll",()=>{m||(m=requestAnimationFrame(()=>{v(!1),m=null})),clearTimeout(_),_=setTimeout(()=>v(!0),80)},{passive:!0}),v(!0);let y=h({effectClass:"toggle-effect",roundedLogic:(e,t)=>{if(null!==e.querySelector("#batteryprotect_opt"))t.classList.add("rounded-top");else{let o=[...e.parentElement.querySelectorAll(".oui-container-toggle, .oui-bubble-item, .oui-bubble-item2")],s=e===o[0],i=e===o[o.length-1];1===o.length?t.classList.add("rounded-all"):s?t.classList.add("rounded-top"):i&&t.classList.add("rounded-bottom")}},deltaThreshold:8,useDeltaY:!0,cooldown:300});document.querySelectorAll(".oui-container-toggle, .oui-bubble-item, .oui-bubble-item2").forEach(y);let f=h({effectClass:"button-effect",deltaThreshold:8,useDeltaY:!0,cooldown:300});document.querySelectorAll(".oui-button, .oui-button-active").forEach(f);let g=h({effectClass:"tab-button-effect",roundedLogic:(e,t)=>t.classList.add("rounded-all"),deltaThreshold:8,useDeltaY:!1,cooldown:300});document.querySelectorAll(".oui-tab-link").forEach(g);let b=h({effectClass:"dialog-button-effect",roundedLogic:(e,t)=>t.classList.add("rounded-all"),deltaThreshold:8,useDeltaY:!0,cooldown:0});function w(){m||(m=requestAnimationFrame(()=>{m=null;let e=window.__popupInstance,t=window.__popupPositioner,o=window.__getActiveTrigger?.();e&&t&&e.classList.contains("show")&&o&&t(o)}))}async function E(){try{let e=await execSafe("pm list packages | grep com.guru.batteryoptimizer");return e&&e.toString().trim().includes("com.guru.batteryoptimizer")}catch{return!1}}document.querySelectorAll(".oui-dialog-action-button").forEach(b),document.querySelectorAll(".oui-overlay-bubble-info, .oui-overlay-bubble-info-header").forEach(e=>{let t={pointerDown:!1,pointerInside:!1,cancelled:!1,moved:!1,animationTimeout:null,inactivityTimeout:null,startY:0,dialogOpened:!1},o=()=>{clearTimeout(t.animationTimeout),clearTimeout(t.inactivityTimeout);let o=e.querySelector(".oui-icon-info-effect");o&&(o.classList.remove("animate-in"),o.classList.add("animate-out"),e.classList.remove("pressed-effect"),e.classList.add("released-effect"),t.animationTimeout=setTimeout(()=>{e.classList.remove("released-effect"),o.remove()},550))},s=s=>{if(!t.pointerDown)return;clearTimeout(t.inactivityTimeout),t.inactivityTimeout=setTimeout(()=>{t.pointerDown&&!t.moved&&(t.cancelled=!0,o(),t.pointerInside=!1)},700);let i=Math.abs((s.touches?s.touches[0].clientY:s.clientY)-t.startY);!t.moved&&i>8&&(t.cancelled=!0,t.moved=!0,o(),t.pointerInside=!1,e.classList.remove("pressed-effect"))},i=()=>{t.pointerDown&&(t.pointerDown=!1,document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",i),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",i),!t.pointerInside||t.cancelled||t.moved||t.dialogOpened||(t.dialogOpened=!0,e.click(),setTimeout(()=>t.dialogOpened=!1,50)),o(),t.pointerInside=!1,t.cancelled=!1,t.moved=!1)},n=n=>{t.pointerDown=!0,t.pointerInside=!0,t.cancelled=!1,t.moved=!1,t.startY=n.touches?n.touches[0].clientY:n.clientY,clearTimeout(t.animationTimeout),clearTimeout(t.inactivityTimeout),t.inactivityTimeout=setTimeout(()=>{t.pointerDown&&!t.moved&&(t.cancelled=!0,o(),t.pointerInside=!1)},700),e.classList.remove("released-effect"),e.classList.add("pressed-effect"),(()=>{if(t.cancelled)return;e.querySelector(".oui-icon-info-effect")?.remove();let o=document.createElement("span");o.className="oui-icon-info-effect animate-in rounded-all",e.appendChild(o),e.classList.add("pressed-effect"),e.classList.remove("released-effect")})(),document.addEventListener("pointermove",s,{passive:!0}),document.addEventListener("pointerup",i,{passive:!0}),document.addEventListener("touchmove",s,{passive:!0}),document.addEventListener("touchend",i,{passive:!0})};e.addEventListener("click",e=>{t.pointerInside||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",n,{passive:!1}),e.addEventListener("pointerdown",n,{passive:!1})}),document.querySelector(".container").addEventListener("scroll",w,{passive:!0}),window.addEventListener("resize",w),function(){let e=null,t=document.getElementById("popup-menu");if(t&&t.parentElement!==document.body&&document.body.appendChild(t),window.__popupInstance=t,window.__popupPositioner=h,window.__getActiveTrigger=()=>e,!t)return;let o={content:t.querySelector(".popup-content"),optionsList:document.getElementById("popup-options")},s={popupOpen:!1,optionsEnabled:!0,pointerDownOutside:!1},i=0,n=document.querySelector(".container"),a=t.querySelector(".popup-scrollbar"),r=t.querySelector(".popup-scrollbar-thumb"),c=null,l=()=>{r.classList.add("show"),clearTimeout(c),c=setTimeout(d,1500)},d=()=>r.classList.remove("show");function u(){let e=o.optionsList;if(e.scrollHeight<=e.clientHeight){a.style.display="none";return}a.style.display="block";let t=e.clientHeight/e.scrollHeight,s=Math.max(18,e.clientHeight*t),i=e.scrollTop/(e.scrollHeight-e.clientHeight),n=a.clientHeight-s;r.style.height=s+"px",r.style.top=n*i+"px"}o.optionsList.addEventListener("scroll",()=>{u(),_(),l()}),window.addEventListener("resize",u);let p=t.querySelector(".popup-fade-top"),m=t.querySelector(".popup-fade-bottom");function _(){let e=o.optionsList;if(!(e.scrollHeight>e.clientHeight+1)){p.classList.remove("show"),m.classList.remove("show");return}let t=e.scrollTop<=3,s=e.scrollTop+e.clientHeight>=e.scrollHeight-2;p.classList.toggle("show",!t),m.classList.toggle("show",!s)}function v(){t.classList.remove("show"),s.popupOpen=!1,s.optionsEnabled=!0,e=null,n&&(n.style.overflow="auto",n.scrollTop=i),document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),r.classList.remove("show"),clearTimeout(c)}function h(e){let o,s=e.getBoundingClientRect(),i=t.offsetHeight,n=t.offsetWidth,a=window.innerHeight,r=window.innerWidth,c=.025*r,l=s.right+8;l+n>r-c&&(l=r-n-c);let d=a-s.bottom,u=s.top;d>=i?(o=s.top)+i>a-.15*a&&u>=i&&(o=s.bottom-i):u>=i?(o=s.bottom-i)<.2*a&&d>=i&&(o=s.top):o=d>u?s.top:s.bottom-i,t.style.top=o+"px",t.style.left=l+"px"}function y(e,t,i,n){o.optionsList.innerHTML="",e.forEach((a,r)=>{let c,l,d,u,p,m=document.createElement("li");m.className="oui-bubble-item";let _="";if(1===e.length?_="rounded-all":0===r?_="rounded-top":r===e.length-1&&(_="rounded-bottom"),m.innerHTML=`
        <div class="popup-inner">
          <span class="popup-text">${a}</span>
        </div>
        <span class="popup-effect ${_}"></span>
      `,a===t){m.classList.add("selected");let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("class","popup-icon-selected checkmark"),e.innerHTML='<path style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:3" d="m5 12 5 5 9-9"/>',m.querySelector(".popup-inner").appendChild(e)}let h=m.querySelector(".popup-inner"),y=m.querySelector(".popup-effect");c={down:!1,inside:!1,cancelled:!1,moved:!1,animTimeout:null,inactTimeout:null,startY:0,lastTime:0},l=()=>{clearTimeout(c.animTimeout),clearTimeout(c.inactTimeout),y.classList.contains("animate-in")&&(y.classList.remove("animate-in"),y.classList.add("animate-out"),h.classList.remove("pressed-effect"),h.classList.add("released-effect"),c.animTimeout=setTimeout(()=>{y.classList.remove("animate-out"),h.classList.remove("released-effect")},550))},d=e=>{if(!c.down)return;clearTimeout(c.inactTimeout),c.inactTimeout=setTimeout(()=>{c.down&&!c.moved&&(c.cancelled=!0,l(),c.inside=!1)},700);let t=Math.abs((e.touches?e.touches[0].clientY:e.clientY)-c.startY);if(!c.moved&&t>8){c.cancelled=!0,c.moved=!0,l(),c.inside=!1,h.classList.remove("pressed-effect");return}let o=m.getBoundingClientRect(),s=e.touches?e.touches[0].clientX:e.clientX,i=e.touches?e.touches[0].clientY:e.clientY;(s<o.left||s>o.right||i<o.top||i>o.bottom)&&c.inside&&(c.cancelled=!0,l(),c.inside=!1,h.classList.remove("pressed-effect"))},u=()=>{if(!c.down)return;c.down=!1,document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",u);let e=Date.now();c.inside&&!c.cancelled&&!c.moved&&e-c.lastTime>=200&&(c.lastTime=e,s.optionsEnabled&&n&&(v(),n(a,i))),l(),c.inside=!1,c.cancelled=!1,c.moved=!1},p=e=>{if(!s.optionsEnabled){e.preventDefault(),e.stopPropagation();return}Date.now()-c.lastTime<200?e.preventDefault():(c.down=!0,c.inside=!0,c.cancelled=!1,c.moved=!1,c.startY=e.touches?e.touches[0].clientY:e.clientY,clearTimeout(c.animTimeout),clearTimeout(c.inactTimeout),c.inactTimeout=setTimeout(()=>{c.down&&!c.moved&&(c.cancelled=!0,l(),c.inside=!1)},700),h.classList.remove("released-effect"),c.cancelled||(y.classList.remove("animate-out"),y.classList.add("animate-in"),h.classList.add("pressed-effect"),h.classList.remove("released-effect")),document.addEventListener("pointermove",d,{passive:!0}),document.addEventListener("pointerup",u,{passive:!0}),document.addEventListener("touchmove",d,{passive:!0}),document.addEventListener("touchend",u,{passive:!0}))},m.addEventListener("click",e=>{c.inside||(e.preventDefault(),e.stopPropagation())},!0),m.addEventListener("touchstart",p,{passive:!1}),m.addEventListener("pointerdown",p,{passive:!1}),o.optionsList.appendChild(m)}),requestAnimationFrame(()=>{!function(){let e=o.optionsList.children;if(!e.length)return;let t=e[0].offsetHeight;e.length>4.55?(o.optionsList.style.maxHeight=4.55*t+"px",o.optionsList.style.overflowY="scroll"):(o.optionsList.style.maxHeight="none",o.optionsList.style.overflowY="hidden")}(),u(),_()})}document.addEventListener("pointerdown",e=>{s.pointerDownOutside=!t.contains(e.target)},!0),document.addEventListener("pointerup",e=>{s.popupOpen&&s.pointerDownOutside&&!t.contains(e.target)&&(v(),e.preventDefault(),e.stopPropagation())},!0),["click","pointerdown","pointerup","touchstart","touchend"].forEach(e=>{document.addEventListener(e,e=>{s.popupOpen&&!t.contains(e.target)&&(e.preventDefault(),e.stopPropagation())},{capture:!0,passive:!1})});window.initPopup={openPopup:function(a,r){e=a;let c=JSON.parse(a.dataset.options),d=a.dataset.selected;t.classList.contains("show")?(h(a),setTimeout(()=>{y(c,d,a,r),o.optionsList.scrollTop=0,u(),_()},150)):(y(c,d,a,r),requestAnimationFrame(()=>{o.optionsList.scrollTop=0,t.classList.add("show"),s.popupOpen=!0,n&&(i=n.scrollTop,n.style.overflow="hidden"),requestAnimationFrame(()=>{h(a),u(),function(){let t=o.optionsList,s=e?.dataset?.selected;if(!s){t.scrollTop=0,u();return}let i=t.querySelectorAll("li"),n=null;if(i.forEach(e=>{e.textContent.trim()===s.trim()&&(n=e)}),!n){t.scrollTop=0,u();return}let a=n.offsetTop,r=n.offsetHeight,c=t.clientHeight;t.scrollTop=Math.max(0,a-c/3.169+r/2),u(),_(),l()}(),_(),l()})}))},closePopup:v,disableOptionsTemporarily:(e=300)=>{s.optionsEnabled=!1,setTimeout(()=>s.optionsEnabled=!0,e)}}}(),window.initSliders=function(){let e,t,o=["big_volt","lit_volt","g3d_volt","mif_volt","aud_volt","cam_volt","cp_volt","disp_volt","fsys0_volt","int_volt","intcam_volt","iva_volt","score_volt"],s=["batt_level"],i=new Map,n=new Map,a=new Map,r=null,c=new Map;function l(e){if(!c.has(e)){let t=document.getElementById(e);if(!t)return null;c.set(e,{slider:t,parent:t.parentElement,dotsContainer:t.nextElementSibling,valuesContainer:t.parentElement.querySelector(".slider-values, .batt-slider-values")})}return c.get(e)}function d(e){e.forEach(e=>{let t=l(e);if(!t?.slider||!t.dotsContainer)return;let o=t.slider.max-t.slider.min,s=t.slider.offsetWidth-15,i=document.createDocumentFragment();for(let e=0;e<=o;e++){let t=document.createElement("span");t.style.left=`${7.5+e/o*s+2}px`,i.appendChild(t)}t.dotsContainer.innerHTML="",t.dotsContainer.appendChild(i)})}function u(e){let t=l(e);if(!t?.slider||!t.valuesContainer)return;let o=t.slider.offsetWidth-15,s=t.valuesContainer.querySelectorAll("span");if(3!==s.length)return;let i=[7.5,7.5+.5*o+1,7.5+o];s.forEach((e,t)=>{e.style.cssText=`position: absolute; top: 0; transform: translateX(-50%); left: ${i[t]}px`})}let p=(e,t)=>{let o=e.get(t);o&&(clearTimeout(o),e.delete(t))},m=(e,t,o,s)=>{p(e,t),e.set(t,setTimeout(o,s))};function _(e,t=!1){let o=t?"batt-slider-value-float":"slider-value-float",s=l(e.id),i=s.parent.querySelector(`.${o}`);i||((i=document.createElement("div")).className=o,i.innerHTML=`<span class="${t?"slider-bat-value-text":"slider-value-text"}"></span>`,s.parent.appendChild(i));let n=i.firstElementChild,a=e.valueAsNumber;n.textContent=t?`${80+a}%`:0===a?"0":`-${a}`;let r=e.offsetWidth-15,c=(a-e.min)/(e.max-e.min);i.style.left=`${7.5+r*c}px`}function v(e,t,o=!1){let s=l(e.id).parent.querySelector(`.${o?"batt-slider-value-float":"slider-value-float"}`);s?.classList.toggle("visible",t)}function h(e,t=null){r||(r=document.querySelectorAll("button, .oui-container-toggle, .popup-trigger, .oui-tab-link, .oui-overlay-bubble-info"));let i=e?"":"none";r.forEach(e=>e.style.pointerEvents=i),[...o,...s].forEach(e=>{let o=l(e);o?.slider&&o.slider!==t&&(o.slider.style.pointerEvents=i)})}function y(e,t=!1){let a=t?e=>p(n,e):e=>p(i,e),r=t?(e,t,o)=>m(n,e,t,o):(e,t,o)=>m(i,e,t,o);if(e.forEach(e=>{let o=l(e);if(!o?.slider)return;let s=o.slider;_(s,t);let i=()=>{h(!0),r(e,()=>v(s,!1,t),270)};s.addEventListener("pointerdown",()=>{a(e),h(!1,s),_(s,t),v(s,!0,t)},{passive:!1}),s.addEventListener("pointerup",i,{passive:!1}),s.addEventListener("pointercancel",i),s.addEventListener("lostpointercapture",i),s.addEventListener("input",()=>_(s,t),{passive:!0})}),!window._sliderGlobalListenersAdded){if(!window._sliderFailsafeAdded){let e=()=>{h(!0),[...o,...s].forEach(e=>{let t=l(e)?.slider;t&&t.classList.remove("active-thumb")})};window.addEventListener("blur",e),window.addEventListener("visibilitychange",()=>{document.hidden&&e()}),window.addEventListener("pointerup",e),window.addEventListener("pointercancel",e),window._sliderFailsafeAdded=!0}window.addEventListener("mouseup",()=>{h(!0),[...o,...s].forEach(e=>{let t=l(e);if(t?.slider){let o=s.includes(e);(o?(e,t,o)=>m(n,e,t,o):(e,t,o)=>m(i,e,t,o))(e,()=>v(t.slider,!1,o),270)}})},{passive:!0}),window._sliderGlobalListenersAdded=!0}}function f(e,t=!1){let o=t?e=>p(n,e):e=>p(i,e),s=t?(e,t,o)=>m(n,e,t,o):(e,t,o)=>m(i,e,t,o);e.forEach(e=>{let i=l(e);if(!i?.slider)return;let n=i.slider,r={down:!1,startX:0,startValue:0,moved:!1,initialValue:0,shouldFire:!1,rafId:null,hasDragged:!1};n.addEventListener("pointerdown",s=>{let i=Date.now();if(i-(a.get(e)||0)<100)return void s.preventDefault();a.set(e,i),o(e),r.down=!0,r.moved=!1,r.hasDragged=!1,r.shouldFire=!1,r.initialValue=n.valueAsNumber;let c=n.getBoundingClientRect(),l=s.clientX-c.left,d=Number(n.min)||0,u=Number(n.max)||100,p=u-d,m=d+l/c.width*p;n.value=Math.round(Math.min(u,Math.max(d,m))),_(n,t),n.valueAsNumber!==r.initialValue&&(r.shouldFire=!0),r.startX=s.clientX,r.startValue=n.valueAsNumber;try{n.setPointerCapture(s.pointerId)}catch{}v(n,!0,t),n.classList.add("active-thumb"),s.preventDefault()},{passive:!1}),n.addEventListener("pointermove",e=>{if(!r.down)return;e.preventDefault();let o=e.clientX-r.startX;Math.abs(o)>5&&(r.moved=!0,r.hasDragged=!0),r.rafId&&cancelAnimationFrame(r.rafId),r.rafId=requestAnimationFrame(()=>{let e=n.clientWidth,s=Number(n.min)||0,i=Number(n.max)||100,a=r.startValue+o/e*(i-s);n.value=Math.round(a=Math.min(i,Math.max(s,a))),_(n,t),r.shouldFire=!0})},{passive:!1}),n.addEventListener("pointerup",o=>{r.down&&(r.down=!1,r.rafId&&(cancelAnimationFrame(r.rafId),r.rafId=null),n.releasePointerCapture(o.pointerId),r.shouldFire&&n.valueAsNumber!==r.initialValue&&n.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})),s(e,()=>v(n,!1,t),280),n.classList.remove("active-thumb"))},{passive:!1}),n.addEventListener("pointercancel",o=>{r.down=!1,r.rafId&&(cancelAnimationFrame(r.rafId),r.rafId=null),n.releasePointerCapture(o.pointerId),s(e,()=>v(n,!1,t),280),n.classList.remove("active-thumb")})})}d([...o,...s]),[...o,...s].forEach(e=>u(e)),y(o,!1),y(s,!0),f(o,!1),f(s,!0),window.addEventListener("resize",()=>{t&&cancelAnimationFrame(t),clearTimeout(e),t=requestAnimationFrame(()=>{[...o,...s].forEach(e=>{let t=l(e);t?.slider&&_(t.slider,s.includes(e))})}),e=setTimeout(()=>{d([...o,...s]),[...o,...s].forEach(e=>u(e))},150)},{passive:!0})},document.addEventListener("DOMContentLoaded",()=>{let e=(e,t)=>{let o;return(...s)=>{o||(e(...s),o=!0,setTimeout(()=>o=!1,t))}},t={mask:document.querySelector(".oui-dialog-mask"),body:document.body,doc:document.documentElement,buttons:null,dialogs:document.querySelectorAll(".oui-dialog")},o=null,s=!1,i=0,n=new WeakMap,a=new WeakMap,r=e=>{let t=e.target;for(;t;){let e=window.getComputedStyle(t);if("auto"===e.overflowY||"scroll"===e.overflowY||t.classList?.contains("oui-dialog-description"))return;if(t=t.parentElement,t?.classList?.contains("oui-dialog"))break}e.preventDefault()},c=e=>i=e.touches[0].clientY,l=e=>{if(!o)return;let t=e.target,s=!1;for(;t&&t!==o;){let e=window.getComputedStyle(t);if(("auto"===e.overflowY||"scroll"===e.overflowY)&&t.scrollHeight>t.clientHeight){s=!0;break}t=t.parentElement}if(s)return;let{scrollTop:n,scrollHeight:a,offsetHeight:r}=o,c=e.touches[0].clientY,l=c>i,d=c<i;(0===n&&l||n+r>=a&&d)&&e.preventDefault(),i=c},d=e=>{s=!e,requestAnimationFrame(()=>{t.buttons||(t.buttons=document.querySelectorAll(".oui-dialog-action-button, .close-dialog-btn, .reset-dialog-btn")),t.buttons.forEach(t=>t.style.pointerEvents=e?"":"none"),e?(t.body.classList.remove("app-blocked-body"),t.doc.classList.remove("app-blocked")):(t.body.classList.add("app-blocked-body"),t.doc.classList.add("app-blocked"))})},u=e=>{let t=document.getElementById("resetting_app_dialog");if(s||t?.classList.contains("show"))return e.preventDefault(),e.stopPropagation(),!1;m()},p=(e,s={mask:!0,maskType:"default"})=>{d(!1),e.querySelectorAll('.oui-dialog-description, [style*="overflow-y: auto"], [style*="overflow-y: scroll"]').forEach(e=>e.scrollTop=0),e.classList.add("show"),s.mask&&("warn"!==s.maskType&&t.mask.addEventListener("click",u,{passive:!1}),t.mask.classList.add("show")),o=e,t.body.classList.add("no-scroll");let i=g(e);i?.reset(),i?.show(),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchstart",c,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1}),setTimeout(()=>d(!0),275)},m=()=>{if(!o)return;d(!1),o.classList.remove("show"),o.classList.add("hide"),t.mask.classList.contains("show")&&(t.mask.classList.remove("show"),t.mask.removeEventListener("click",u)),t.body.classList.remove("no-scroll"),document.removeEventListener("touchmove",r),document.removeEventListener("touchstart",c),document.removeEventListener("touchmove",l);let e=t=>{t.target===o&&o.classList.contains("hide")&&(o.removeEventListener("transitionend",e),setTimeout(()=>{o.classList.remove("hide"),o=null,d(!0)},10))};o.addEventListener("transitionend",e)};window.openDialog=p,window.closeDialog=m;let _=(t,o)=>{let s=n.get(t)||(t=>{if(!t)return null;if(n.has(t))return n.get(t);let o=t.querySelector(".oui-dialog-description");if(!o)return null;let s=t.querySelector(".dialog-top-fade"),i=t.querySelector(".dialog-bottom-fade");s||((s=document.createElement("div")).className="dialog-top-fade",s.style.opacity="0",t.appendChild(s)),i||((i=document.createElement("div")).className="dialog-bottom-fade",i.style.opacity="0",t.appendChild(i));let a=e(()=>{requestAnimationFrame(()=>{let e=o.getBoundingClientRect(),n=t.getBoundingClientRect();s.style.top=`${e.top-n.top}px`,i.style.bottom=`${n.bottom-e.bottom}px`})},100);if(a(),"ResizeObserver"in window){let e=new ResizeObserver(a);e.observe(o),e.observe(t)}let r={desc:o,top:s,bottom:i};return n.set(t,r),r})(t);if(!s)return;let i=o?"1":"0";s.top.style.opacity=i,s.bottom.style.opacity=i},v=null,h=()=>{v&&cancelAnimationFrame(v),v=requestAnimationFrame(()=>{let e=document.querySelector(".oui-dialog.show");if(!e)return _(e,!1);let t=e.querySelector(".oui-dialog-description")||e;_(e,t?.scrollHeight>t?.clientHeight+1)})};document.querySelectorAll("[data-dialog-target]").forEach(e=>{e.addEventListener("click",t=>{if(s)return t.preventDefault(),t.stopPropagation(),!1;let o=e.getAttribute("data-dialog-target"),i=document.getElementById(o),n=e.querySelector('input[type="checkbox"].toggle');i?.querySelector(".oui-loading")&&window.resetLoadingAnimation&&window.resetLoadingAnimation(i.querySelector(".oui-loading")),n?setTimeout(()=>n.checked&&i&&p(i),0):i&&p(i)})}),document.querySelectorAll(".close-dialog-btn").forEach(e=>{e.addEventListener("click",e=>{if(s)return e.preventDefault(),e.stopPropagation(),!1;m()})}),h();let y=new MutationObserver(e(h,100));if(t.dialogs.forEach(e=>y.observe(e,{attributes:!0,attributeFilter:["class"]})),"ResizeObserver"in window){let o=new ResizeObserver(e(h,150));o.observe(t.doc),document.querySelectorAll(".oui-dialog, .oui-dialog-description").forEach(e=>o.observe(e))}let f=new MutationObserver(e(h,100));document.querySelectorAll(".oui-dialog .oui-dialog-description").forEach(e=>f.observe(e,{childList:!0,subtree:!0})),window.addEventListener("resize",e(h,150));let g=e=>{if(!e)return null;if(a.has(e))return a.get(e);let t=e.querySelector(".oui-dialog-description"),o=e.querySelector(".dialog-scrollbar"),s=e.querySelector(".dialog-scrollbar-thumb");if(!t||!o||!s)return null;let i=null,n=!1,r=()=>{n=!1;let e=t.scrollHeight,i=t.clientHeight;if(e<=i+1)return void o.classList.remove("show");let a=t.scrollTop,r=o.clientHeight,c=Math.max(i/e*r,24);s.style.height=c+"px",s.style.transform=`translateY(${a/(e-i)*(r-c)}px)`},c=()=>{n||(n=!0,requestAnimationFrame(r))};if(t.addEventListener("scroll",()=>{c(),o.classList.add("show"),clearTimeout(i),i=setTimeout(()=>o.classList.remove("show"),1500)},{passive:!0}),"ResizeObserver"in window){let o=new ResizeObserver(()=>c());o.observe(t),o.observe(e)}let l={reset(){t.scrollTop=0,o.classList.remove("show"),c()},show(){o.classList.add("show"),clearTimeout(i),i=setTimeout(()=>o.classList.remove("show"),1500)}};return a.set(e,l),c(),l}}),async function(){if(await E())return;let e="/data/adb/modules/battery-guru-optimizer-9810/boot-completed.sh",t=`# BATTERY GURU OPTIMIZER (ALL SETTINGS)
# Developed by @EliezerB03

#!/system/bin/sh

# changelog=1
# ============== ALL OPTIMIZATIONS  ============== #

#---------------< BATTERY OPTIMIZATIONS ON APPS >---------------#
# forceappsbattopt_on=1
settings put global forced_app_standby_enabled 1

#---------------< CPU HOTPLUG OPTIMIZATIONS >---------------#
# hotplugset_on=1
echo '0' > /sys/power/cpuhotplug/governor/user_mode
echo '0' > /sys/power/cpuhotplug/governor/enabled

#---------------< CPU POWER EFFICIENT >---------------#
# powereffiset_on=1
echo 'Y' > /sys/module/workqueue/parameters/power_efficient

#---------------< THERMAL OPTIMIZATIONS >---------------#
# thermalset_on=1
system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0
chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms
echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres
echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres
chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus
pm disable com.google.android.gms/.chimera.GmsIntentOperationService

#---------------< GPU BOOST >---------------#
# gpuboost_on=0
echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor

#---------------< SWAP OPTIMIZATIONS >---------------#
# swapset_on=1
echo '10' > /proc/sys/vm/dirty_ratio
echo '3' > /proc/sys/vm/dirty_background_ratio
echo '2500' > /proc/sys/vm/dirty_expire_centisecs
echo '1250' > /proc/sys/vm/dirty_writeback_centisecs
echo '2' > /proc/sys/vm/laptop_mode
echo '70' > /proc/sys/vm/swappiness

#---------------< STORAGE OPTIMIZATIONS >---------------#
# storageset_on=1
echo '1' > /sys/block/sda/queue/rotational
echo '1' > /sys/block/sda/queue/add_random
echo '2' > /sys/block/sda/queue/rq_affinity

#---------------< BATTERY PROTECTION >---------------#
# batteryprotect_on=0
# battery_litmit=90%
echo '100' > /sys/class/power_supply/battery/batt_full_capacity

#---------------< FREQS SETTINGS >---------------#
# frqset_on=1
# lit=1690
echo '1690000' > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq
# big=1690
echo '1690000' > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq

#---------------< VOLTAGE SETTINGS >---------------#
# voltset_on=1
# big_volt=-4
echo '-4' > /sys/power/percent_margin/big_margin_percent
# lit_volt=-4
echo '-4' > /sys/power/percent_margin/lit_margin_percent
# g3d_volt=-4
echo '-4' > /sys/power/percent_margin/g3d_margin_percent
# mif_volt=-4
echo '-4' > /sys/power/percent_margin/mif_margin_percent
# aud_volt=-4
echo '-4' > /sys/power/percent_margin/aud_margin_percent
# cam_volt=-4
echo '-4' > /sys/power/percent_margin/cam_margin_percent
# cp_volt=0
echo '0' > /sys/power/percent_margin/cp_margin_percent
# disp_volt=-4
echo '-4' > /sys/power/percent_margin/disp_margin_percent
# fsys0_volt=-4
echo '-4' > /sys/power/percent_margin/fsys0_margin_percent
# int_volt=-4
echo '-4' > /sys/power/percent_margin/int_margin_percent
# intcam_volt=-4
echo '-4' > /sys/power/percent_margin/intcam_margin_percent
# iva_volt=-4
echo '-4' > /sys/power/percent_margin/iva_margin_percent
# score_volt=-4
echo '-4' > /sys/power/percent_margin/score_margin_percent

#---------------< LIMIT BACKGROUND APP PROCESS (LABS) >---------------#
# limitprocess_on=0
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi

#---------------< FORCE DOZE (LABS) >---------------#
# forcedoze_on=0
dumpsys deviceidle unforce

# ======================================`;window.commandFile=e,window.scriptContent=t;let o=(t,o)=>`sed -i "s|echo ['\\"][^'\\"]*['\\"] > ${t}|echo '${o}' > ${t}|g" ${e}; `,s={toggles:[{id:"forcebattapps_opt",marker:"forceappsbattopt_on",defaultState:!0,blockActive:`# forceappsbattopt_on=1
settings put global forced_app_standby_enabled 1`,blockInactive:`# forceappsbattopt_on=0
settings put global forced_app_standby_enabled 0`,liveCommandActive:"settings put global forced_app_standby_enabled 1",liveCommandInactive:"settings put global forced_app_standby_enabled 0"},{id:"cpu_hotplug",marker:"hotplugset_on",defaultState:!0,paths:[{path:"/sys/power/cpuhotplug/governor/user_mode",active:"0",inactive:"1"},{path:"/sys/power/cpuhotplug/governor/enabled",active:"0",inactive:"1"}],liveCommandActive:"echo '0' > /sys/power/cpuhotplug/governor/user_mode && echo '0' > /sys/power/cpuhotplug/governor/enabled",liveCommandInactive:"echo '1' > /sys/power/cpuhotplug/governor/user_mode && echo '1' > /sys/power/cpuhotplug/governor/enabled"},{id:"power_eff",marker:"powereffiset_on",defaultState:!0,paths:[{path:"/sys/module/workqueue/parameters/power_efficient",active:"Y",inactive:"N"}],liveCommandActive:"echo 'Y' > /sys/module/workqueue/parameters/power_efficient",liveCommandInactive:"echo 'N' > /sys/module/workqueue/parameters/power_efficient"},{id:"thermal_opt",marker:"thermalset_on",defaultState:!0,blockActive:`# thermalset_on=1
system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0
chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms
echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres
echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres
chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus
pm disable com.google.android.gms/.chimera.GmsIntentOperationService`,blockInactive:`# thermalset_on=0
system_table_unset activity_manager_constants
pm enable com.google.android.gms/.chimera.GmsIntentOperationService`,liveCommandActive:"system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0 && chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus && chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus && echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus && echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus && echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres && echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres && echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres && echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms && echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus && echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus && echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres && echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres && echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms && echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres && chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus && pm disable com.google.android.gms/.chimera.GmsIntentOperationService",liveCommandInactive:"system_table_unset activity_manager_constants && pm enable com.google.android.gms/.chimera.GmsIntentOperationService"},{id:"gpuboost_opt",marker:"gpuboost_on",defaultState:!1,paths:[{path:"/sys/devices/platform/17500000.mali/dvfs_governor",active:"3",inactive:"1"}],liveCommandActive:"echo '3' > /sys/devices/platform/17500000.mali/dvfs_governor",liveCommandInactive:"echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor"},{id:"swap_opt",marker:"swapset_on",defaultState:!0,paths:[{path:"/proc/sys/vm/dirty_ratio",active:"10",inactive:"0"},{path:"/proc/sys/vm/dirty_background_ratio",active:"3",inactive:"0"},{path:"/proc/sys/vm/dirty_expire_centisecs",active:"2500",inactive:"200"},{path:"/proc/sys/vm/dirty_writeback_centisecs",active:"1250",inactive:"500"},{path:"/proc/sys/vm/laptop_mode",active:"2",inactive:"0"},{path:"/proc/sys/vm/swappiness",active:"70",inactive:"100"}]},{id:"storage_opt",marker:"storageset_on",defaultState:!0,paths:[{path:"/sys/block/sda/queue/rotational",active:"1",inactive:"0"},{path:"/sys/block/sda/queue/add_random",active:"1",inactive:"0"},{path:"/sys/block/sda/queue/rq_affinity",active:"2",inactive:"1"}]},{id:"batteryprotect_opt",marker:"batteryprotect_on",defaultState:!1,paths:[{path:"/sys/class/power_supply/battery/batt_full_capacity",active:null,inactive:"100"}],dynamicPaths:[{path:"/sys/class/power_supply/battery/batt_full_capacity",dependsOn:"batt_level",transform:e=>e+80}]},{id:"frq_on",marker:"frqset_on",defaultState:!0,paths:[{path:"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq",active:null,inactive:"1794000"},{path:"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",active:null,inactive:"2704000"}],dynamicPaths:[{path:"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq",dependsOn:"frq_little",transform:e=>1e3*parseInt(e)},{path:"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",dependsOn:"frq_big",transform:e=>1e3*parseInt(e)}]},{id:"volt_on",marker:"voltset_on",defaultState:!0,paths:[{path:"/sys/power/percent_margin/big_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/lit_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/g3d_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/mif_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/aud_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/cam_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/cp_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/disp_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/fsys0_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/int_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/intcam_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/iva_margin_percent",active:null,inactive:"0"},{path:"/sys/power/percent_margin/score_margin_percent",active:null,inactive:"0"}],dynamicPaths:[{path:"/sys/power/percent_margin/big_margin_percent",dependsOn:"big_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/lit_margin_percent",dependsOn:"lit_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/g3d_margin_percent",dependsOn:"g3d_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/mif_margin_percent",dependsOn:"mif_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/aud_margin_percent",dependsOn:"aud_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/cam_margin_percent",dependsOn:"cam_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/cp_margin_percent",dependsOn:"cp_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/disp_margin_percent",dependsOn:"disp_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/fsys0_margin_percent",dependsOn:"fsys0_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/int_margin_percent",dependsOn:"int_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/intcam_margin_percent",dependsOn:"intcam_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/iva_margin_percent",dependsOn:"iva_volt",transform:e=>-Math.round(e)},{path:"/sys/power/percent_margin/score_margin_percent",dependsOn:"score_volt",transform:e=>-Math.round(e)}]},{id:"limitbackground_opt",marker:"limitprocess_on",defaultState:!1,blockActive:`# limitprocess_on=1
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi`,blockInactive:`# limitprocess_on=0
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi`,liveCommandActive:"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi",liveCommandInactive:"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi"},{id:"forcedoze_opt",marker:"forcedoze_on",defaultState:!1,blockActive:`# forcedoze_on=1
dumpsys deviceidle force-idle`,blockInactive:`# forcedoze_on=0
dumpsys deviceidle unforce`,liveCommandActive:"dumpsys deviceidle force-idle",liveCommandInactive:"dumpsys deviceidle unforce"}],popups:[{id:"frq_little",path:"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq",marker:"lit",defaultValue:"1690 Mhz",options:[],masterToggle:"frq_on",inactiveValue:1794e3,transformToPath:e=>1e3*parseInt(e),transformFromPath:e=>e+" Mhz"},{id:"frq_big",path:"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",marker:"big",defaultValue:"1690 Mhz",options:[],masterToggle:"frq_on",inactiveValue:2704e3,transformToPath:e=>1e3*parseInt(e),transformFromPath:e=>e+" Mhz"}],sliders:[{id:"batt_level",path:"/sys/class/power_supply/battery/batt_full_capacity",marker:"battery_litmit",defaultValue:90,min:0,max:15,step:1,valueToSlider:e=>e-80,sliderToValue:e=>e+80,masterToggle:"batteryprotect_opt",inactiveValue:100,unit:"%"},...["big","lit","g3d","mif","aud","cam","cp","disp","fsys0","int","intcam","iva","score"].map(e=>({id:`${e}_volt`,path:`/sys/power/percent_margin/${e}_margin_percent`,marker:`${e}_volt`,defaultValue:"cp"===e?0:-4,min:0,max:10,step:1,valueToSlider:e=>-e,sliderToValue:e=>-e,masterToggle:"volt_on",inactiveValue:0}))]};function i(t,i){let n="";if(t.marker&&(n+=`sed -i "s|^# ${t.marker}=.*|# ${t.marker}=${+!!i}|" ${e}; `),i?t.blockActive:t.blockInactive){var a;let o,s,r=i?t.blockActive:t.blockInactive;n+=(a=t.marker,o=`${e}.${a}_block.tmp`,s=`${e}.tmp`,`cat > ${o} <<'EOB'
${r}
EOB
awk -v blk='${o}' -v marker='^# ${a}=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${s}; mv ${s} ${e}; rm -f ${o}; `)}if(t.paths)for(let e of t.paths){let a;if(i)if(null!==e.active)a=e.active;else{let o=t.dynamicPaths?.find(t=>t.path===e.path);if(o){let t=document.getElementById(o.dependsOn);if(t){let e;if(null==(e="INPUT"===t.tagName&&"range"===t.type?parseFloat(t.value):t.dataset.selected)){let t=s.sliders.find(e=>e.id===o.dependsOn),i=s.popups.find(e=>e.id===o.dependsOn);t?e=t.defaultValue:i&&(e=i.defaultValue)}a=o.transform(e)}else a=e.inactive}else a=e.active}else a=e.inactive;n+=`echo '${a}' > ${e.path}; ${o(e.path,a)}`}if(i?t.liveCommandActive:t.liveCommandInactive){let e=i?t.liveCommandActive:t.liveCommandInactive;n+=`${e}; `}return n}function n(t){let o=document.getElementById(t.id);if(!o)return;let s=`toggle_${t.id}`,n=localStorage.getItem(s),a=null!==n?"1"===n:!!t.defaultState;o.checked=a,t.marker&&setTimeout(async()=>{try{let i=(await execSafe(`grep -m1 "^# ${t.marker}=" ${e} || echo "# ${t.marker}=${+!!a}"`)).match(RegExp(`^# ${t.marker}=(\\d+)`));if(i){let e="1"===i[1];e!==a&&(localStorage.setItem(s,e?"1":"0"),o.checked=e,o.dispatchEvent(new Event("change",{bubbles:!0})))}}catch{}},0);let r=null;o.addEventListener("change",()=>{let e=o.checked;localStorage.setItem(s,e?"1":"0"),clearTimeout(r),r=setTimeout(()=>{let o=i(t,e);o&&execSafe(o)},249)})}function a(t){let s=document.getElementById(t.id);if(!s)return;s.min=t.min,s.max=t.max,s.step=t.step;let i=`slider_${t.id}`,n=localStorage.getItem(i),a=null!==n?Number(n):t.defaultValue;s.value=t.valueToSlider?t.valueToSlider(a):a,setTimeout(async()=>{try{let o=(await execSafe(`grep -m1 "^# ${t.marker}=" ${e} || echo "# ${t.marker}=${a}"`)).match(RegExp(`^# ${t.marker}=([^%\\n]*)`));if(o){let e=Number(o[1]);e!==a&&(s.value=t.valueToSlider?t.valueToSlider(e):e,localStorage.setItem(i,e))}}catch{}},0);let r=null;s.addEventListener("change",()=>{let n=parseFloat(s.value),a=t.sliderToValue?t.sliderToValue(n):n;localStorage.setItem(i,a),clearTimeout(r),r=setTimeout(()=>{let s=document.getElementById(t.masterToggle),i=!s||s.checked?a:t.inactiveValue,n=`sed -i "s|^# ${t.marker}=.*|# ${t.marker}=${a}${t.unit||""}|" ${e}; `;execSafe(n+=`echo '${i}' > ${t.path}; ${o(t.path,i)}`)},249)})}function r(t){let s=document.getElementById(t.id);if(!s)return;let i=[];try{i=JSON.parse(s.dataset.options||"[]")}catch{i=t.options}t.options=i;let n=`popup_${t.id}`,a=localStorage.getItem(n)||t.defaultValue;s.dataset.selected=a;let r=s.querySelector(".popup-value");r||((r=document.createElement("span")).className="popup-value",s.appendChild(r)),r.textContent=a,setTimeout(async()=>{try{let o=(await execSafe(`grep -m1 "^# ${t.marker}=" ${e} || echo "# ${t.marker}=${parseInt(a)}"`)).match(RegExp(`^# ${t.marker}=(\\d+)`));if(o){let e=o[1],i=t.transformFromPath(Number(e));i!==a&&(s.dataset.selected=i,r.textContent=i,localStorage.setItem(n,i))}}catch{}},0),s.addEventListener("click",i=>{i.stopPropagation(),window.initPopup&&(document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),s.classList.add("popup-label-active"),window.initPopup.disableOptionsTemporarily?.(300),window.initPopup.openPopup(s,i=>{s.dataset.selected=i,r.textContent=i,localStorage.setItem(n,i),setTimeout(()=>{let s=document.getElementById(t.masterToggle),n=!s||s.checked?t.transformToPath(i):t.inactiveValue,a=i.split(" ")[0];execSafe(`sed -i "s|^# ${t.marker}=.*|# ${t.marker}=${a}|" ${e}; echo '${n}' > ${t.path}; ${o(t.path,n)}`)},249)},t.options))})}window.applySettings=async function(){let t="";try{t=await execSafe(`cat ${e}`)}catch{t=""}for(let i of s.sliders){let s=document.getElementById(i.id);if(!s)continue;let n=`slider_${i.id}`,a=localStorage.getItem(n);null===a&&(a=i.defaultValue,localStorage.setItem(n,a)),a=Number(a),s.value=i.valueToSlider?i.valueToSlider(a):a;let r=RegExp(`^# ${i.marker}=([^%\\n]*)`,"m"),c=t.match(r);if(c&&Number(c[1])!==a){let t=document.getElementById(i.masterToggle),s=!t||t.checked?a:i.inactiveValue,n=`sed -i "s|^# ${i.marker}=.*|# ${i.marker}=${a}${i.unit||""}|" ${e}; `;n+=`echo '${s}' > ${i.path}; ${o(i.path,s)}`,await execSafe(n)}}for(let i of s.popups){let s=document.getElementById(i.id);if(!s)continue;let n=`popup_${i.id}`,a=localStorage.getItem(n)||i.defaultValue;localStorage.setItem(n,a),s.dataset.selected=a;let r=s.querySelector(".popup-value");r&&(r.textContent=a);let c=RegExp(`^# ${i.marker}=(\\d+)`,"m"),l=t.match(c);if(l){let t=l[1],c=i.transformFromPath(Number(t));if(c!==a){localStorage.setItem(n,c),s.dataset.selected=c,r&&(r.textContent=c);let t=document.getElementById(i.masterToggle),a=!t||t.checked?i.transformToPath(c):i.inactiveValue,l=c.split(" ")[0],d=`sed -i "s|^# ${i.marker}=.*|# ${i.marker}=${l}|" ${e}; `;d+=`echo '${a}' > ${i.path}; ${o(i.path,a)}`,await execSafe(d)}}}for(let e of s.toggles){let o=document.getElementById(e.id);if(!o)continue;let s=`toggle_${e.id}`,n=localStorage.getItem(s);null===n&&(n=e.defaultState?"1":"0",localStorage.setItem(s,n));let a="1"===n;if(e.marker){let o=RegExp(`^# ${e.marker}=(\\d+)`,"m"),s=t.match(o),n=s?"1"===s[1]:null;if(null!==n&&n!==a){let t=i(e,a);await execSafe(t)}}o.checked!==a?(o.checked=a,o.dispatchEvent(new Event("change",{bubbles:!0}))):a&&e.dynamicPaths&&o.dispatchEvent(new Event("change",{bubbles:!0}))}},document.addEventListener("DOMContentLoaded",()=>{execSafe(`if [ ! -f ${e} ]; then cat > ${e} << 'EOF'
${t}
EOF
fi`),s.toggles.forEach(n),s.sliders.forEach(a),s.popups.forEach(r)})}(),document.addEventListener("DOMContentLoaded",()=>{let e={mask:document.querySelector(".oui-dialog-mask"),body:document.body,resetButton:document.querySelector(".close-dialog-text-reset")};window.resetLoadingAnimation=function(e){e&&(e.style.animation="none",e.offsetHeight,e.style.animation="",e.querySelectorAll(".ball").forEach(e=>{e.style.animation="none",e.offsetHeight,e.style.animation=""}))};let t={open(t){let o=document.getElementById(t);if(!o||!e.mask)return;let s=o.querySelector(".oui-loading");s&&resetLoadingAnimation&&resetLoadingAnimation(s),o.classList.add("show"),e.mask.classList.add("show"),e.body.classList.add("no-scroll")},close(){let t=document.querySelector(".oui-dialog.show");return!!t&&!!e.mask&&(t.classList.remove("show"),t.classList.add("hide"),e.mask.classList.remove("show"),e.body.classList.remove("no-scroll"),setTimeout(()=>t.classList.remove("hide"),5),!0)},closeKeepingMask(){let t=document.querySelector(".oui-dialog.show");return!!t&&(t.classList.remove("show"),t.classList.add("hide"),e.mask&&e.mask.classList.add("show"),e.body.classList.add("no-scroll"),setTimeout(()=>t.classList.remove("hide"),5),!0)}};if(e.resetButton){let o=e.resetButton.closest(".reset-dialog-btn");if(!o)return;o.removeEventListener("click",t.close),o.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation();let s=document.createElement("div");s.id="temp-blocking-layer",s.style.cssText="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 3000; pointer-events: all;",e.body.appendChild(s),e.body.classList.add("no-scroll"),t.closeKeepingMask()&&setTimeout(()=>{s.remove(),t.open("resetting_app_dialog"),setTimeout(()=>{let e;e=["settings put global forced_app_standby_enabled 1","echo '0' > /sys/power/cpuhotplug/governor/user_mode","echo '0' > /sys/power/cpuhotplug/governor/enabled","echo 'Y' > /sys/module/workqueue/parameters/power_efficient","system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0","chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus","echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres","echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms","echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres","echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres","chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus","pm disable com.google.android.gms/.chimera.GmsIntentOperationService","echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor","echo '10' > /proc/sys/vm/dirty_ratio","echo '3' > /proc/sys/vm/dirty_background_ratio","echo '2500' > /proc/sys/vm/dirty_expire_centisecs","echo '1250' > /proc/sys/vm/dirty_writeback_centisecs","echo '2' > /proc/sys/vm/laptop_mode","echo '70' > /proc/sys/vm/swappiness","echo '1' > /sys/block/sda/queue/rotational","echo '1' > /sys/block/sda/queue/add_random","echo '2' > /sys/block/sda/queue/rq_affinity","echo '100' > /sys/class/power_supply/battery/batt_full_capacity","echo '1690000' > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq","echo '1690000' > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq","echo '-4' > /sys/power/percent_margin/big_margin_percent","echo '-4' > /sys/power/percent_margin/lit_margin_percent","echo '-4' > /sys/power/percent_margin/g3d_margin_percent","echo '-4' > /sys/power/percent_margin/mif_margin_percent","echo '-4' > /sys/power/percent_margin/aud_margin_percent","echo '-4' > /sys/power/percent_margin/cam_margin_percent","echo '0' > /sys/power/percent_margin/cp_margin_percent","echo '-4' > /sys/power/percent_margin/disp_margin_percent","echo '-4' > /sys/power/percent_margin/fsys0_margin_percent","echo '-4' > /sys/power/percent_margin/int_margin_percent","echo '-4' > /sys/power/percent_margin/intcam_margin_percent","echo '-4' > /sys/power/percent_margin/iva_margin_percent","echo '-4' > /sys/power/percent_margin/score_margin_percent","if [ $API -eq 35 ]; then service call activity 51 i32 -1; elif [ $API -eq 34 ]; then service call activity 51 i32 -1; elif [ $API -eq 33 ]; then service call activity 44 i32 -1; fi","dumpsys deviceidle unforce"],localStorage.clear(),setTimeout(()=>{e.forEach(e=>execSafe(e));let t=scriptContent.replace("# changelog=1","# changelog=0");execSafe(`cat > ${commandFile} << 'EOF'
${t}
EOF`)},5),setTimeout(()=>execSafe("input keyevent 4"),4e3)},5)},700)})}});let L=!0,S={mask:document.querySelector(".oui-loading-mask"),dialog:document.querySelector(".oui-dialog"),loader:document.querySelector(".oui-loading"),label:null,body:document.body,docElement:document.documentElement},k=e=>new Promise(t=>setTimeout(t,e));async function T(){S.mask.classList.remove("active"),S.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",S.loader.classList.remove("active"),S.body.classList.remove("no-scroll");let e=async t=>{t.target!==S.mask||S.mask.classList.contains("active")||(await k(5),L=!1,S.mask.removeEventListener("transitionend",e),S.body.classList.remove("app-blocked-body"),S.docElement.classList.remove("app-blocked"))};S.mask.addEventListener("transitionend",e,{passive:!0})}async function q(){try{let e=await execSafe("dumpsys battery 2>/dev/null | grep mSavedBatteryAsoc | head -1"),t=await execSafe("dumpsys battery 2>/dev/null | grep mSavedBatteryUsage | head -1"),o=null,s=null;if(e){let t=e.match(/(\d+)/);t&&(o=t[1])}if(t){let e=t.match(/(\d+)/);if(e){let t=e[1],o=t;if(t.length>=3){let e=t.slice(0,-1);o=e.slice(0,-1)+"."+e.slice(-1)}s=o}}let i=document.getElementById("battery_health");o&&s?i.textContent=`${o}% / ${s} Cycles`:i.textContent="Unknown"}catch{document.getElementById("battery_health").textContent="Unknown"}}async function x(){try{let e=await execSafe("pm list packages | grep com.guru.batteryoptimizer");return e&&e.toString().trim().includes("com.guru.batteryoptimizer")}catch{return!1}}async function I(){try{let e=await execSafe(`[ -f ${commandFile} ] && echo "exists" || echo "not_found"`);if("exists"!==e.trim())return;let t=await execSafe(`grep -F "# changelog=" ${commandFile} | cut -d'=' -f2`);"1"===t.trim()&&(await execSafe(`sed -i "s|# changelog=.*|# changelog=0|" ${commandFile}`),await k(500),openDialog(document.getElementById("whatsnew_dialog"),{mask:!0,maskType:"default"}))}catch{}}!async function(){let e,t=await x();if((e=document.querySelector(".closemodule-dialog-btn"))&&e.addEventListener("click",()=>{try{execSafe("input keyevent 4")}catch{}}),await k(200),q(),await k(1500),new Promise(e=>{splashScreen.classList.remove("show"),setTimeout(e,200)}),S.body.classList.add("app-blocked-body"),S.docElement.classList.add("app-blocked"),await k(500),S.label||(S.label=document.querySelector(".oui-dialog-description")),S.label&&(S.label.innerHTML="Checking Settings..."),S.dialog.style.cssText+="opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0);",S.loader.classList.add("active"),S.body.classList.add("no-scroll"),await k(700),t){execSafe("rm -f /data/adb/modules/battery-guru-optimizer-9810/boot-completed.sh"),S.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",S.loader.classList.remove("active"),S.body.classList.remove("no-scroll"),L=!1,await k(300),openDialog(document.getElementById("moduledisabled_dialog"),{mask:!1});return}await applySettings(),await k(1e3),L&&(await T(),I())}();