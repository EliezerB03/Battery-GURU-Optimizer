window.execSafe=function(e){try{let t=ksu.exec(e);return t?.then?t.catch(()=>""):Promise.resolve(t||"")}catch{return Promise.resolve("")}};let e={queue:[],busy:!1};window.execQueue=function(t){e.queue.push(t),function t(){e.busy||0===e.queue.length||(e.busy=!0,execSafe(e.queue.shift()).finally(()=>{e.busy=!1,t()}))}()};let t=(e,t)=>{let s;return(...o)=>{clearTimeout(s),s=setTimeout(()=>e(...o),t)}},s=(e,t)=>{let s;return(...o)=>{s||(e(...o),s=!0,setTimeout(()=>s=!1,t))}};window.sleep=e=>new Promise(t=>setTimeout(t,e));let o={sections:null,links:null,container:null,topFade:null,bottomFade:null,nav:null,init(){this.sections=document.querySelectorAll(".tab-section"),this.links=document.querySelectorAll(".oui-tab-link"),this.container=document.querySelector(".container"),this.topFade=document.querySelector(".top-fade"),this.bottomFade=document.querySelector(".bottom-fade"),this.nav=document.querySelector(".oui-tab")}};window.showTab=function(e,t){t.classList.contains("oui-tab-link-active")||requestAnimationFrame(()=>{o.sections.forEach(e=>e.classList.remove("active"));let s=document.getElementById(e);s&&s.classList.add("active"),initSliders(),o.links.forEach(e=>{let s=e===t;e.classList.toggle("oui-tab-link-active",s);let o=e.querySelector(".outline"),i=e.querySelector(".filled"),c=e.querySelector(".oui-tab-text"),r=e.querySelector(".oui-tab-text-active");o&&i&&c&&r&&(c.style.display=s?"none":"block",r.style.display=s?"block":"none",o.style.display=s?"none":"inline-block",i.style.display=s?"inline-block":"none")}),o.container&&(o.container.scrollTop=0)})};let i={toggle:null,sections:null},c={toggle:null,bubble:null,text:null,sections:null},r={toggle:null,bubble:null,text:null,sections:null};function n(){let{toggle:e,sections:t}=i;if(!e)return;let s=e.checked;t.forEach(e=>e.classList.toggle("disabled",!s))}function a(){let{toggle:e,bubble:t,text:s,sections:o}=c;if(!e)return;let i=e.checked;requestAnimationFrame(()=>{s.textContent=i?"ON":"OFF",s.style.color=i?"var(--accent)":"var(--text)",t.style.transition||(t.style.transition="background 0.25s ease"),t.style.background=i?"var(--toggle-master-background)":"",o.forEach(e=>{e.classList.toggle("disabled",!i),i||(e.style.pointerEvents="none",e.querySelectorAll(":active").forEach(e=>e.blur()),requestAnimationFrame(()=>{e.style.pointerEvents=""}))})})}function l(){let{toggle:e,bubble:t,text:s,sections:o}=r;if(!e)return;let i=e.checked;requestAnimationFrame(()=>{s.textContent=i?"ON":"OFF",s.style.color=i?"var(--accent)":"var(--text)",t.style.transition||(t.style.transition="background 0.25s ease"),t.style.background=i?"var(--toggle-master-background)":"",o.forEach(e=>{e.classList.toggle("disabled",!i),i||(e.style.pointerEvents="none",e.querySelectorAll(":active").forEach(e=>e.blur()),requestAnimationFrame(()=>{e.style.pointerEvents=""}))})})}let d={rafId:null,setFade(e){let t=e?"1":"0";o.topFade.style.opacity=t,o.bottomFade.style.opacity=t},isScrollable:e=>e&&e.scrollHeight>e.clientHeight+1,findScrollableForSection(e){if(!e)return null;let t=e;for(;t&&t!==document.body&&(t=t.parentElement);){if(t.classList?.contains("container"))return t;let e=getComputedStyle(t);if(/(auto|scroll)/.test(e.overflowY))return t}let s=getComputedStyle(e);return/(auto|scroll)/.test(s.overflowY)?e:o.container||document.scrollingElement||document.documentElement},update(){this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{let e=document.querySelector("section.active");if(!e||e.hasAttribute("data-fade")&&"false"===e.getAttribute("data-fade"))return void this.setFade(!1);let t=this.findScrollableForSection(e);this.setFade(!!(t&&this.isScrollable(t)))})}};document.addEventListener("DOMContentLoaded",()=>{if(o.init(),[{cache:i,id:"batteryprotect_opt",selector:"#general .options",callback:n},{cache:c,id:"frq_on",bubbleId:"frq_toggle_master",textId:"frq_text",selector:"#freq .options",callback:a},{cache:r,id:"volt_on",bubbleId:"volt_toggle_master",textId:"volt_text",selector:"#voltage .options",callback:l}].forEach(e=>{let t=document.getElementById(e.id);t&&(e.cache.toggle=t,e.cache.sections=document.querySelectorAll(e.selector),e.bubbleId&&(e.cache.bubble=document.getElementById(e.bubbleId),e.cache.text=document.getElementById(e.textId)),t.addEventListener("change",e.callback),e.callback())}),o.topFade&&o.bottomFade){o.topFade.style.cssText="transition: opacity 200ms ease; opacity: 0",o.bottomFade.style.cssText="transition: opacity 200ms ease; opacity: 0",d.update();let e=showTab;showTab=function(t,s){e(t,s),setTimeout(()=>d.update(),40)};let i=new MutationObserver(s(()=>d.update(),100));document.querySelectorAll("section").forEach(e=>i.observe(e,{attributes:!0,attributeFilter:["class"]}));let c=new ResizeObserver(s(()=>d.update(),150));c.observe(document.documentElement),document.querySelectorAll(".container, section").forEach(e=>c.observe(e));let r=new MutationObserver(t(()=>d.update(),100));document.querySelectorAll(".container").forEach(e=>r.observe(e,{childList:!0,subtree:!0})),window.addEventListener("resize",t(()=>d.update(),150))}initSliders()}),function(){let e=o.container||document.querySelector(".container");if(!e)return;let t=e.querySelector(".container-scrollbar"),i=t?.querySelector(".container-scrollbar-thumb");if(!t||!i)return;let c,r=null;function n(){r=null;let s=e.scrollHeight,o=e.clientHeight;if(s<=o+1){t.style.display="none";return}t.style.display="block";let c=t.clientHeight,n=Math.max(o/s*c,24),a=c-n,l=Math.min(a,Math.max(0,e.scrollTop/(s-o||1)*a));i.style.height=n+"px",i.style.transform=`translateY(${l}px)`}function a(){r||(r=requestAnimationFrame(n))}let l=s(()=>{e.classList.add("show-scrollbar"),clearTimeout(c),c=setTimeout(()=>e.classList.remove("show-scrollbar"),1500)},50);e.addEventListener("scroll",()=>{a(),l()},{passive:!0}),window.addEventListener("resize",()=>a());let d=window.showTab;d&&(window.showTab=function(t,s){d(t,s),requestAnimationFrame(()=>{a(),e.classList.remove("show-scrollbar")})}),requestAnimationFrame(n)}();let u=document.querySelector(".container"),p=document.querySelectorAll(".tab-section"),m=new Map;p.forEach(e=>{let t=e.querySelector(".oui-viewing"),s=e.querySelector(".oui-header"),o=e.querySelector(".info-header");t&&s&&m.set(e,{viewing:t,header:s,infoviewing:o,compact:!1,infoCompact:!1})});let _=null,v=null;function y(e=!1){m.forEach(t=>{let{viewing:s,header:o,infoviewing:i}=t,c=s.getBoundingClientRect(),r=Math.max(0,Math.min(-c.top/c.height,1)),n=r>1e-4,a=r>.6;(e||t.compact!==n)&&(t.compact=n,o.classList.toggle("header-compact",n),s.classList.toggle("header-compact",n)),(e||t.infoCompact!==a)&&(t.infoCompact=a,o.classList.toggle("header-compact-infobtn",a),i?.classList.toggle("header-compact-infobtn",a))})}function h(e={}){let{effectClass:t="toggle-effect",roundedLogic:s=null,deltaThreshold:o=8,useDeltaY:i=!0,cooldown:c=300,onClickHandler:r=null}=e;return function(e){let n={pointerDown:!1,pointerInside:!1,cancelled:!1,moved:!1,animationTimeout:null,inactivityTimeout:null,startPos:0,lastActionTime:0},a=e.querySelector(".oui-inner")||e.closest(".oui-button, .oui-button-active, .oui-tab-inner")||e,l=()=>{clearTimeout(n.animationTimeout),clearTimeout(n.inactivityTimeout);let s=e.querySelector(`.${t}`);s&&(s.classList.remove("animate-in"),s.classList.add("animate-out"),a.classList.remove("pressed-effect"),a.classList.add("released-effect"),n.animationTimeout=setTimeout(()=>{a.classList.remove("released-effect"),s.remove()},550))},d=s=>{if(!n.pointerDown)return;clearTimeout(n.inactivityTimeout),n.inactivityTimeout=setTimeout(()=>{n.pointerDown&&!n.moved&&(n.cancelled=!0,l(),n.pointerInside=!1)},700);let c=Math.abs((s.touches?i?s.touches[0].clientY:s.touches[0].clientX:i?s.clientY:s.clientX)-n.startPos);if(!n.moved&&c>o){n.cancelled=!0,n.moved=!0,l(),n.pointerInside=!1,a.classList.remove("pressed-effect");return}if("button-effect"===t){let t=e.getBoundingClientRect(),o=s.touches?s.touches[0].clientX:s.clientX,i=s.touches?s.touches[0].clientY:s.clientY;(o<t.left||o>t.right||i<t.top||i>t.bottom)&&n.pointerInside&&(n.cancelled=!0,l(),n.pointerInside=!1,a.classList.remove("pressed-effect"))}},u=()=>{if(!n.pointerDown)return;n.pointerDown=!1,document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",u);let t=Date.now();n.pointerInside&&!n.cancelled&&!n.moved&&t-n.lastActionTime>=c&&(n.lastActionTime=t,r?r(e):e.click()),l(),n.pointerInside=!1,n.cancelled=!1,n.moved=!1},p=o=>{Date.now()-n.lastActionTime<c?o.preventDefault():(n.pointerDown=!0,n.pointerInside=!0,n.cancelled=!1,n.moved=!1,n.startPos=o.touches?i?o.touches[0].clientY:o.touches[0].clientX:i?o.clientY:o.clientX,clearTimeout(n.animationTimeout),clearTimeout(n.inactivityTimeout),n.inactivityTimeout=setTimeout(()=>{n.pointerDown&&!n.moved&&(n.cancelled=!0,l(),n.pointerInside=!1)},700),a.classList.remove("released-effect"),a.classList.add("pressed-effect"),(()=>{if(n.cancelled)return;e.querySelector(`.${t}`)?.remove();let o=document.createElement("span");o.className=`${t} animate-in`,s&&s(e,o),e.appendChild(o),a.classList.add("pressed-effect")})(),document.addEventListener("pointermove",d,{passive:!0}),document.addEventListener("pointerup",u,{passive:!0}),document.addEventListener("touchmove",d,{passive:!0}),document.addEventListener("touchend",u,{passive:!0}))};e.addEventListener("click",e=>{n.pointerInside||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",p,{passive:!1}),e.addEventListener("pointerdown",p,{passive:!1})}}u.addEventListener("scroll",()=>{_||(_=requestAnimationFrame(()=>{y(!1),_=null})),clearTimeout(v),v=setTimeout(()=>y(!0),80)},{passive:!0}),y(!0);let f=h({effectClass:"toggle-effect",roundedLogic:(e,t)=>{if(null!==e.querySelector("#batteryprotect_opt"))t.classList.add("rounded-top");else{let s=[...e.parentElement.querySelectorAll(".oui-container-toggle, .oui-bubble-item, .oui-bubble-item2")],o=e===s[0],i=e===s[s.length-1];1===s.length?t.classList.add("rounded-all"):o?t.classList.add("rounded-top"):i&&t.classList.add("rounded-bottom")}},deltaThreshold:8,useDeltaY:!0,cooldown:300});document.querySelectorAll(".oui-container-toggle, .oui-bubble-item, .oui-bubble-item2").forEach(f);let g=h({effectClass:"button-effect",deltaThreshold:8,useDeltaY:!0,cooldown:300});document.querySelectorAll(".oui-button, .oui-button-active").forEach(g);let b=h({effectClass:"tab-button-effect",roundedLogic:(e,t)=>t.classList.add("rounded-all"),deltaThreshold:8,useDeltaY:!1,cooldown:300});document.querySelectorAll(".oui-tab-link").forEach(b);let w=h({effectClass:"dialog-button-effect",roundedLogic:(e,t)=>t.classList.add("rounded-all"),deltaThreshold:8,useDeltaY:!0,cooldown:0});function E(){_||(_=requestAnimationFrame(()=>{_=null;let e=window.__popupInstance,t=window.__popupPositioner,s=window.__getActiveTrigger?.();e&&t&&e.classList.contains("show")&&s&&t(s)}))}document.querySelectorAll(".oui-dialog-action-button").forEach(w),document.querySelectorAll(".oui-overlay-bubble-info, .oui-overlay-bubble-info-header").forEach(e=>{let t={pointerDown:!1,pointerInside:!1,cancelled:!1,moved:!1,animationTimeout:null,inactivityTimeout:null,startY:0,dialogOpened:!1},s=()=>{clearTimeout(t.animationTimeout),clearTimeout(t.inactivityTimeout);let s=e.querySelector(".oui-icon-info-effect");s&&(s.classList.remove("animate-in"),s.classList.add("animate-out"),e.classList.remove("pressed-effect"),e.classList.add("released-effect"),t.animationTimeout=setTimeout(()=>{e.classList.remove("released-effect"),s.remove()},550))},o=o=>{if(!t.pointerDown)return;clearTimeout(t.inactivityTimeout),t.inactivityTimeout=setTimeout(()=>{t.pointerDown&&!t.moved&&(t.cancelled=!0,s(),t.pointerInside=!1)},700);let i=Math.abs((o.touches?o.touches[0].clientY:o.clientY)-t.startY);!t.moved&&i>8&&(t.cancelled=!0,t.moved=!0,s(),t.pointerInside=!1,e.classList.remove("pressed-effect"))},i=()=>{t.pointerDown&&(t.pointerDown=!1,document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",i),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",i),!t.pointerInside||t.cancelled||t.moved||t.dialogOpened||(t.dialogOpened=!0,e.click(),setTimeout(()=>t.dialogOpened=!1,50)),s(),t.pointerInside=!1,t.cancelled=!1,t.moved=!1)},c=c=>{t.pointerDown=!0,t.pointerInside=!0,t.cancelled=!1,t.moved=!1,t.startY=c.touches?c.touches[0].clientY:c.clientY,clearTimeout(t.animationTimeout),clearTimeout(t.inactivityTimeout),t.inactivityTimeout=setTimeout(()=>{t.pointerDown&&!t.moved&&(t.cancelled=!0,s(),t.pointerInside=!1)},700),e.classList.remove("released-effect"),e.classList.add("pressed-effect"),(()=>{if(t.cancelled)return;e.querySelector(".oui-icon-info-effect")?.remove();let s=document.createElement("span");s.className="oui-icon-info-effect animate-in rounded-all",e.appendChild(s),e.classList.add("pressed-effect"),e.classList.remove("released-effect")})(),document.addEventListener("pointermove",o,{passive:!0}),document.addEventListener("pointerup",i,{passive:!0}),document.addEventListener("touchmove",o,{passive:!0}),document.addEventListener("touchend",i,{passive:!0})};e.addEventListener("click",e=>{t.pointerInside||(e.preventDefault(),e.stopPropagation())},!0),e.addEventListener("touchstart",c,{passive:!1}),e.addEventListener("pointerdown",c,{passive:!1})}),document.querySelector(".container").addEventListener("scroll",E,{passive:!0}),window.addEventListener("resize",E),function(){let e=null,t=document.getElementById("popup-menu");if(t&&t.parentElement!==document.body&&document.body.appendChild(t),window.__popupInstance=t,window.__popupPositioner=y,window.__getActiveTrigger=()=>e,!t)return;let s={content:t.querySelector(".popup-content"),optionsList:document.getElementById("popup-options")},o={popupOpen:!1,optionsEnabled:!0,pointerDownOutside:!1},i=0,c=document.querySelector(".container"),r=t.querySelector(".popup-scrollbar"),n=t.querySelector(".popup-scrollbar-thumb"),a=null,l=()=>{n.classList.add("show"),clearTimeout(a),a=setTimeout(d,1500)},d=()=>n.classList.remove("show");function u(){let e=s.optionsList;if(e.scrollHeight<=e.clientHeight){r.style.display="none";return}r.style.display="block";let t=e.clientHeight/e.scrollHeight,o=Math.max(18,e.clientHeight*t),i=e.scrollTop/(e.scrollHeight-e.clientHeight),c=r.clientHeight-o;n.style.height=o+"px",n.style.top=c*i+"px"}s.optionsList.addEventListener("scroll",()=>{u(),_(),l()}),window.addEventListener("resize",u);let p=t.querySelector(".popup-fade-top"),m=t.querySelector(".popup-fade-bottom");function _(){let e=s.optionsList;if(!(e.scrollHeight>e.clientHeight+1)){p.classList.remove("show"),m.classList.remove("show");return}let t=e.scrollTop<=3,o=e.scrollTop+e.clientHeight>=e.scrollHeight-2;p.classList.toggle("show",!t),m.classList.toggle("show",!o)}function v(){t.classList.remove("show"),o.popupOpen=!1,o.optionsEnabled=!0,e=null,c&&(c.style.overflow="auto",c.scrollTop=i),document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),n.classList.remove("show"),clearTimeout(a)}function y(e){let s,o=e.getBoundingClientRect(),i=t.offsetHeight,c=t.offsetWidth,r=window.innerHeight,n=window.innerWidth,a=.025*n,l=o.right+8;l+c>n-a&&(l=n-c-a);let d=r-o.bottom,u=o.top;d>=i?(s=o.top)+i>r-.15*r&&u>=i&&(s=o.bottom-i):u>=i?(s=o.bottom-i)<.2*r&&d>=i&&(s=o.top):s=d>u?o.top:o.bottom-i,t.style.top=s+"px",t.style.left=l+"px"}function h(e,i,c,r){s.optionsList.innerHTML="",e.forEach((n,a)=>{let l,d,u,p,m,_=document.createElement("li");_.className="oui-bubble-item";let v="";if(1===e.length?v="rounded-all":0===a?v="rounded-top":a===e.length-1&&(v="rounded-bottom"),_.innerHTML=`
        <div class="popup-inner">
          <span class="popup-text">${n}</span>
        </div>
        <span class="popup-effect ${v}"></span>
      `,n===i){_.classList.add("selected");let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("class","popup-icon-selected checkmark"),e.innerHTML='<path style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:3" d="m5 12 5 5 9-9"/>',_.querySelector(".popup-inner").appendChild(e)}let y=_.querySelector(".popup-inner"),h=_.querySelector(".popup-effect");l={down:!1,inside:!1,cancelled:!1,moved:!1,animTimeout:null,inactTimeout:null,startY:0,lastTime:0},d=()=>{clearTimeout(l.animTimeout),clearTimeout(l.inactTimeout),h.classList.contains("animate-in")&&(h.classList.remove("animate-in"),h.classList.add("animate-out"),y.classList.remove("pressed-effect"),y.classList.add("released-effect"),l.animTimeout=setTimeout(()=>{h.classList.remove("animate-out"),y.classList.remove("released-effect")},550))},u=e=>{if(!l.down)return;clearTimeout(l.inactTimeout),l.inactTimeout=setTimeout(()=>{l.down&&!l.moved&&(l.cancelled=!0,d(),l.inside=!1)},700);let t=Math.abs((e.touches?e.touches[0].clientY:e.clientY)-l.startY);if(!l.moved&&t>8){l.cancelled=!0,l.moved=!0,d(),l.inside=!1,y.classList.remove("pressed-effect");return}let s=_.getBoundingClientRect(),o=e.touches?e.touches[0].clientX:e.clientX,i=e.touches?e.touches[0].clientY:e.clientY;(o<s.left||o>s.right||i<s.top||i>s.bottom)&&l.inside&&(l.cancelled=!0,d(),l.inside=!1,y.classList.remove("pressed-effect"))},p=()=>{if(!l.down)return;l.down=!1,document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",p),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",p);let e=Date.now();l.inside&&!l.cancelled&&!l.moved&&e-l.lastTime>=200&&(l.lastTime=e,o.optionsEnabled&&r&&(t.classList.remove("show"),o.popupOpen=!1,o.optionsEnabled=!0,document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),r(n,c))),d(),l.inside=!1,l.cancelled=!1,l.moved=!1},m=e=>{if(!o.optionsEnabled){e.preventDefault(),e.stopPropagation();return}Date.now()-l.lastTime<200?e.preventDefault():(l.down=!0,l.inside=!0,l.cancelled=!1,l.moved=!1,l.startY=e.touches?e.touches[0].clientY:e.clientY,clearTimeout(l.animTimeout),clearTimeout(l.inactTimeout),l.inactTimeout=setTimeout(()=>{l.down&&!l.moved&&(l.cancelled=!0,d(),l.inside=!1)},700),y.classList.remove("released-effect"),l.cancelled||(h.classList.remove("animate-out"),h.classList.add("animate-in"),y.classList.add("pressed-effect"),y.classList.remove("released-effect")),document.addEventListener("pointermove",u,{passive:!0}),document.addEventListener("pointerup",p,{passive:!0}),document.addEventListener("touchmove",u,{passive:!0}),document.addEventListener("touchend",p,{passive:!0}))},_.addEventListener("click",e=>{l.inside||(e.preventDefault(),e.stopPropagation())},!0),_.addEventListener("touchstart",m,{passive:!1}),_.addEventListener("pointerdown",m,{passive:!1}),s.optionsList.appendChild(_)}),requestAnimationFrame(()=>{!function(){let e=s.optionsList.children;if(!e.length)return;let t=e[0].offsetHeight;e.length>4.55?(s.optionsList.style.maxHeight=4.55*t+"px",s.optionsList.style.overflowY="scroll"):(s.optionsList.style.maxHeight="none",s.optionsList.style.overflowY="hidden")}(),u(),_()})}document.addEventListener("pointerdown",e=>{o.pointerDownOutside=!t.contains(e.target)},!0),document.addEventListener("pointerup",e=>{o.popupOpen&&o.pointerDownOutside&&!t.contains(e.target)&&(v(),e.preventDefault(),e.stopPropagation())},!0),["click","pointerdown","pointerup","touchstart","touchend"].forEach(e=>{document.addEventListener(e,e=>{o.popupOpen&&!t.contains(e.target)&&(e.preventDefault(),e.stopPropagation())},{capture:!0,passive:!1})});window.initPopup={openPopup:function(r,n){e=r;let a=JSON.parse(r.dataset.options),d=r.dataset.selected;t.classList.contains("show")?(y(r),s.content.classList.add("switching"),setTimeout(()=>{h(a,d,r,n),s.optionsList.scrollTop=0,u(),_(),s.content.classList.remove("switching")},150)):(h(a,d,r,n),requestAnimationFrame(()=>{s.optionsList.scrollTop=0,t.classList.add("show"),o.popupOpen=!0,c&&(i=c.scrollTop,c.style.overflow="hidden"),requestAnimationFrame(()=>{y(r),u(),function(){let t=s.optionsList,o=e?.dataset?.selected;if(!o){t.scrollTop=0,u();return}let i=t.querySelectorAll("li"),c=null;if(i.forEach(e=>{e.textContent.trim()===o.trim()&&(c=e)}),!c){t.scrollTop=0,u();return}let r=c.offsetTop,n=c.offsetHeight,a=t.clientHeight;t.scrollTop=Math.max(0,r-a/3.169+n/2),u(),_(),l()}(),_(),l()})}))},closePopup:v,disableOptionsTemporarily:(e=300)=>{o.optionsEnabled=!1,setTimeout(()=>o.optionsEnabled=!0,e)}}}(),window.initSliders=function(){let e,t,s=["volt_big","volt_little","volt_gpu","volt_mif","volt_audio","volt_camera","volt_cp","volt_display","volt_fsys","volt_int","volt_intcamera","volt_iva","volt_score"],o=["batt_level"],i=new Map,c=new Map,r=new Map,n=null,a=new Map;function l(e){if(!a.has(e)){let t=document.getElementById(e);if(!t)return null;a.set(e,{slider:t,parent:t.parentElement,dotsContainer:t.nextElementSibling,valuesContainer:t.parentElement.querySelector(".slider-values, .batt-slider-values")})}return a.get(e)}function d(e){e.forEach(e=>{let t=l(e);if(!t?.slider||!t.dotsContainer)return;let s=t.slider.max-t.slider.min,o=t.slider.offsetWidth-15,i=document.createDocumentFragment();for(let e=0;e<=s;e++){let t=document.createElement("span");t.style.left=`${7.5+e/s*o+2}px`,i.appendChild(t)}t.dotsContainer.innerHTML="",t.dotsContainer.appendChild(i)})}function u(e){let t=l(e);if(!t?.slider||!t.valuesContainer)return;let s=t.slider.offsetWidth-15,o=t.valuesContainer.querySelectorAll("span");if(3!==o.length)return;let i=[7.5,7.5+.5*s+1,7.5+s];o.forEach((e,t)=>{e.style.cssText=`position: absolute; top: 0; transform: translateX(-50%); left: ${i[t]}px`})}let p=(e,t)=>{let s=e.get(t);s&&(clearTimeout(s),e.delete(t))},m=(e,t,s,o)=>{p(e,t),e.set(t,setTimeout(s,o))};function _(e,t=!1){let s=t?"batt-slider-value-float":"slider-value-float",o=l(e.id),i=o.parent.querySelector(`.${s}`);i||((i=document.createElement("div")).className=s,i.innerHTML=`<span class="${t?"slider-bat-value-text":"slider-value-text"}"></span>`,o.parent.appendChild(i));let c=i.firstElementChild,r=e.valueAsNumber;c.textContent=t?`${80+r}%`:0===r?"0":`-${r}`;let n=e.offsetWidth-15,a=(r-e.min)/(e.max-e.min);i.style.left=`${7.5+n*a}px`}function v(e,t,s=!1){let o=l(e.id).parent.querySelector(`.${s?"batt-slider-value-float":"slider-value-float"}`);o?.classList.toggle("visible",t)}function y(e,t=null){n||(n=document.querySelectorAll("button, .oui-container-toggle, .popup-trigger, .oui-tab-link, .oui-overlay-bubble-info"));let i=e?"":"none";n.forEach(e=>e.style.pointerEvents=i),[...s,...o].forEach(e=>{let s=l(e);s?.slider&&s.slider!==t&&(s.slider.style.pointerEvents=i)})}function h(e,t=!1){let r=t?e=>p(c,e):e=>p(i,e),n=t?(e,t,s)=>m(c,e,t,s):(e,t,s)=>m(i,e,t,s);e.forEach(e=>{let s=l(e);if(!s?.slider)return;let o=s.slider;_(o,t);let i=()=>{r(e),y(!1,o),_(o,t),v(o,!0,t)};o.addEventListener("touchstart",i,{passive:!0}),o.addEventListener("touchend",()=>{y(!0),n(e,()=>v(o,!1,t),270)},{passive:!0}),o.addEventListener("input",()=>_(o,t),{passive:!0}),o.addEventListener("mousedown",i,{passive:!0})}),window._sliderGlobalListenersAdded||(window.addEventListener("mouseup",()=>{y(!0),[...s,...o].forEach(e=>{let t=l(e);if(t?.slider){let s=o.includes(e);(s?(e,t,s)=>m(c,e,t,s):(e,t,s)=>m(i,e,t,s))(e,()=>v(t.slider,!1,s),270)}})},{passive:!0}),window._sliderGlobalListenersAdded=!0)}function f(e,t=!1){let s=t?e=>p(c,e):e=>p(i,e),o=t?(e,t,s)=>m(c,e,t,s):(e,t,s)=>m(i,e,t,s);e.forEach(e=>{let i=l(e);if(!i?.slider)return;let c=i.slider,n={down:!1,startX:0,startValue:0,moved:!1,initialValue:0,shouldFire:!1,rafId:null,hasDragged:!1};c.addEventListener("pointerdown",o=>{let i=Date.now();if(i-(r.get(e)||0)<100)return void o.preventDefault();r.set(e,i),s(e),n.down=!0,n.moved=!1,n.hasDragged=!1,n.shouldFire=!1,n.initialValue=c.valueAsNumber;let a=c.getBoundingClientRect(),l=o.clientX-a.left,d=Number(c.min)||0,u=Number(c.max)||100,p=u-d,m=d+l/a.width*p;c.value=Math.round(Math.min(u,Math.max(d,m))),_(c,t),c.valueAsNumber!==n.initialValue&&(n.shouldFire=!0),n.startX=o.clientX,n.startValue=c.valueAsNumber,c.setPointerCapture(o.pointerId),v(c,!0,t),c.classList.add("active-thumb"),o.preventDefault()},{passive:!1}),c.addEventListener("pointermove",e=>{if(!n.down)return;e.preventDefault();let s=e.clientX-n.startX;Math.abs(s)>5&&(n.moved=!0,n.hasDragged=!0),n.rafId&&cancelAnimationFrame(n.rafId),n.rafId=requestAnimationFrame(()=>{let e=c.clientWidth,o=Number(c.min)||0,i=Number(c.max)||100,r=n.startValue+s/e*(i-o);c.value=Math.round(r=Math.min(i,Math.max(o,r))),_(c,t),n.shouldFire=!0})},{passive:!1}),c.addEventListener("pointerup",s=>{n.down&&(n.down=!1,n.rafId&&(cancelAnimationFrame(n.rafId),n.rafId=null),c.releasePointerCapture(s.pointerId),n.shouldFire&&c.valueAsNumber!==n.initialValue&&c.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),o(e,()=>v(c,!1,t),280),c.classList.remove("active-thumb"))},{passive:!1}),c.addEventListener("pointercancel",s=>{n.down=!1,n.rafId&&(cancelAnimationFrame(n.rafId),n.rafId=null),c.releasePointerCapture(s.pointerId),o(e,()=>v(c,!1,t),280),c.classList.remove("active-thumb")})})}d([...s,...o]),[...s,...o].forEach(e=>u(e)),h(s,!1),h(o,!0),f(s,!1),f(o,!0),window.addEventListener("resize",()=>{t&&cancelAnimationFrame(t),clearTimeout(e),t=requestAnimationFrame(()=>{[...s,...o].forEach(e=>{let t=l(e);t?.slider&&_(t.slider,o.includes(e))})}),e=setTimeout(()=>{d([...s,...o]),[...s,...o].forEach(e=>u(e))},150)},{passive:!0})},document.addEventListener("DOMContentLoaded",()=>{let e=(e,t)=>{let s;return(...o)=>{s||(e(...o),s=!0,setTimeout(()=>s=!1,t))}},t={mask:document.querySelector(".oui-dialog-mask"),body:document.body,doc:document.documentElement,buttons:null,dialogs:document.querySelectorAll(".oui-dialog")},s=null,o=!1,i=0,c=new WeakMap,r=new WeakMap,n=e=>{let t=e.target;for(;t;){let e=window.getComputedStyle(t);if("auto"===e.overflowY||"scroll"===e.overflowY||t.classList?.contains("oui-dialog-description"))return;if(t=t.parentElement,t?.classList?.contains("oui-dialog"))break}e.preventDefault()},a=e=>i=e.touches[0].clientY,l=e=>{if(!s)return;let t=e.target,o=!1;for(;t&&t!==s;){let e=window.getComputedStyle(t);if(("auto"===e.overflowY||"scroll"===e.overflowY)&&t.scrollHeight>t.clientHeight){o=!0;break}t=t.parentElement}if(o)return;let{scrollTop:c,scrollHeight:r,offsetHeight:n}=s,a=e.touches[0].clientY,l=a>i,d=a<i;(0===c&&l||c+n>=r&&d)&&e.preventDefault(),i=a},d=e=>{o=!e,requestAnimationFrame(()=>{t.buttons||(t.buttons=document.querySelectorAll(".oui-dialog-action-button, .close-dialog-btn, .reset-dialog-btn")),t.buttons.forEach(t=>t.style.pointerEvents=e?"":"none"),e?(t.body.style.removeProperty("pointer-events"),t.body.style.removeProperty("user-select"),t.doc.style.removeProperty("pointer-events"),t.doc.style.removeProperty("user-select")):(t.body.style.pointerEvents="none",t.body.style.userSelect="none",t.doc.style.pointerEvents="none",t.doc.style.userSelect="none")})},u=e=>{let t=document.getElementById("resetting_app_dialog");if(o||t?.classList.contains("show"))return e.preventDefault(),e.stopPropagation(),!1;m()},p=(e,o={mask:!0,maskType:"default"})=>{d(!1),e.querySelectorAll('.oui-dialog-description, [style*="overflow-y: auto"], [style*="overflow-y: scroll"]').forEach(e=>e.scrollTop=0),e.classList.add("show"),o.mask&&("warn"!==o.maskType&&t.mask.addEventListener("click",u,{passive:!1}),t.mask.classList.add("show")),s=e,t.body.classList.add("no-scroll");let i=g(e);i?.reset(),i?.show(),document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("touchstart",a,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1}),setTimeout(()=>d(!0),275)},m=()=>{if(!s)return;d(!1),s.classList.remove("show"),s.classList.add("hide"),t.mask.classList.contains("show")&&(t.mask.classList.remove("show"),t.mask.removeEventListener("click",u)),t.body.classList.remove("no-scroll"),document.removeEventListener("touchmove",n),document.removeEventListener("touchstart",a),document.removeEventListener("touchmove",l);let e=t=>{t.target===s&&s.classList.contains("hide")&&(s.removeEventListener("transitionend",e),setTimeout(()=>{s.classList.remove("hide"),s=null,d(!0)},5))};s.addEventListener("transitionend",e)};window.openDialog=p,window.closeDialog=m;let _=(t,s)=>{let o=c.get(t)||(t=>{if(!t)return null;if(c.has(t))return c.get(t);let s=t.querySelector(".oui-dialog-description");if(!s)return null;let o=t.querySelector(".dialog-top-fade"),i=t.querySelector(".dialog-bottom-fade");o||((o=document.createElement("div")).className="dialog-top-fade",o.style.opacity="0",t.appendChild(o)),i||((i=document.createElement("div")).className="dialog-bottom-fade",i.style.opacity="0",t.appendChild(i));let r=e(()=>{requestAnimationFrame(()=>{let e=s.getBoundingClientRect(),c=t.getBoundingClientRect();o.style.top=`${e.top-c.top}px`,i.style.bottom=`${c.bottom-e.bottom}px`})},100);if(r(),"ResizeObserver"in window){let e=new ResizeObserver(r);e.observe(s),e.observe(t)}let n={desc:s,top:o,bottom:i};return c.set(t,n),n})(t);if(!o)return;let i=s?"1":"0";o.top.style.opacity=i,o.bottom.style.opacity=i},v=null,y=()=>{v&&cancelAnimationFrame(v),v=requestAnimationFrame(()=>{let e=document.querySelector(".oui-dialog.show");if(!e)return _(e,!1);let t=e.querySelector(".oui-dialog-description")||e;_(e,t?.scrollHeight>t?.clientHeight+1)})};document.querySelectorAll("[data-dialog-target]").forEach(e=>{e.addEventListener("click",t=>{if(o)return t.preventDefault(),t.stopPropagation(),!1;let s=e.getAttribute("data-dialog-target"),i=document.getElementById(s),c=e.querySelector('input[type="checkbox"].toggle');i?.querySelector(".oui-loading")&&window.resetLoadingAnimation&&window.resetLoadingAnimation(i.querySelector(".oui-loading")),c?setTimeout(()=>c.checked&&i&&p(i),0):i&&p(i)})}),document.querySelectorAll(".close-dialog-btn").forEach(e=>{e.addEventListener("click",e=>{if(o)return e.preventDefault(),e.stopPropagation(),!1;m()})}),y();let h=new MutationObserver(e(y,100));if(t.dialogs.forEach(e=>h.observe(e,{attributes:!0,attributeFilter:["class"]})),"ResizeObserver"in window){let s=new ResizeObserver(e(y,150));s.observe(t.doc),document.querySelectorAll(".oui-dialog, .oui-dialog-description").forEach(e=>s.observe(e))}let f=new MutationObserver(e(y,100));document.querySelectorAll(".oui-dialog .oui-dialog-description").forEach(e=>f.observe(e,{childList:!0,subtree:!0})),window.addEventListener("resize",e(y,150));let g=e=>{if(!e)return null;if(r.has(e))return r.get(e);let t=e.querySelector(".oui-dialog-description"),s=e.querySelector(".dialog-scrollbar"),o=e.querySelector(".dialog-scrollbar-thumb");if(!t||!s||!o)return null;let i=null,c=!1,n=()=>{c=!1;let e=t.scrollHeight,i=t.clientHeight;if(e<=i+1)return void s.classList.remove("show");let r=t.scrollTop,n=s.clientHeight,a=Math.max(i/e*n,24);o.style.height=a+"px",o.style.transform=`translateY(${r/(e-i)*(n-a)}px)`},a=()=>{c||(c=!0,requestAnimationFrame(n))};if(t.addEventListener("scroll",()=>{a(),s.classList.add("show"),clearTimeout(i),i=setTimeout(()=>s.classList.remove("show"),1500)},{passive:!0}),"ResizeObserver"in window){let s=new ResizeObserver(()=>a());s.observe(t),s.observe(e)}let l={reset(){t.scrollTop=0,s.classList.remove("show"),a()},show(){s.classList.add("show"),clearTimeout(i),i=setTimeout(()=>s.classList.remove("show"),1500)}};return r.set(e,l),a(),l}}),document.addEventListener("DOMContentLoaded",()=>{let e="/data/adb/modules/battery-guru-optimizer-9810/boot-completed.sh",t=`# BATTERY GURU OPTIMIZER (ALL SETTINGS)
# Developed by @EliezerB03

#!/system/bin/sh

# ============== ALL OPTIMIZATIONS  ============== #

#---------------< BATTERY OPTIMIZATIONS ON APPS >---------------#
# forceappsbattopt_on=1
settings put global forced_app_standby_enabled 1

#---------------< CPU HOTPLUG OPTIMIZATIONS >---------------#
# hotplugset_on=1
echo '0' > /sys/power/cpuhotplug/governor/user_mode
echo '0' > /sys/power/cpuhotplug/governor/enabled

#---------------< CPU POWER EFFICIENT >---------------#
# powereffiset_on=1
echo 'Y' > /sys/module/workqueue/parameters/power_efficient

#---------------< THERMAL OPTIMIZATIONS >---------------#
# thermalset_on=1
system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0
chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms
echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres
echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres
chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus
pm disable com.google.android.gms/.chimera.GmsIntentOperationService

#---------------< GPU BOOST >---------------#
# gpuboost_on=0
echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor

#---------------< SWAP OPTIMIZATIONS >---------------#
# swapset_on=1
echo '10' > /proc/sys/vm/dirty_ratio
echo '3' > /proc/sys/vm/dirty_background_ratio
echo '2500' > /proc/sys/vm/dirty_expire_centisecs
echo '1250' > /proc/sys/vm/dirty_writeback_centisecs
echo '2' > /proc/sys/vm/laptop_mode
echo '70' > /proc/sys/vm/swappiness

#---------------< STORAGE OPTIMIZATIONS >---------------#
# storageset_on=1
echo '1' > /sys/block/sda/queue/rotational
echo '1' > /sys/block/sda/queue/add_random
echo '2' > /sys/block/sda/queue/rq_affinity

#---------------< BATTERY PROTECTION >---------------#
# batteryprotect_on=0
# battery_litmit=90%
echo '100' > /sys/class/power_supply/battery/batt_full_capacity

#---------------< FREQS SETTINGS >---------------#
# frqset_on=1
# lit=1690 Mhz
echo '1690000' > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq
# big=1690 Mhz
echo '1690000' > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq

#---------------< VOLTAGE SETTINGS >---------------#
# voltset_on=1
# big_volt=-4
echo '-4' > /sys/power/percent_margin/big_margin_percent
# lit_volt=-4
echo '-4' > /sys/power/percent_margin/lit_margin_percent
# g3d_volt=-4
echo '-4' > /sys/power/percent_margin/g3d_margin_percent
# mif_volt=-4
echo '-4' > /sys/power/percent_margin/mif_margin_percent
# aud_volt=-4
echo '-4' > /sys/power/percent_margin/aud_margin_percent
# cam_volt=-4
echo '-4' > /sys/power/percent_margin/cam_margin_percent
# cp_volt=0
echo '0' > /sys/power/percent_margin/cp_margin_percent
# disp_volt=-4
echo '-4' > /sys/power/percent_margin/disp_margin_percent
# fsys0_volt=-4
echo '-4' > /sys/power/percent_margin/fsys0_margin_percent
# int_volt=-4
echo '-4' > /sys/power/percent_margin/int_margin_percent
# intcam_volt=-4
echo '-4' > /sys/power/percent_margin/intcam_margin_percent
# iva_volt=-4
echo '-4' > /sys/power/percent_margin/iva_margin_percent
# score_volt=-4
echo '-4' > /sys/power/percent_margin/score_margin_percent

#---------------< LIMIT BACKGROUND APP PROCESS (LABS) >---------------#
# limitprocess_on=0
if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi

#---------------< FORCE DOZE (LABS) >---------------#
# forcedoze_on=0
dumpsys deviceidle unforce

# ======================================`;execSafe(`if [ ! -f ${e} ]; then cat > ${e} << 'EOF'
${t}
EOF
fi`);let s=(t,s)=>`sed -i "s|echo ['\\"][^'\\"]*['\\"] > ${t}|echo '${s}' > ${t}|g" ${e}; `,o=e=>setTimeout(e,0),i=(t,s)=>{let o=`${e}.${t}_block.tmp`,i=`${e}.tmp`;return`cat > ${o} <<'EOB'
${s}
EOB
awk -v blk='${o}' -v marker='^# ${t}=' 'BEGIN{skip=0;found=0} { if($0 ~ marker){ found=1; while((getline line < blk) > 0) print line; skip=1; next } if(skip){ if($0 ~ /^$/ || $0 ~ /^#-+/){ skip=0; print $0; next } else next } print $0 } END{ if(!found){ while((getline line < blk) > 0) print line } }' ${e} > ${i}; mv ${i} ${e}; rm -f ${o}; `};function c({id:t,paths:c,probePath:r,marker:n,defaultState:a=!0}){let l=document.getElementById(t);if(!l)return;let d=l.closest(".oui-container-toggle");d&&d.classList.add("no-animation");let u=r&&c[r]?r:Object.keys(c)[0],{active:p,inactive:m}=c[u],_=`toggle_state_${t}`,v=localStorage.getItem(_),y=null!==v?"1"===v:a;l.checked=!!y,d&&requestAnimationFrame(()=>d.classList.remove("no-animation")),o(()=>{try{n?execSafe(`grep -F "# ${n}=" ${e} || echo "# ${n}=0"`).then(i=>{let r=i.includes("=1");if(localStorage.setItem(_,r?"1":"0"),c&&Object.keys(c).length>0){let i="";for(let o in c){let n=r?c[o].active:c[o].inactive;if("frq_on"===t&&r&&(o.includes("policy0")||o.includes("policy4"))){let t=o.includes("policy0")?"lit":"big";i+=`val=$(grep -F "# ${t}=" ${e} | awk '{print $2}' | sed 's/Mhz//'); val=$((val*1000)); echo $val > ${o}; ${s(o,`$((${t}*1000))`)} `;continue}i+=`echo '${n}' > ${o}; ${s(o,n)}`}o(()=>execSafe(i))}l.checked=r}):execSafe(`grep -F "${u}" ${e} || true; cat ${u} 2>/dev/null || true`).then(e=>{let t=e.split("\n"),s=t[0]||"",o=t[1]||"",i=y,r=s.includes(`echo '${p}' > ${u}`)||s.includes(`echo "${p}" > ${u}"`),n=s.includes(`echo '${m}' > ${u}`)||s.includes(`echo "${m}" > ${u}"`);r&&!n?i=!0:n&&!r?i=!1:o.trim()&&(i=o.trim()===p);let a=i?p:m;if(""!==o.trim()&&o.trim()!==a){let e="";for(let t in c)e+=`echo '${i?c[t].active:c[t].inactive}' > ${t}; `;e&&execSafe(e)}localStorage.setItem(_,i?"1":"0"),l.checked=i})}catch{}}),l.addEventListener("change",()=>{let r=l.checked;localStorage.setItem(_,r?"1":"0"),setTimeout(()=>{let a="";n&&(a+=`sed -i "s|# ${n}=.*$|# ${n}=${+!!r}|" ${e}; `);let l={forcebattapps_opt:()=>i("forceappsbattopt_on",r?"# forceappsbattopt_on=1\nsettings put global forced_app_standby_enabled 1":"# forceappsbattopt_on=0\nsettings put global forced_app_standby_enabled 0"),thermal_opt:()=>i("thermalset_on",r?`# thermalset_on=1
system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0
chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms
echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres
echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres
chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus
pm disable com.google.android.gms/.chimera.GmsIntentOperationService`:"# thermalset_on=0\nsystem_table_unset activity_manager_constants\npm enable com.google.android.gms/.chimera.GmsIntentOperationService"),limitbackground_opt:()=>i("limitprocess_on",r?"# limitprocess_on=1\nif [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi":"# limitprocess_on=0\nif [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi"),forcedoze_opt:()=>i("forcedoze_on",r?"# forcedoze_on=1\ndumpsys deviceidle force-idle":"# forcedoze_on=0\ndumpsys deviceidle unforce")};if(l[t])a+=l[t]();else if(c&&Object.keys(c).length>0)for(let o in c){let i=r?c[o].active:c[o].inactive;if("frq_on"===t&&r&&(o.includes("policy0")||o.includes("policy4"))){let t=o.includes("policy0")?"lit":"big";a+=`val=$(grep -F "# ${t}=" ${e} | awk '{print $2}' | sed 's/Mhz//'); val=$((val*1000)); echo $val > ${o}; ${s(o,`$((${t}*1000))`)} `;continue}a+=`echo '${i}' > ${o}; ${s(o,i)}`}o(()=>execSafe(a));let d={forcebattapps_opt:()=>execSafe(r?"settings put global forced_app_standby_enabled 1":"settings put global forced_app_standby_enabled 0"),cpu_hotplug:()=>execSafe(r?"echo '0' > /sys/power/cpuhotplug/governor/user_mode && echo '0' > /sys/power/cpuhotplug/governor/enabled":"echo '1' > /sys/power/cpuhotplug/governor/user_mode && echo '1' > /sys/power/cpuhotplug/governor/enabled"),power_eff:()=>execSafe(r?"echo 'Y' > /sys/module/workqueue/parameters/power_efficient":"echo 'N' > /sys/module/workqueue/parameters/power_efficient"),thermal_opt:()=>execSafe(r?"system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0 && chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus && chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus && echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus && echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus && echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres && echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres && echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres && echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms && echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus && echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus && echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres && echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres && echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms && echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres && chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus && pm disable com.google.android.gms/.chimera.GmsIntentOperationService":"system_table_unset activity_manager_constants && pm enable com.google.android.gms/.chimera.GmsIntentOperationService"),gpuboost_opt:()=>execSafe(r?"echo '3' > /sys/devices/platform/17500000.mali/dvfs_governor":"echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor"),swap_opt:()=>execSafe(r?"echo '10' > /proc/sys/vm/dirty_ratio && echo '3' > /proc/sys/vm/dirty_background_ratio && echo '2500' > /proc/sys/vm/dirty_expire_centisecs && echo '1250' > /proc/sys/vm/dirty_writeback_centisecs && echo '2' > /proc/sys/vm/laptop_mode && echo '70' > /proc/sys/vm/swappiness":"echo '0' > /proc/sys/vm/dirty_ratio && echo '0' > /proc/sys/vm/dirty_background_ratio && echo '200' > /proc/sys/vm/dirty_expire_centisecs && echo '500' > /proc/sys/vm/dirty_writeback_centisecs && echo '0' > /proc/sys/vm/laptop_mode && echo '100' > /proc/sys/vm/swappiness"),storage_opt:()=>execSafe(r?"echo '1' > /sys/block/sda/queue/rotational && echo '1' > /sys/block/sda/queue/add_random && echo '2' > /sys/block/sda/queue/rq_affinity":"echo '0' > /sys/block/sda/queue/rotational && echo '0' > /sys/block/sda/queue/add_random && echo '1' > /sys/block/sda/queue/rq_affinity"),limitbackground_opt:()=>execSafe(r?"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi":"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi"),forcedoze_opt:()=>execSafe(r?"dumpsys deviceidle force-idle":"dumpsys deviceidle unforce")};d[t]&&d[t]()},249)})}let r=[{id:"forcebattapps_opt",probePath:"FORCEAPPSBATT_MARKER",marker:"forceappsbattopt_on",defaultState:!0,paths:{FORCEAPPSBATT_MARKER:{active:"settings put global forced_app_standby_enabled 1",inactive:"settings put global forced_app_standby_enabled 0"}}},{id:"cpu_hotplug",probePath:"CPUHOTPLUG_STATE_MARKER",marker:"hotplugset_on",defaultState:!0,paths:{"/sys/power/cpuhotplug/governor/user_mode":{active:"0",inactive:"1"},"/sys/power/cpuhotplug/governor/enabled":{active:"0",inactive:"1"}}},{id:"power_eff",probePath:"POWEREFFI_STATE_MARKER",marker:"powereffiset_on",defaultState:!0,paths:{"/sys/module/workqueue/parameters/power_efficient":{active:"Y",inactive:"N"}}},{id:"thermal_opt",probePath:"THERMAL_STATE_MARKER",marker:"thermalset_on",defaultState:!0,paths:{THERMAL_STATE_MARKER:{active:"system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0; chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus; echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres; echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms; echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres; chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus; pm disable com.google.android.gms/.chimera.GmsIntentOperationService",inactive:"system_table_unset activity_manager_constants; pm enable com.google.android.gms/.chimera.GmsIntentOperationService"}}},{id:"gpuboost_opt",probePath:"GPUBOOST_STATE_MARKER",marker:"gpuboost_on",defaultState:!1,paths:{"/sys/devices/platform/17500000.mali/dvfs_governor":{active:"3",inactive:"1"}}},{id:"swap_opt",probePath:"SWAP_STATE_MARKER",marker:"swapset_on",defaultState:!0,paths:{"/proc/sys/vm/dirty_ratio":{active:"10",inactive:"0"},"/proc/sys/vm/dirty_background_ratio":{active:"3",inactive:"0"},"/proc/sys/vm/dirty_expire_centisecs":{active:"2500",inactive:"200"},"/proc/sys/vm/dirty_writeback_centisecs":{active:"1250",inactive:"500"},"/proc/sys/vm/laptop_mode":{active:"2",inactive:"0"},"/proc/sys/vm/swappiness":{active:"70",inactive:"100"}}},{id:"storage_opt",probePath:"STORAGE_STATE_MARKER",marker:"storageset_on",defaultState:!0,paths:{"/sys/block/sda/queue/rotational":{active:"1",inactive:"0"},"/sys/block/sda/queue/add_random":{active:"1",inactive:"0"},"/sys/block/sda/queue/rq_affinity":{active:"2",inactive:"1"}}},{id:"batteryprotect_opt",probePath:"BATTERYPROTECT_STATE_MARKER",marker:"batteryprotect_on",defaultState:!1,paths:{"/sys/class/power_supply/battery/batt_full_capacity":{active:"90",inactive:"100"}}},{id:"frq_on",probePath:"FRQ_STATE_MARKER",marker:"frqset_on",defaultState:!0,paths:{"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq":{active:"1690000",inactive:"1794000"},"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq":{active:"1690000",inactive:"2704000"}}},{id:"volt_on",probePath:"VOLTAGE_STATE_MARKER",marker:"voltset_on",defaultState:!0,paths:{"/sys/power/percent_margin/big_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/lit_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/g3d_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/mif_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/aud_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/cam_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/cp_margin_percent":{active:"0",inactive:"0"},"/sys/power/percent_margin/disp_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/fsys0_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/int_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/intcam_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/iva_margin_percent":{active:"-4",inactive:"0"},"/sys/power/percent_margin/score_margin_percent":{active:"-4",inactive:"0"}}},{id:"limitbackground_opt",probePath:"LIMITBACKGROUND_MARKER",marker:"limitprocess_on",defaultState:!1,paths:{LIMITBACKGROUND_MARKER:{active:"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 4; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 4; fi",inactive:"if [ $(getprop ro.build.version.sdk) -eq 35 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 34 ]; then service call activity 51 i32 -1; elif [ $(getprop ro.build.version.sdk) -eq 33 ]; then service call activity 44 i32 -1; fi"}}},{id:"forcedoze_opt",probePath:"FORCEDOZE_LAB_MARKER",marker:"forcedoze_on",defaultState:!1,paths:{FORCEDOZE_LAB_MARKER:{active:"dumpsys deviceidle force-idle",inactive:"dumpsys deviceidle unforce"}}}];r.forEach(e=>c(e));let n=initPopup,a={frq_little:"1690 Mhz",frq_big:"1690 Mhz"};function l(t,s){s.dataset.selected=t;let o=s.querySelector(".popup-value");o||((o=document.createElement("span")).className="popup-value",s.appendChild(o)),o.textContent=t,localStorage.setItem(s.id,t);let i="frq_little"===s.id?"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq":"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",c=1e3*parseInt(t),r="frq_little"===s.id?"# lit=":"# big=";execQueue(`echo '${c}' > ${i} && sed -i "s|${r}.*|${r}${t}|" ${e} && sed -i "s|echo ['\\"][^'\\"]*['\\"] > ${i}|echo '${c}' > ${i}|g" ${e}`)}["frq_little","frq_big"].forEach(e=>{let t=document.getElementById(e);if(!t)return;let s=localStorage.getItem(e)||a[e];t.dataset.selected=s;let o=t.querySelector(".popup-value");o||((o=document.createElement("span")).className="popup-value",t.appendChild(o)),o.textContent=s,t.addEventListener("click",e=>{(e.stopPropagation(),t.classList.contains("popup-label-active"))?n.closePopup():(document.querySelectorAll(".popup-label-active").forEach(e=>e.classList.remove("popup-label-active")),t.classList.add("popup-label-active"),n.disableOptionsTemporarily(300),n.openPopup(t,l))})});let d=[{id:"batt_level",path:"/sys/class/power_supply/battery/batt_full_capacity",marker:"battery_litmit"}],u=e=>Math.round(e)+80,p=e=>Math.round(parseInt(e))-80;d.forEach(t=>{let i,c=document.getElementById(t.id);if(!c)return;let r=`battery_${t.id}`;c.value=p(null===localStorage.getItem(r)?90:parseInt(localStorage.getItem(r)));let n=document.getElementById("batteryprotect_opt");o(()=>{try{execSafe(`grep -F "# ${t.marker}=" ${e} || echo "# ${t.marker}=90%"`).then(e=>{let i=e.match(RegExp(`# ${t.marker}=(\\d+)%`));if(i){let e=parseInt(i[1]);if(c.value=p(e),localStorage.setItem(r,e),n?.checked){let i=`echo '${e}' > ${t.path}; ${s(t.path,e)}`;o(()=>execSafe(i))}}})}catch{}}),c.addEventListener("input",()=>{let a=u(Math.round(parseFloat(c.value)));localStorage.setItem(r,a),clearTimeout(i),i=setTimeout(()=>{let i=n?.checked,c=`sed -i "s|# ${t.marker}=.*|# ${t.marker}=${a}%|" ${e}; `;i?c+=`sed -i "s|# batteryprotect_on=.*|# batteryprotect_on=1|" ${e}; echo '${a}' > ${t.path}; ${s(t.path,a)}`:c+=`sed -i "s|# batteryprotect_on=.*|# batteryprotect_on=0|" ${e}; echo '100' > ${t.path}; ${s(t.path,"100")}`,o(()=>execSafe(c))},249)})});let m=document.getElementById("batteryprotect_opt");m&&m.addEventListener("change",()=>{let t=m.checked;setTimeout(()=>{let i=d.map(o=>{let i=document.getElementById(o.id);if(!i)return"";let c=u(Math.round(parseFloat(i.value))),r=t?c:100;return`sed -i "s|# batteryprotect_on=.*|# batteryprotect_on=${+!!t}|" ${e}; echo '${r}' > ${o.path}; ${s(o.path,r)}`}).filter(e=>e).join("; ");i&&o(()=>execSafe(i))},249)});let _=[{id:"volt_big",path:"/sys/power/percent_margin/big_margin_percent",marker:"big_volt"},{id:"volt_little",path:"/sys/power/percent_margin/lit_margin_percent",marker:"lit_volt"},{id:"volt_gpu",path:"/sys/power/percent_margin/g3d_margin_percent",marker:"g3d_volt"},{id:"volt_mif",path:"/sys/power/percent_margin/mif_margin_percent",marker:"mif_volt"},{id:"volt_audio",path:"/sys/power/percent_margin/aud_margin_percent",marker:"aud_volt"},{id:"volt_camera",path:"/sys/power/percent_margin/cam_margin_percent",marker:"cam_volt"},{id:"volt_cp",path:"/sys/power/percent_margin/cp_margin_percent",marker:"cp_volt"},{id:"volt_display",path:"/sys/power/percent_margin/disp_margin_percent",marker:"disp_volt"},{id:"volt_fsys",path:"/sys/power/percent_margin/fsys0_margin_percent",marker:"fsys0_volt"},{id:"volt_int",path:"/sys/power/percent_margin/int_margin_percent",marker:"int_volt"},{id:"volt_intcamera",path:"/sys/power/percent_margin/intcam_margin_percent",marker:"intcam_volt"},{id:"volt_iva",path:"/sys/power/percent_margin/iva_margin_percent",marker:"iva_volt"},{id:"volt_score",path:"/sys/power/percent_margin/score_margin_percent",marker:"score_volt"}],v=e=>-Math.round(e),y=e=>-Math.round(parseInt(e));_.forEach(t=>{let i,c=document.getElementById(t.id);if(!c)return;let r="volt_cp"===t.id?0:-4,n=`voltage_${t.id}`;c.value=y(null===localStorage.getItem(n)?r:parseInt(localStorage.getItem(n)));let a=document.getElementById("volt_on");o(()=>{try{let i="volt_cp"===t.id?0:-4;execSafe(`grep -F "# ${t.marker}=" ${e} || echo "# ${t.marker}=${i}"`).then(e=>{let i=e.match(RegExp(`# ${t.marker}=(-?\\d+)`));if(i){let e=parseInt(i[1]);if(c.value=y(e),localStorage.setItem(n,e),a?.checked){let i=`echo '${e}' > ${t.path}; ${s(t.path,e)}`;o(()=>execSafe(i))}}})}catch{}}),c.addEventListener("input",()=>{let r=v(Math.round(parseFloat(c.value)));localStorage.setItem(n,r),clearTimeout(i),i=setTimeout(()=>{let i=a?.checked,c=`sed -i "s|# ${t.marker}=.*|# ${t.marker}=${r}|" ${e}; `;c+=i?`echo '${r}' > ${t.path}; ${s(t.path,r)}`:`echo '0' > ${t.path}; ${s(t.path,"0")}`,o(()=>execSafe(c))},250)})});let h=document.getElementById("volt_on");h&&h.addEventListener("change",()=>{let e=h.checked;setTimeout(()=>{let t=_.map(t=>{let o=document.getElementById(t.id);if(!o)return"";let i=v(Math.round(parseFloat(o.value))),c=e?i:0;return`echo '${c}' > ${t.path}; ${s(t.path,c)}`}).filter(e=>e).join("; ");t&&o(()=>execSafe(t))},249)}),Object.entries({commandFile:e,scriptContent:t,buildSedReplace:s,scheduleIdle:o,initToggleOption:c,AllToggles:r,sliderValueToBattery:u,batteryToSliderValue:p,sliderValueToVoltage:v,voltageToSliderValue:y,batterySliders:d,voltageSliders:_}).forEach(([e,t])=>{try{void 0!==t&&(window[e]=t)}catch{}}),window.applySettings=async function(){return new Promise(t=>{o(()=>{try{let o=async t=>{try{return(await execSafe(`grep -m1 "^[#][[:space:]]*${t}=" ${e} | head -n1 | cut -d'=' -f2`)).trim()}catch{return null}},i=(e,t)=>{if(!e||!t)return!1;let s=Number(e.replace(/\s*Mhz\s*/i,"")),o=Number(t.replace(/\s*Mhz\s*/i,""));return s===o};setTimeout(()=>{r.forEach(e=>{let t=document.getElementById(e.id);if(!t)return;let s=`toggle_state_${e.id}`,o=null===localStorage.getItem(s)?void 0===e.defaultState||e.defaultState:"1"===localStorage.getItem(s);null===localStorage.getItem(s)&&localStorage.setItem(s,o?"1":"0"),t.checked=o,t.dispatchEvent(new Event("change",{bubbles:!0}))})},0),setTimeout(async()=>{for(let t=0;t<d.length;t++){let i=d[t];setTimeout(async()=>{try{let t=`battery_${i.id}`,c=document.getElementById(i.id);if(!c)return;let r=null===localStorage.getItem(t)?90:Number(localStorage.getItem(t));null===localStorage.getItem(t)&&localStorage.setItem(t,String(r)),c.value=p(r);let n=await o(i.marker);if(null===n||Number(n.replace("%",""))!==r){let t=document.getElementById("batteryprotect_opt"),o=t?.checked,c=o?r:100,n=`
                      if grep -m1 -q "^[#][[:space:]]*${i.marker}=" "${e}"; then
                        sed -i 's|^[#][[:space:]]*${i.marker}=.*|# ${i.marker}=${r}%|' "${e}";
                      else
                        printf "# ${i.marker}=%s%%\\n" "${r}" >> "${e}";
                      fi
                      if grep -m1 -q "^[#][[:space:]]*batteryprotect_on=" "${e}"; then
                        sed -i 's|^[#][[:space:]]*batteryprotect_on=.*|# batteryprotect_on=${+!!o}|' "${e}";
                      else
                        printf "# batteryprotect_on=%s\\n" "${+!!o}" >> "${e}";
                      fi
                      echo '${c}' > ${i.path};
                      ${s(i.path,c)}`.trim();execQueue(n)}}catch{}},10*t)}},5),setTimeout(async()=>{let t=["frq_little","frq_big"],c={frq_little:"1690 Mhz",frq_big:"1690 Mhz"},r={frq_little:1794e3,frq_big:2704e3};for(let n=0;n<t.length;n++){let a=t[n],l=document.getElementById(a);if(!l)continue;let d="frq_little"===a?"lit":"big",u=null===localStorage.getItem(a)?c[a]:localStorage.getItem(a);null===localStorage.getItem(a)&&localStorage.setItem(a,u),l.dataset.selected=u;let p=l.querySelector(".popup-value");p||((p=document.createElement("span")).className="popup-value",l.appendChild(p)),p.textContent=u,setTimeout(async()=>{try{let t=await o(d);if(!i(u,t)){let t="frq_little"===a?"/sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq":"/sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq",o=document.getElementById("frq_on"),i=o?.checked?1e3*Number(u.replace(/\s*Mhz\s*/i,"")):r[a],c="frq_little"===a?"# lit=":"# big=",n=`sed -i "s|${c}.*|${c}${u}|" ${e}; echo '${i}' > ${t}; ${s(t,i)}`;execQueue(n)}}catch{}},"frq_little"===a?120:200)}},50),setTimeout(async()=>{for(let t=0;t<_.length;t++){let i=_[t];setTimeout(async()=>{try{let t=`voltage_${i.id}`,c=document.getElementById(i.id);if(!c)return;let r="volt_cp"===i.id?0:-4,n=null===localStorage.getItem(t)?r:Number(localStorage.getItem(t));null===localStorage.getItem(t)&&localStorage.setItem(t,String(n)),c.value=y(n);let a=await o(i.marker);if(null===a||Number(a)!==n){let t=document.getElementById("volt_on"),o=t?.checked?n:0,c=`
                      if grep -m1 -q "^[#][[:space:]]*${i.marker}=" "${e}"; then
                        sed -i 's|^[#][[:space:]]*${i.marker}=.*|# ${i.marker}=${n}|' "${e}";
                      else
                        printf "# ${i.marker}=%s\\n" "${n}" >> "${e}";
                      fi
                      echo '${o}' > ${i.path};
                      ${s(i.path,o)}
                    `.trim();execQueue(c)}}catch{}},80*t)}setTimeout(()=>t(),80*_.length+450)},250)}catch{}})})}}),document.addEventListener("DOMContentLoaded",()=>{let e={mask:document.querySelector(".oui-dialog-mask"),body:document.body,resetButton:document.querySelector(".close-dialog-text-reset")};window.resetLoadingAnimation=function(e){e&&(e.style.animation="none",e.offsetHeight,e.style.animation="",e.querySelectorAll(".ball").forEach(e=>{e.style.animation="none",e.offsetHeight,e.style.animation=""}))};let t={open(t){let s=document.getElementById(t);if(!s||!e.mask)return;let o=s.querySelector(".oui-loading");o&&resetLoadingAnimation&&resetLoadingAnimation(o),s.classList.add("show"),e.mask.classList.add("show"),e.body.classList.add("no-scroll")},close(){let t=document.querySelector(".oui-dialog.show");return!!t&&!!e.mask&&(t.classList.remove("show"),t.classList.add("hide"),e.mask.classList.remove("show"),e.body.classList.remove("no-scroll"),setTimeout(()=>t.classList.remove("hide"),5),!0)},closeKeepingMask(){let t=document.querySelector(".oui-dialog.show");return!!t&&(t.classList.remove("show"),t.classList.add("hide"),e.mask&&e.mask.classList.add("show"),e.body.classList.add("no-scroll"),setTimeout(()=>t.classList.remove("hide"),5),!0)}};if(e.resetButton){let s=e.resetButton.closest(".reset-dialog-btn");if(!s)return;s.removeEventListener("click",t.close),s.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();let o=document.createElement("div");o.id="temp-blocking-layer",o.style.cssText="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 3000; pointer-events: all;",e.body.appendChild(o),e.body.classList.add("no-scroll"),t.closeKeepingMask()&&setTimeout(()=>{o.remove(),t.open("resetting_app_dialog"),setTimeout(()=>{let e;e=["settings put global forced_app_standby_enabled 1","echo '0' > /sys/power/cpuhotplug/governor/user_mode","echo '0' > /sys/power/cpuhotplug/governor/enabled","echo 'Y' > /sys/module/workqueue/parameters/power_efficient","system_table_set activity_manager_constants max_cached_processes=0,background_settle_time=0,fgservice_min_shown_time=0,fgservice_min_report_time=0,fgservice_screen_on_before_time=0,fgservice_screen_on_after_time=0,content_provider_retain_time=0,gc_timeout=0,gc_min_interval=0,full_pss_min_interval=0,full_pss_lowered_interval=0,power_check_interval=0,power_check_max_cpu_1=0,power_check_max_cpu_2=0,power_check_max_cpu_3=0,power_check_max_cpu_4=0,service_usage_interaction_time=0,usage_stats_interaction_interval=0,service_restart_duration=0,service_reset_run_duration=0,service_restart_duration_factor=0,service_min_restart_time_between=0,service_max_inactivity=0,service_bg_start_timeout=0,CUR_MAX_CACHED_PROCESSES=0,CUR_MAX_EMPTY_PROCESSES=0,CUR_TRIM_EMPTY_PROCESSES=0,CUR_TRIM_CACHED_PROCESSES=0","chmod 666 /sys/devices/system/cpu/cpu[0-7]/max_cpus; chmod 666 /sys/devices/system/cpu/cpu[0-7]/min_cpus","echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus; echo 0 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus; echo 60 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres","echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres; echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms","echo 2 > /sys/devices/system/cpu/cpu0/core_ctl/min_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/max_cpus; echo 4 > /sys/devices/system/cpu/cpu0/core_ctl/task_thres","echo 80 > /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres; echo 100 > /sys/devices/system/cpu/cpu0/core_ctl/offline_delay_ms; echo 60 > /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres","chmod 444 /sys/devices/system/cpu/cpu[0-7]/max_cpus","pm disable com.google.android.gms/.chimera.GmsIntentOperationService","echo '1' > /sys/devices/platform/17500000.mali/dvfs_governor","echo '10' > /proc/sys/vm/dirty_ratio","echo '3' > /proc/sys/vm/dirty_background_ratio","echo '2500' > /proc/sys/vm/dirty_expire_centisecs","echo '1250' > /proc/sys/vm/dirty_writeback_centisecs","echo '2' > /proc/sys/vm/laptop_mode","echo '70' > /proc/sys/vm/swappiness","echo '1' > /sys/block/sda/queue/rotational","echo '1' > /sys/block/sda/queue/add_random","echo '2' > /sys/block/sda/queue/rq_affinity","echo '100' > /sys/class/power_supply/battery/batt_full_capacity","echo '1690000' > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq","echo '1690000' > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq","echo '-4' > /sys/power/percent_margin/big_margin_percent","echo '-4' > /sys/power/percent_margin/lit_margin_percent","echo '-4' > /sys/power/percent_margin/g3d_margin_percent","echo '-4' > /sys/power/percent_margin/mif_margin_percent","echo '-4' > /sys/power/percent_margin/aud_margin_percent","echo '-4' > /sys/power/percent_margin/cam_margin_percent","echo '0' > /sys/power/percent_margin/cp_margin_percent","echo '-4' > /sys/power/percent_margin/disp_margin_percent","echo '-4' > /sys/power/percent_margin/fsys0_margin_percent","echo '-4' > /sys/power/percent_margin/int_margin_percent","echo '-4' > /sys/power/percent_margin/intcam_margin_percent","echo '-4' > /sys/power/percent_margin/iva_margin_percent","echo '-4' > /sys/power/percent_margin/score_margin_percent","if [ $API -eq 35 ]; then service call activity 51 i32 -1; elif [ $API -eq 34 ]; then service call activity 51 i32 -1; elif [ $API -eq 33 ]; then service call activity 44 i32 -1; fi","dumpsys deviceidle unforce"],execSafe("rm -rf /data/data/me.weishu.kernelsu/app_webview"),execSafe("rm -rf /data/data/com.rifsxd.ksunext/app_webview"),execSafe("rm -rf /data/data/me.bmax.apatch/app_webview"),setTimeout(()=>{e.forEach(e=>execSafe(e)),execSafe(`cat > ${commandFile} << 'EOF'
${scriptContent}
EOF`)},5),setTimeout(()=>void(execSafe("am force-stop me.weishu.kernelsu"),execSafe("am force-stop com.rifsxd.ksunext"),execSafe("am force-stop me.bmax.apatch")),4e3)},5)},700)})}});let S=!0,k={mask:document.querySelector(".oui-loading-mask"),dialog:document.querySelector(".oui-dialog"),loader:document.querySelector(".oui-loading"),label:null,body:document.body,docElement:document.documentElement},T=e=>new Promise(t=>setTimeout(t,e));async function L(){k.mask.classList.remove("active"),k.dialog.style.cssText+="opacity: 0; pointer-events: none; transform: translateX(-50%) translateY(20px);",k.loader.classList.remove("active"),k.body.classList.remove("no-scroll");let e=async t=>{t.target!==k.mask||k.mask.classList.contains("active")||(await T(5),S=!1,k.body.style.cssText=k.body.style.cssText.replace(/pointer-events:\s*none;?/g,"").replace(/user-select:\s*none;?/g,"").replace(/overflow:\s*hidden;?/g,""),k.docElement.style.cssText=k.docElement.style.cssText.replace(/pointer-events:\s*none;?/g,"").replace(/user-select:\s*none;?/g,""),k.mask.removeEventListener("transitionend",e))};k.mask.addEventListener("transitionend",e,{passive:!0})}async function $(){try{let[e,t]=await Promise.all([execSafe("dumpsys battery 2>/dev/null | grep mSavedBatteryAsoc | cut -d'[' -f2 | cut -d']' -f1"),execSafe("dumpsys battery 2>/dev/null | grep mSavedBatteryUsage | cut -d'[' -f2 | cut -d']' -f1")]),s=(e||"").toString().trim(),o=(t||"").toString().trim(),i=null;if(o&&o.length>1){let e=o.slice(0,-1);i=e.slice(0,-1)+"."+e.slice(-1)}document.getElementById("battery_health").textContent=s&&i?`${s}% / ${i} Cycles`:"Unknown"}catch{document.getElementById("battery_health").textContent="Unknown"}}!async function(){await T(200),$(),await T(1500),new Promise(e=>{splashScreen.classList.remove("show"),setTimeout(e,200)}),k.body.style.cssText+="pointer-events: none; user-select: none; overflow: hidden;",k.docElement.style.cssText+="pointer-events: none; user-select: none;",await T(500),k.label||(k.label=document.querySelector(".oui-dialog-description")),k.label&&(k.label.innerHTML="Checking Settings..."),k.dialog.style.cssText+="opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0);",k.loader.classList.add("active"),k.body.classList.add("no-scroll"),await applySettings(),await T(1700),S&&await L()}();